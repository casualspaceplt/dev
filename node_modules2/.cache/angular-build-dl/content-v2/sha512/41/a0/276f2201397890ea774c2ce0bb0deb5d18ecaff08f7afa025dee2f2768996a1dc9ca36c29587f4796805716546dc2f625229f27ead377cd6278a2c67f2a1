(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{xgkW:function(t,e,n){"use strict";n.r(e),n.d(e,"FavoriteListPageModule",function(){return D});var i=n("tyNb"),o=n("mrSG"),s=n("TEn/"),c=n("XNiG"),r=n("VRyK"),a=n("NV1z"),l=n("R0Ic"),b=n("fXoL"),h=n("H+Hf"),d=n("qOnq"),f=n("ofXK"),p=n("4ro/"),u=n("xJkR"),g=n("kmqs"),m=n("sYmb");function w(t,e){1&t&&(b.Qb(0,"empty-view",13),b.gc(1,"translate")),2&t&&b.lc("text",b.hc(1,1,"ERROR_NETWORK"))}function O(t,e){1&t&&(b.Qb(0,"empty-view",14),b.gc(1,"translate")),2&t&&b.lc("text",b.hc(1,1,"EMPTY_FAVORITES"))}const v=function(){return{width:"100%",height:"200px","border-radius":"0"}};function V(t,e){1&t&&(b.Vb(0,"ion-col",15),b.Qb(1,"ngx-skeleton-loader",16),b.Ub()),2&t&&(b.Db(1),b.lc("theme",b.oc(1,v)))}function y(t,e){if(1&t&&(b.Vb(0,"ion-row"),b.Ec(1,V,2,2,"ion-col",11),b.Ub()),2&t){const t=b.fc();b.Db(1),b.lc("ngForOf",t.skeletonArray)}}const x=function(t){return[t]},R=function(t,e){return{location:t,unit:e}};function E(t,e){if(1&t&&(b.Vb(0,"ion-col",15),b.Qb(1,"app-place-card",17),b.Ub()),2&t){const t=e.$implicit,n=b.fc();b.Db(1),b.lc("routerLink",b.pc(4,x,"../places/"+t.id+"/"+t.slug))("place",t)("extraParams",b.qc(6,R,n.location,n.preference.unit))("customObservable",n.loadAndScroll)}}function I(t,e){if(1&t){const t=b.Wb();b.Vb(0,"ion-infinite-scroll",18),b.dc("ionInfinite",function(e){return b.vc(t),b.fc().onLoadMore(e)}),b.Qb(1,"ion-infinite-scroll-content"),b.Ub()}}let L=(()=>{class t extends a.a{constructor(t,e,n){super(t),this.geolocationService=e,this.placeService=n,this.params={},this.places=[],this.skeletonArray=Array(12),this.params.limit=20,this.params.page=0}enableMenuSwipe(){return!0}ngOnInit(){this.setupObservables()}setupObservables(){this.contentLoaded=new c.a,this.loadAndScroll=Object(r.a)(this.container.ionScroll,this.contentLoaded)}onContentLoaded(){setTimeout(()=>{this.contentLoaded.next()},300)}ionViewDidEnter(){return Object(o.a)(this,void 0,void 0,function*(){this.places.length||(yield this.showLoadingView({showOverlay:!1}),this.loadData());const t=yield this.getTrans("FAVORITES");this.setPageTitle(t),this.loadLocation()})}loadLocation(){return Object(o.a)(this,void 0,void 0,function*(){try{const t=yield this.geolocationService.getCurrentPosition();this.location=t}catch(t){console.warn(t)}})}loadData(){return Object(o.a)(this,void 0,void 0,function*(){try{const t=yield this.placeService.loadFavorites(this.params);for(let e of t)this.places.push(e);this.places.length?this.showContentView():this.showEmptyView(),this.onContentLoaded(),this.onRefreshComplete(t)}catch(t){this.translate.get("ERROR_NETWORK").subscribe(t=>this.showToast(t)),this.showContentView(),this.onRefreshComplete()}})}onLoadMore(t={}){this.infiniteScroll=t.target,this.params.page++,this.loadData()}onReload(t={}){this.refresher=t.target,this.places=[],this.params.page=0,this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(b.t),b.Pb(h.a),b.Pb(d.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["page-favorite-list"]],viewQuery:function(t,e){if(1&t&&b.Kc(s.r,3),2&t){let t;b.tc(t=b.ec())&&(e.container=t.first)}},features:[b.Ab],decls:20,vars:15,consts:[[1,"ion-no-border"],["color","primary","fixed",""],["slot","start"],["scrollEvents","true",1,"ion-padding"],["container",""],["slot","fixed",3,"ionRefresh"],[3,"pullingText","refreshingText"],["icon","alert-circle-outline",3,"text",4,"ngIf"],["icon","heart",3,"text",4,"ngIf"],["fixed",""],[4,"ngIf"],["size-xs","12","size-sm","6","size-md","6","size-lg","4",4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],["icon","alert-circle-outline",3,"text"],["icon","heart",3,"text"],["size-xs","12","size-sm","6","size-md","6","size-lg","4"],["count","1","appearance","circle",3,"theme"],[3,"routerLink","place","extraParams","customObservable"],[3,"ionInfinite"]],template:function(t,e){1&t&&(b.Vb(0,"ion-header",0),b.Vb(1,"ion-toolbar",1),b.Vb(2,"ion-buttons",2),b.Qb(3,"ion-back-button"),b.Ub(),b.Vb(4,"ion-title"),b.Gc(5),b.gc(6,"translate"),b.Ub(),b.Ub(),b.Ub(),b.Vb(7,"ion-content",3,4),b.Vb(9,"ion-refresher",5),b.dc("ionRefresh",function(t){return e.onReload(t)}),b.Qb(10,"ion-refresher-content",6),b.gc(11,"translate"),b.gc(12,"translate"),b.Ub(),b.Ec(13,w,2,3,"empty-view",7),b.Ec(14,O,2,3,"empty-view",8),b.Vb(15,"ion-grid",9),b.Ec(16,y,2,1,"ion-row",10),b.Vb(17,"ion-row"),b.Ec(18,E,2,9,"ion-col",11),b.Ub(),b.Ub(),b.Ec(19,I,2,0,"ion-infinite-scroll",12),b.Ub()),2&t&&(b.Db(5),b.Hc(b.hc(6,9,"MY_FAVORITES")),b.Db(5),b.mc("pullingText",b.hc(11,11,"PULL_TO_REFRESH")),b.mc("refreshingText",b.hc(12,13,"REFRESHING")),b.Db(3),b.lc("ngIf",e.isErrorViewVisible),b.Db(1),b.lc("ngIf",e.isEmptyViewVisible),b.Db(2),b.lc("ngIf",e.isLoadingViewVisible),b.Db(1),b.lc("@staggerIn",e.places.length),b.Db(1),b.lc("ngForOf",e.places),b.Db(1),b.lc("ngIf",e.isContentViewVisible))},directives:[s.w,s.db,s.l,s.h,s.i,s.bb,s.r,s.K,s.L,f.m,s.v,s.O,f.l,p.a,s.q,u.a,g.a,s.lb,i.i,s.y,s.z],pipes:[m.c],styles:["ion-card[_ngcontent-%COMP%]{width:100%}ion-card[_ngcontent-%COMP%]   .bg-img[_ngcontent-%COMP%]{background-size:cover;background-position:100%;width:100%;height:200px}"],data:{animation:[Object(l.l)("staggerIn",[Object(l.k)("* => *",[Object(l.f)(":enter",Object(l.j)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(l.f)(":enter",Object(l.h)("100ms",[Object(l.e)("300ms",Object(l.j)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),t})();var j=n("d2mR");let D=(()=>{class t{}return t.\u0275mod=b.Nb({type:t}),t.\u0275inj=b.Mb({factory:function(e){return new(e||t)},imports:[[j.a,i.j.forChild([{path:"",component:L}])]]}),t})()}}]);