(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jroN:function(t,e,n){"use strict";n.r(e),n.d(e,"ReviewListPageModule",function(){return k});var i=n("tyNb"),o=n("mrSG"),a=n("NV1z"),r=n("qOnq"),s=n("TEn/"),c=n("XNiG"),l=n("VRyK"),b=n("R0Ic"),d=n("fXoL"),g=n("nFsf"),h=n("ofXK"),p=n("4ro/"),u=n("xJkR"),f=n("wf0l"),m=n("Qsw1"),w=n("sYmb");function v(t,e){if(1&t&&(d.Vb(0,"span"),d.Gc(1),d.gc(2,"translate"),d.Ub()),2&t){const t=d.fc();d.Db(1),d.Jc(" ",t.params.place.title," - ",d.hc(2,2,"REVIEWS")," ")}}function V(t,e){1&t&&(d.Qb(0,"empty-view",15),d.gc(1,"translate")),2&t&&d.lc("text",d.hc(1,1,"ERROR_REVIEWS"))}function O(t,e){1&t&&(d.Qb(0,"empty-view",16),d.gc(1,"translate")),2&t&&d.lc("text",d.hc(1,1,"EMPTY_REVIEWS"))}const x=function(){return{width:"80px",height:"80px"}},y=function(){return{width:"30%","border-radius":"0",height:"15px","margin-bottom":"10px"}},E=function(){return{width:"70%","border-radius":"0",height:"15px"}};function U(t,e){1&t&&(d.Vb(0,"div",18),d.Vb(1,"div",19),d.Vb(2,"div",20),d.Qb(3,"ngx-skeleton-loader",21),d.Ub(),d.Vb(4,"div",22),d.Vb(5,"div"),d.Qb(6,"ngx-skeleton-loader",23),d.Ub(),d.Vb(7,"div"),d.Qb(8,"ngx-skeleton-loader",23),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Db(3),d.lc("theme",d.oc(3,x)),d.Db(3),d.lc("theme",d.oc(4,y)),d.Db(2),d.lc("theme",d.oc(5,E)))}function R(t,e){if(1&t&&(d.Vb(0,"section"),d.Ec(1,U,9,6,"div",17),d.Ub()),2&t){const t=d.fc();d.Db(1),d.lc("ngForOf",t.skeletonReviews)}}function I(t,e){if(1&t&&(d.Vb(0,"div",26),d.Vb(1,"ion-item",27),d.Vb(2,"ion-avatar",2),d.Qb(3,"img",28),d.Ub(),d.Vb(4,"ion-label",29),d.Vb(5,"ion-text",30),d.Vb(6,"span",31),d.Gc(7),d.gc(8,"date"),d.Ub(),d.Ub(),d.Vb(9,"ion-text",32),d.Vb(10,"h3",33),d.Gc(11),d.Ub(),d.Ub(),d.Qb(12,"bar-rating",34),d.Vb(13,"ion-text",32),d.Vb(14,"p",35),d.Gc(15),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t){const t=e.$implicit,n=d.fc(2);d.Db(3),d.lc("lazyLoad",null==t.user||null==t.user.photo?null:t.user.photo.url())("customObservable",n.loadAndScroll),d.Db(4),d.Ic(" ",d.ic(8,9,t.createdAt,"mediumDate")," "),d.Db(4),d.Hc(null==t.user?null:t.user.name),d.Db(1),d.lc("rate",t.rating)("readOnly",!0)("max",5)("theme","stars"),d.Db(3),d.Hc(t.comment)}}function C(t,e){if(1&t&&(d.Vb(0,"ion-list",24),d.Ec(1,I,16,12,"div",25),d.Ub()),2&t){const t=d.fc();d.lc("@staggerIn",t.reviews.length),d.Db(1),d.lc("ngForOf",t.reviews)}}function D(t,e){if(1&t){const t=d.Wb();d.Vb(0,"ion-infinite-scroll",36),d.dc("ionInfinite",function(e){return d.vc(t),d.fc().onLoadMore(e)}),d.Qb(1,"ion-infinite-scroll-content"),d.Ub()}}let P=(()=>{class t extends a.a{constructor(t,e){super(t),this.reviewService=e,this.reviews=[],this.params={},this.params=Object.assign({},this.getParams()),this.params.limit=20,this.params.page=0,this.contentLoaded=new c.a,this.skeletonReviews=Array(10)}enableMenuSwipe(){return!1}ngOnInit(){this.setupObservable()}setupObservable(){this.loadAndScroll=Object(l.a)(this.container.ionScroll,this.contentLoaded)}onContentLoaded(){setTimeout(()=>{this.contentLoaded.next()},400)}ionViewDidEnter(){return Object(o.a)(this,void 0,void 0,function*(){if(yield this.showLoadingView({showOverlay:!1}),this.params.id){this.params.place=yield this.loadPlace();const t=yield this.getTrans("REVIEWS"),e=this.params.place.title+" - "+t;this.setPageTitle(e),this.setMetaTags({title:e})}this.loadData()})}loadPlace(){return Object(o.a)(this,void 0,void 0,function*(){const t=new r.a;return t.id=this.params.id,yield t.fetch()})}loadData(){return Object(o.a)(this,void 0,void 0,function*(){try{const t=yield this.reviewService.load(this.params);for(let e of t)this.reviews.push(e);this.reviews.length?this.showContentView():this.showEmptyView(),this.onContentLoaded(),this.onRefreshComplete(t)}catch(t){this.showContentView(),this.onRefreshComplete();let e=yield this.getTrans("ERROR_NETWORK");this.showToast(e)}})}onLoadMore(t={}){this.infiniteScroll=t.target,this.params.page++,this.loadData()}onReload(t={}){this.refresher=t.target,this.reviews=[],this.params.page=0,this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(d.t),d.Pb(g.a))},t.\u0275cmp=d.Jb({type:t,selectors:[["page-review-list"]],viewQuery:function(t,e){if(1&t&&d.Kc(s.r,3),2&t){let t;d.tc(t=d.ec())&&(e.container=t.first)}},features:[d.Ab],decls:20,vars:12,consts:[[1,"ion-no-border"],["color","primary","fixed",""],["slot","start"],[4,"ngIf"],["scrollEvents","true",1,"ion-padding"],["container",""],["slot","fixed",3,"ionRefresh"],[3,"pullingText","refreshingText"],["icon","alert-circle-outline",3,"text",4,"ngIf"],["icon","star",3,"text",4,"ngIf"],["fixed",""],[1,"ion-justify-content-center"],["size-xs","12","size-lg","8"],["lines","none",4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["icon","alert-circle-outline",3,"text"],["icon","star",3,"text"],["class","skeleton-item light-bg radius",4,"ngFor","ngForOf"],[1,"skeleton-item","light-bg","radius"],[1,"wrapper"],[1,"avatar"],["appearance","circle",3,"theme"],[1,"title"],[3,"theme"],["lines","none"],["class","radius light-bg border ion-margin-bottom ion-padding",4,"ngFor","ngForOf"],[1,"radius","light-bg","border","ion-margin-bottom","ion-padding"],["color","light",1,"no-padding"],["defaultImage","./assets/img/avatar.png",3,"lazyLoad","customObservable"],[1,"ion-text-wrap"],["color","medium",1,"float-end"],[1,"text-small"],["color","dark"],[1,"bold","no-margin"],[1,"rating",3,"rate","readOnly","max","theme"],[1,"text-medium","no-margin"],[3,"ionInfinite"]],template:function(t,e){1&t&&(d.Vb(0,"ion-header",0),d.Vb(1,"ion-toolbar",1),d.Vb(2,"ion-buttons",2),d.Qb(3,"ion-back-button"),d.Ub(),d.Vb(4,"ion-title"),d.Ec(5,v,3,4,"span",3),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"ion-content",4,5),d.Vb(8,"ion-refresher",6),d.dc("ionRefresh",function(t){return e.onReload(t)}),d.Qb(9,"ion-refresher-content",7),d.gc(10,"translate"),d.gc(11,"translate"),d.Ub(),d.Ec(12,V,2,3,"empty-view",8),d.Ec(13,O,2,3,"empty-view",9),d.Vb(14,"ion-grid",10),d.Vb(15,"ion-row",11),d.Vb(16,"ion-col",12),d.Ec(17,R,2,1,"section",3),d.Ec(18,C,2,2,"ion-list",13),d.Ub(),d.Ub(),d.Ub(),d.Ec(19,D,2,0,"ion-infinite-scroll",14),d.Ub()),2&t&&(d.Db(5),d.lc("ngIf",null==e.params||null==e.params.place?null:e.params.place.title),d.Db(4),d.mc("pullingText",d.hc(10,8,"PULL_TO_REFRESH")),d.mc("refreshingText",d.hc(11,10,"REFRESHING")),d.Db(3),d.lc("ngIf",e.isErrorViewVisible),d.Db(1),d.lc("ngIf",e.isEmptyViewVisible),d.Db(4),d.lc("ngIf",e.isLoadingViewVisible),d.Db(1),d.lc("ngIf",e.isContentViewVisible),d.Db(1),d.lc("ngIf",e.isContentViewVisible))},directives:[s.w,s.db,s.l,s.h,s.i,s.bb,h.m,s.r,s.K,s.L,s.v,s.O,s.q,p.a,h.l,u.a,s.F,s.B,s.g,f.b,s.E,s.Y,m.a,s.y,s.z],pipes:[w.c,h.f],styles:["ion-avatar[_ngcontent-%COMP%]{margin:0 12px 0 0!important}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:var(--ion-color-dark)}ul[_ngcontent-%COMP%]{margin:4px 0;padding:0}ul.rating[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0!important;background:none;color:var(--ion-color-primary)}.skeleton-item[_ngcontent-%COMP%]{width:auto;height:auto;margin:10px auto;padding:10px}.skeleton-item[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:inline-flex;width:100%;height:auto;flex:1}.skeleton-item[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:90px}.skeleton-item[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;padding:10px;height:80px}"],data:{animation:[Object(b.l)("staggerIn",[Object(b.k)("* => *",[Object(b.f)(":enter",Object(b.j)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(b.f)(":enter",Object(b.h)("100ms",[Object(b.e)("300ms",Object(b.j)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),t})();var M=n("d2mR");let k=(()=>{class t{}return t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({factory:function(e){return new(e||t)},imports:[[M.a,i.j.forChild([{path:"",component:P}])]]}),t})()}}]);