(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{rJGU:function(e,t,i){"use strict";i.r(t),i.d(t,"PlaceUserListPageModule",function(){return k});var n=i("tyNb"),o=i("mrSG"),s=i("TEn/"),a=i("XNiG"),r=i("VRyK"),c=i("NV1z"),l=i("R0Ic"),d=i("RKXm"),h=i("+rAg"),b=i("fXoL"),p=i("pqyF"),u=i("JvtB"),f=i("6Ip3"),g=i("iNvR"),m=i("qOnq"),w=i("ofXK"),v=i("4ro/"),y=i("xJkR"),P=i("kmqs"),O=i("sYmb");function V(e,t){1&e&&(b.Qb(0,"empty-view",20),b.gc(1,"translate")),2&e&&b.lc("text",b.hc(1,1,"ERROR_NETWORK"))}function L(e,t){1&e&&(b.Qb(0,"empty-view",21),b.gc(1,"translate")),2&e&&b.lc("text",b.hc(1,1,"EMPTY_USER_PLACES"))}const E=function(){return{width:"100%",height:"200px","border-radius":"0"}};function R(e,t){1&e&&(b.Vb(0,"ion-col",22),b.Qb(1,"ngx-skeleton-loader",23),b.Ub()),2&e&&(b.Db(1),b.lc("theme",b.oc(1,E)))}function x(e,t){if(1&e&&(b.Vb(0,"ion-row"),b.Ec(1,R,2,2,"ion-col",18),b.Ub()),2&e){const e=b.fc();b.Db(1),b.lc("ngForOf",e.skeletonArray)}}function S(e,t){if(1&e){const e=b.Wb();b.Vb(0,"ion-col",22),b.Vb(1,"app-place-card",24),b.dc("click",function(){b.vc(e);const i=t.$implicit;return b.fc().onPlaceTouched(i)})("onPromoteButtonTouched",function(t){return b.vc(e),b.fc().onPromoteButtonTouched(t)}),b.Ub(),b.Ub()}if(2&e){const e=t.$implicit,i=b.fc();b.Db(1),b.lc("place",e)("showStatus",!0)("extraParams",i.params)("showPromoteButton",i.isPromotedListingsEnabled)("customObservable",i.loadAndScroll)}}function T(e,t){if(1&e){const e=b.Wb();b.Vb(0,"ion-infinite-scroll",25),b.dc("ionInfinite",function(t){return b.vc(e),b.fc().onLoadMore(t)}),b.Qb(1,"ion-infinite-scroll-content"),b.Ub()}}const C=function(){return["./add"]};let D=(()=>{class e extends c.a{constructor(e,t,i,n,o,s,a){super(e),this.eventBusService=t,this.appConfigService=i,this.packageService=n,this.userPackageService=o,this.currencyGlobalPipe=s,this.placeService=a,this.params={},this.places=[]}ngOnInit(){this.setupObservables(),this.setupEvents(),this.params.unit=this.preference.unit,this.params.limit=20,this.params.page=0}ngOnDestroy(){}setupObservables(){this.contentLoaded=new a.a,this.loadAndScroll=Object(r.a)(this.container.ionScroll,this.contentLoaded)}onContentLoaded(){setTimeout(()=>{this.contentLoaded.next()},300)}setupEvents(){this.eventBusService.on("place:add",()=>{this.onReload()})}ionViewDidEnter(){return Object(o.a)(this,void 0,void 0,function*(){this.places.length?this.onContentLoaded():(yield this.showLoadingView({showOverlay:!1}),this.loadData());const e=yield this.getTrans("PLACES");this.setPageTitle(e),this.setMetaTags({title:e})})}enableMenuSwipe(){return!1}presentPayModalPage(e,t){return Object(o.a)(this,void 0,void 0,function*(){yield this.showLoadingView({showOverlay:!0});const i=yield this.modalCtrl.create({component:h.a,componentProps:{place:e,userPackage:t},cssClass:"pay-modal"});return yield i.present(),yield this.dismissLoadingView(),yield i.onDidDismiss()})}onPromoteButtonTouched(e){return Object(o.a)(this,void 0,void 0,function*(){try{yield this.showLoadingView({showOverlay:!0});const t=(yield this.packageService.load({type:"promote_listing"})).reduce((e,t)=>{const i=this.currencyGlobalPipe.transform(t.finalPrice);return e[t.id]=`\n          <span>${t.name} - ${i}</span>\n          <p class="ion-margin-horizontal text-small">${t.description}</p>\n        `,e},{});yield this.dismissLoadingView();const i=yield this.getTrans(["PROMOTE_LISTING","CONFIRM","CANCEL"]),{value:n}=yield this.showSweetRadio(i.PROMOTE_LISTING,i.CONFIRM,i.CANCEL,t);if(n){yield this.showLoadingView({showOverlay:!0});const t=yield this.userPackageService.create(n);yield this.dismissLoadingView();const{data:i}=yield this.presentPayModalPage(e,t);i&&this.onReload()}}catch(t){this.dismissLoadingView()}})}loadData(){return Object(o.a)(this,void 0,void 0,function*(){try{const e=yield this.appConfigService.load();e&&(this.isPromotedListingsEnabled=e.places.enablePromotedListings);const t=yield this.placeService.loadUserPlaces(this.params);for(let i of t)this.places.push(i);this.onRefreshComplete(t),this.places.length?this.showContentView():this.showEmptyView(),this.onContentLoaded()}catch(e){this.showContentView(),this.onRefreshComplete();let t=yield this.getTrans("ERROR_NETWORK");this.showToast(t)}})}onPlaceTouched(e){"Approved"===e.status&&this.navigateToRelative("./"+e.id)}onLoadMore(e={}){this.infiniteScroll=e.target,this.params.page++,this.loadData()}onReload(e={}){this.refresher=e.target,this.places=[],this.params.page=0,this.loadData()}getStatusColor(e){return"Pending"===e?"warning":"Approved"===e?"success":"Rejected"===e?"danger":"Expired"===e?"tertiary":void console.log("no match found")}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(b.t),b.Pb(p.b),b.Pb(u.a),b.Pb(f.a),b.Pb(g.a),b.Pb(d.a),b.Pb(m.a))},e.\u0275cmp=b.Jb({type:e,selectors:[["place-user-list-page"]],viewQuery:function(e,t){if(1&e&&b.Kc(s.r,3),2&e){let e;b.tc(e=b.ec())&&(t.container=e.first)}},features:[b.Cb([d.a]),b.Ab],decls:28,vars:22,consts:[[1,"ion-no-border"],["color","primary","fixed",""],["slot","start"],["defaultHref","/1/profile"],["slot","end"],["fill","solid","color","secondary","shape","round",1,"hide-xs-up","show-md-up",3,"routerLink"],[1,"bold"],["scrollEvents","true",1,"ion-padding"],["container",""],["slot","fixed",3,"ionRefresh"],[3,"pullingText","refreshingText"],["icon","alert-circle-outline",3,"text",4,"ngIf"],["icon","pin",3,"text",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end",1,"show-xs-up","hide-md-up"],[3,"routerLink"],["name","add"],["fixed",""],[4,"ngIf"],["size-xs","12","size-sm","6","size-md","6","size-lg","4",4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],["icon","alert-circle-outline",3,"text"],["icon","pin",3,"text"],["size-xs","12","size-sm","6","size-md","6","size-lg","4"],["count","1","appearance","circle",3,"theme"],[3,"place","showStatus","extraParams","showPromoteButton","customObservable","click","onPromoteButtonTouched"],[3,"ionInfinite"]],template:function(e,t){1&e&&(b.Vb(0,"ion-header",0),b.Vb(1,"ion-toolbar",1),b.Vb(2,"ion-buttons",2),b.Qb(3,"ion-back-button",3),b.Ub(),b.Vb(4,"ion-title"),b.Gc(5),b.gc(6,"translate"),b.Ub(),b.Vb(7,"ion-buttons",4),b.Vb(8,"ion-button",5),b.Vb(9,"span",6),b.Gc(10),b.gc(11,"translate"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(12,"ion-content",7,8),b.Vb(14,"ion-refresher",9),b.dc("ionRefresh",function(e){return t.onReload(e)}),b.Qb(15,"ion-refresher-content",10),b.gc(16,"translate"),b.gc(17,"translate"),b.Ub(),b.Ec(18,V,2,3,"empty-view",11),b.Ec(19,L,2,3,"empty-view",12),b.Vb(20,"ion-fab",13),b.Vb(21,"ion-fab-button",14),b.Qb(22,"ion-icon",15),b.Ub(),b.Ub(),b.Vb(23,"ion-grid",16),b.Ec(24,x,2,1,"ion-row",17),b.Vb(25,"ion-row"),b.Ec(26,S,2,5,"ion-col",18),b.Ub(),b.Ub(),b.Ec(27,T,2,0,"ion-infinite-scroll",19),b.Ub()),2&e&&(b.Db(5),b.Ic(" ",b.hc(6,12,"MY_PLACES")," "),b.Db(3),b.lc("routerLink",b.oc(20,C)),b.Db(2),b.Hc(b.hc(11,14,"ADD_PLACE")),b.Db(5),b.mc("pullingText",b.hc(16,16,"PULL_TO_REFRESH")),b.mc("refreshingText",b.hc(17,18,"REFRESHING")),b.Db(3),b.lc("ngIf",t.isErrorViewVisible),b.Db(1),b.lc("ngIf",t.isEmptyViewVisible),b.Db(2),b.lc("routerLink",b.oc(21,C)),b.Db(3),b.lc("ngIf",t.isLoadingViewVisible),b.Db(1),b.lc("@staggerIn",t.places.length),b.Db(1),b.lc("ngForOf",t.places),b.Db(1),b.lc("ngIf",t.isContentViewVisible))},directives:[s.w,s.db,s.l,s.h,s.i,s.bb,s.k,s.lb,n.i,s.r,s.K,s.L,w.m,s.s,s.t,s.x,s.v,s.O,w.l,v.a,s.q,y.a,P.a,s.y,s.z],pipes:[O.c],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light-tint)}"],data:{animation:[Object(l.l)("staggerIn",[Object(l.k)("* => *",[Object(l.f)(":enter",Object(l.j)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(l.f)(":enter",Object(l.h)("100ms",[Object(l.e)("300ms",Object(l.j)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),e})();var I=i("d2mR"),U=i("vY95");let k=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[I.a,U.a,n.j.forChild([{path:"",component:D}])]]}),e})()}}]);