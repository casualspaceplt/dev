!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function r(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var t,o=a(e);if(n){var i=a(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return s(this,t)}}function s(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{GvuD:function(n,i,s){"use strict";s.d(i,"a",function(){return H});var a=s("mrSG"),c=s("NV1z"),l=s("3Pt+"),u=s("fXoL"),b=s("dexi"),g=s("TEn/"),d=s("ofXK"),p=s("sYmb");function f(e,n){1&e&&u.Qb(0,"ion-spinner",5)}function m(e,n){1&e&&(u.Vb(0,"span"),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Hc(u.hc(2,1,"SUBMIT")))}var h,v=((h=function(n){o(s,n);var i=r(s);function s(n,t){var o;return e(this,s),(o=i.call(this,n)).userService=t,o.form=new l.c({email:new l.a("",[l.o.required,l.o.email])}),o}return t(s,[{key:"enableMenuSwipe",value:function(){return!1}},{key:"onDismiss",value:function(){this.modalCtrl.dismiss()}},{key:"onSubmit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.form.invalid){e.next=5;break}return e.next=3,this.getTrans("INVALID_FORM");case 3:return n=e.sent,e.abrupt("return",this.showToast(n));case 5:return e.prev=5,e.next=8,this.showLoadingView({showOverlay:!1});case 8:return t=this.form.value.email,e.next=11,this.userService.recoverPassword(t);case 11:this.showContentView(),this.translate.get("FORGOT_PASSWORD_SUCCESS").subscribe(function(e){return o.showAlert(e)}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),this.showContentView(),this.translate.get("ERROR_NETWORK").subscribe(function(e){return o.showToast(e)});case 18:case"end":return e.stop()}},e,this,[[5,15]])}))}}]),s}(c.a)).\u0275fac=function(e){return new(e||h)(u.Pb(u.t),u.Pb(b.a))},h.\u0275cmp=u.Jb({type:h,selectors:[["page-forgot-password"]],features:[u.Ab],decls:27,vars:13,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],["color","light"],["novalidate","",3,"formGroup","ngSubmit"],["myForm","ngForm"],["position","stacked","color","medium"],["lines","none","color","light",1,"ion-margin-vertical"],["type","email","formControlName","email",3,"keyup.center"],[1,"ion-justify-content-center"],["size-xs","6","size-md","4",1,"ion-text-center"],["type","submit","strong","","shape","round","expand","block","color","primary",3,"disabled"],["color","light",4,"ngIf"],[4,"ngIf"]],template:function(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-header",0),u.Vb(1,"ion-toolbar"),u.Vb(2,"ion-title"),u.Gc(3),u.gc(4,"translate"),u.Ub(),u.Vb(5,"ion-buttons",1),u.Vb(6,"ion-button",2),u.dc("click",function(){return n.onDismiss()}),u.Qb(7,"ion-icon",3),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(8,"ion-content",4),u.Vb(9,"ion-text",5),u.Vb(10,"p"),u.Gc(11),u.gc(12,"translate"),u.Ub(),u.Qb(13,"p"),u.Ub(),u.Vb(14,"form",6,7),u.dc("ngSubmit",function(){return n.onSubmit()}),u.Vb(16,"ion-label",8),u.Vb(17,"span"),u.Gc(18),u.gc(19,"translate"),u.Ub(),u.Ub(),u.Vb(20,"ion-item",9),u.Vb(21,"ion-input",10),u.dc("keyup.center",function(){return u.vc(t),u.uc(15).ngSubmit.emit()}),u.Ub(),u.Ub(),u.Vb(22,"ion-row",11),u.Vb(23,"ion-col",12),u.Vb(24,"ion-button",13),u.Ec(25,f,1,0,"ion-spinner",14),u.Ec(26,m,3,3,"span",15),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()}2&e&&(u.Db(3),u.Hc(u.hc(4,7,"FORGOT_PASSWORD")),u.Db(8),u.Hc(u.hc(12,9,"FORGOT_PASSWORD_HELP")),u.Db(3),u.lc("formGroup",n.form),u.Db(4),u.Hc(u.hc(19,11,"EMAIL")),u.Db(6),u.lc("disabled",n.isLoadingViewVisible),u.Db(1),u.lc("ngIf",n.isLoadingViewVisible),u.Db(1),u.lc("ngIf",!n.isLoadingViewVisible))},directives:[g.w,g.db,g.bb,g.l,g.k,g.x,g.r,g.Y,l.q,l.j,l.d,g.E,g.B,g.A,g.nb,l.i,l.b,g.O,g.q,d.m,g.U],pipes:[p.c],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:40px}ion-item[_ngcontent-%COMP%]{--border-radius:4px}"]}),h),w=s("pqyF");function k(e,n){1&e&&u.Qb(0,"ion-spinner",20)}function L(e,n){1&e&&(u.Vb(0,"span"),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Hc(u.hc(2,1,"SUBMIT")))}var V,y=((V=function(n){o(s,n);var i=r(s);function s(n,t,o){var r;return e(this,s),(r=i.call(this,n)).eventBusService=t,r.userService=o,r.form=new l.c({name:new l.a("",l.o.required),username:new l.a("",[l.o.required,l.o.minLength(3)]),email:new l.a("",l.o.pattern("[^ @]*@[^ @]*")),password:new l.a("",[l.o.required,l.o.minLength(6)]),confirmPassword:new l.a("",[l.o.required,l.o.minLength(6)])}),r}return t(s,[{key:"enableMenuSwipe",value:function(){return!1}},{key:"onDismiss",value:function(){return this.modalCtrl.dismiss()}},{key:"isFieldValid",value:function(e){return e.valid}},{key:"onSubmit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t,o,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.form.invalid){e.next=5;break}return e.next=3,this.getTrans("INVALID_FORM");case 3:return n=e.sent,e.abrupt("return",this.showToast(n));case 5:if((t=Object.assign({},this.form.value)).password===t.confirmPassword){e.next=11;break}return e.next=9,this.getTrans("PASSWORD_DOES_NOT_MATCH");case 9:return o=e.sent,e.abrupt("return",this.showToast(o));case 11:return t.name=t.name.trim(),t.username=t.username.trim(),t.email=t.email.trim(),t.password=t.password.trim(),""===t.email&&delete t.email,delete t.confirmPassword,e.prev=12,e.next=15,this.showLoadingView({showOverlay:!1});case 15:return e.next=17,this.userService.create(t);case 17:return i=e.sent,this.showContentView(),this.translate.get("LOGGED_IN_AS",{username:i.username}).subscribe(function(e){return r.showToast(e)}),e.next=22,this.onDismiss();case 22:this.eventBusService.emit(new w.a("user:login",i)),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),this.showContentView(),202===e.t0.code?this.translate.get("USERNAME_TAKEN").subscribe(function(e){return r.showToast(e)}):203===e.t0.code?this.translate.get("EMAIL_TAKEN").subscribe(function(e){return r.showToast(e)}):125===e.t0.code?this.translate.get("EMAIL_INVALID").subscribe(function(e){return r.showToast(e)}):this.translate.get("ERROR_NETWORK").subscribe(function(e){return r.showToast(e)});case 28:case"end":return e.stop()}},e,this,[[12,25]])}))}}]),s}(c.a)).\u0275fac=function(e){return new(e||V)(u.Pb(u.t),u.Pb(w.b),u.Pb(b.a))},V.\u0275cmp=u.Jb({type:V,selectors:[["page-sign-up"]],features:[u.Ab],decls:50,vars:35,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],["novalidate","",3,"formGroup","ngSubmit"],["signUpForm","ngForm","myForm","ngForm"],["position","stacked","color","medium"],["lines","none","color","light",1,"ion-margin-vertical"],["slot","start",3,"color","name"],["type","text","formControlName","name"],["slot","start","color","light",3,"color","name"],["type","text","formControlName","username"],["type","email","formControlName","email",3,"placeholder"],["type","password","formControlName","password",3,"placeholder"],["type","password","formControlName","confirmPassword",3,"keyup.enter"],[1,"ion-text-center"],["type","submit","strong","","shape","round","color","primary",3,"disabled"],["color","light",4,"ngIf"],[4,"ngIf"],["color","light"]],template:function(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-header",0),u.Vb(1,"ion-toolbar"),u.Vb(2,"ion-buttons",1),u.Vb(3,"ion-button",2),u.dc("click",function(){return n.onDismiss()}),u.Qb(4,"ion-icon",3),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(5,"ion-content",4),u.Vb(6,"form",5,6),u.dc("ngSubmit",function(){return n.onSubmit()}),u.Vb(9,"ion-label",7),u.Vb(10,"span"),u.Gc(11),u.gc(12,"translate"),u.Ub(),u.Ub(),u.Vb(13,"ion-item",8),u.Qb(14,"ion-icon",9),u.Qb(15,"ion-input",10),u.Ub(),u.Vb(16,"ion-label",7),u.Vb(17,"span"),u.Gc(18),u.gc(19,"translate"),u.Ub(),u.Ub(),u.Vb(20,"ion-item",8),u.Qb(21,"ion-icon",11),u.Qb(22,"ion-input",12),u.Ub(),u.Vb(23,"ion-label",7),u.Vb(24,"span"),u.Gc(25),u.gc(26,"translate"),u.Ub(),u.Ub(),u.Vb(27,"ion-item",8),u.Qb(28,"ion-icon",11),u.Qb(29,"ion-input",13),u.gc(30,"translate"),u.Ub(),u.Vb(31,"ion-label",7),u.Vb(32,"span"),u.Gc(33),u.gc(34,"translate"),u.Ub(),u.Ub(),u.Vb(35,"ion-item",8),u.Qb(36,"ion-icon",11),u.Qb(37,"ion-input",14),u.gc(38,"translate"),u.Ub(),u.Vb(39,"ion-label",7),u.Vb(40,"span"),u.Gc(41),u.gc(42,"translate"),u.Ub(),u.Ub(),u.Vb(43,"ion-item",8),u.Qb(44,"ion-icon",11),u.Vb(45,"ion-input",15),u.dc("keyup.enter",function(){return u.vc(t),u.uc(7).ngSubmit.emit()}),u.Ub(),u.Ub(),u.Vb(46,"div",16),u.Vb(47,"ion-button",17),u.Ec(48,k,1,0,"ion-spinner",18),u.Ec(49,L,3,3,"span",19),u.Ub(),u.Ub(),u.Ub(),u.Ub()}2&e&&(u.Db(6),u.lc("formGroup",n.form),u.Db(5),u.Hc(u.hc(12,21,"NAME")),u.Db(3),u.lc("color",n.isFieldValid(n.form.controls.name)?"primary":"medium")("name",n.isFieldValid(n.form.controls.name)?"checkmark-circle":"close-circle"),u.Db(4),u.Hc(u.hc(19,23,"USERNAME")),u.Db(3),u.lc("color",n.isFieldValid(n.form.controls.username)?"primary":"medium")("name",n.isFieldValid(n.form.controls.username)?"checkmark-circle":"close-circle"),u.Db(4),u.Hc(u.hc(26,25,"EMAIL")),u.Db(3),u.lc("color",n.isFieldValid(n.form.controls.email)?"primary":"medium")("name",n.isFieldValid(n.form.controls.email)?"checkmark-circle":"close-circle"),u.Db(1),u.lc("placeholder",u.hc(30,27,"EMAIL_VALIDATION_HELP")),u.Db(4),u.Hc(u.hc(34,29,"PASSWORD")),u.Db(3),u.lc("color",n.isFieldValid(n.form.controls.password)?"primary":"medium")("name",n.isFieldValid(n.form.controls.password)?"checkmark-circle":"close-circle"),u.Db(1),u.lc("placeholder",u.hc(38,31,"PASSWORD_VALIDATION_HELP")),u.Db(4),u.Hc(u.hc(42,33,"CONFIRM_PASSWORD")),u.Db(3),u.lc("color",n.isFieldValid(n.form.controls.confirmPassword)?"primary":"medium")("name",n.isFieldValid(n.form.controls.confirmPassword)?"checkmark-circle":"close-circle"),u.Db(3),u.lc("disabled",n.isLoadingViewVisible),u.Db(1),u.lc("ngIf",n.isLoadingViewVisible),u.Db(1),u.lc("ngIf",!n.isLoadingViewVisible))},directives:[g.w,g.db,g.l,g.k,g.x,g.r,l.q,l.j,l.d,g.E,g.B,g.A,g.nb,l.i,l.b,d.m,g.U],pipes:[p.c],styles:[""]}),V),D=s("ahC7"),U=s("3EM6"),S=s("AytR"),O=s("up+p"),I=s("JvtB"),E=s("xS7M"),x=s("GGTb");function A(e,n){1&e&&u.Qb(0,"ion-spinner",22)}function R(e,n){1&e&&(u.Vb(0,"span"),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Hc(u.hc(2,1,"LOGIN")))}function G(e,n){1&e&&(u.Vb(0,"div",23),u.Qb(1,"ion-spinner"),u.Ub())}function T(e,n){1&e&&u.Qb(0,"ion-spinner",22)}function F(e,n){1&e&&(u.Vb(0,"span"),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Hc(u.hc(2,1,"FACEBOOK")))}function _(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-col",24),u.Vb(1,"ion-button",25),u.dc("click",function(){return u.vc(t),u.fc().onFacebookButtonTouched()}),u.Qb(2,"ion-icon",26),u.Ec(3,T,1,0,"ion-spinner",15),u.Ec(4,F,3,3,"span",16),u.Ub(),u.Ub()}if(2&e){var o=u.fc();u.Db(1),u.lc("disabled",o.isLoadingAppleLogin||o.isLoadingFacebookLogin||o.isLoadingUsernameLogin||o.isLoadingGoogleLogin),u.Db(2),u.lc("ngIf",o.isLoadingFacebookLogin),u.Db(1),u.lc("ngIf",!o.isLoadingFacebookLogin)}}function N(e,n){1&e&&u.Qb(0,"ion-spinner",22)}function P(e,n){1&e&&(u.Vb(0,"span"),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Hc(u.hc(2,1,"GOOGLE_LOGIN")))}function C(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-col",24),u.Vb(1,"ion-button",27),u.dc("click",function(){return u.vc(t),u.fc().onGoogleButtonTouched()}),u.Qb(2,"ion-icon",28),u.Ec(3,N,1,0,"ion-spinner",15),u.Ec(4,P,3,3,"span",16),u.Ub(),u.Ub()}if(2&e){var o=u.fc();u.Db(1),u.lc("disabled",o.isLoadingAppleLogin||o.isLoadingFacebookLogin||o.isLoadingUsernameLogin||o.isLoadingGoogleLogin),u.Db(2),u.lc("ngIf",o.isLoadingGoogleLogin),u.Db(1),u.lc("ngIf",!o.isLoadingGoogleLogin)}}function M(e,n){1&e&&u.Qb(0,"ion-spinner",22)}function j(e,n){1&e&&(u.Vb(0,"span",33),u.Gc(1),u.gc(2,"translate"),u.Ub()),2&e&&(u.Db(1),u.Ic(" ",u.hc(2,1,"APPLE_LOGIN")," "))}function Q(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-button",30),u.dc("click",function(){return u.vc(t),u.fc(2).onAppleButtonTouched()}),u.Qb(1,"ion-icon",31),u.Ec(2,M,1,0,"ion-spinner",15),u.Ec(3,j,3,3,"span",32),u.Ub()}if(2&e){var o=u.fc(2);u.lc("disabled",o.isLoadingAppleLogin||o.isLoadingGoogleLogin||o.isLoadingUsernameLogin||o.isLoadingFacebookLogin),u.Db(2),u.lc("ngIf",o.isLoadingAppleLogin),u.Db(1),u.lc("ngIf",!o.isLoadingAppleLogin)}}function W(e,n){if(1&e&&(u.Vb(0,"ion-col",24),u.Ec(1,Q,4,3,"ion-button",29),u.Ub()),2&e){var t=u.fc();u.Db(1),u.lc("ngIf",t.isAppleSignInAvailable)}}var B,H=((B=function(n){o(s,n);var i=r(s);function s(n,t,o,r,a,c,l,u,b){var g;return e(this,s),(g=i.call(this,n)).eventBusService=t,g.authService=o,g.googlePlus=r,g.userService=a,g.signInWithApple=c,g.appConfigService=l,g.device=u,g.fb=b,g.isLoadingUsernameLogin=!1,g.isLoadingFacebookLogin=!1,g.isLoadingGoogleLogin=!1,g.isLoadingAppleLogin=!1,g.isAppleSignInAvailable=!1,g}return t(s,[{key:"ngOnInit",value:function(){var e=this,n=parseInt(this.device.version);this.isAppleSignInAvailable=n>=13&&this.isCordova&&this.isApple,this.form=new l.c({username:new l.a("",l.o.required),password:new l.a("",l.o.required)}),this.eventBusService.on("user:login",function(){e.onDismiss()}),this.socialLoginSubscription=this.authService.authState.subscribe(function(n){n&&"GOOGLE"===n.provider?e.loggedIntoGoogle(n):n&&"FACEBOOK"===n.provider&&e.loggedIntoFacebook({userID:n.id,accessToken:n.authToken})}),this.loadAppConfig()}},{key:"ngOnDestroy",value:function(){this.socialLoginSubscription.unsubscribe()}},{key:"enableMenuSwipe",value:function(){return!1}},{key:"onDismiss",value:function(){return this.modalCtrl.dismiss()}},{key:"loadAppConfig",value:function(){var e,n,t;return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,this.isLoadingConfig=!0,o.next=4,this.appConfigService.load();case 4:i=o.sent,this.isFacebookLoginEnabled=null===(e=null==i?void 0:i.auth)||void 0===e?void 0:e.isFacebookLoginEnabled,this.isGoogleLoginEnabled=null===(n=null==i?void 0:i.auth)||void 0===n?void 0:n.isGoogleLoginEnabled,this.isAppleLoginEnabled=null===(t=null==i?void 0:i.auth)||void 0===t?void 0:t.isAppleLoginEnabled,this.isLoadingConfig=!1,o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),this.isLoadingConfig=!1;case 11:case"end":return o.stop()}},o,this,[[0,8]])}))}},{key:"onAppleButtonTouched",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t,o,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isLoadingAppleLogin=!0,e.next=4,this.signInWithApple.signin({requestedScopes:[U.a.ASAuthorizationScopeFullName,U.a.ASAuthorizationScopeEmail]});case 4:return n=e.sent,t={id:n.user,token:n.identityToken},o={},n.fullName.givenName&&n.fullName.familyName&&(o.name=n.fullName.givenName+" "+n.fullName.familyName),e.next=10,this.userService.loginWith("apple",{authData:t},o);case 10:i=e.sent,this.isLoadingAppleLogin=!1,this.translate.get("LOGGED_IN_AS",{name:i.name}).subscribe(function(e){return r.showToast(e)}),this.onDismiss(),window.dispatchEvent(new CustomEvent("user:login",{detail:i})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.isLoadingAppleLogin=!1;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))}},{key:"onFacebookButtonTouched",value:function(){var e=this;this.isCordova?this.fb.login(["public_profile"]).then(function(n){return e.loggedIntoFacebook(n.authResponse)}).catch(function(e){return console.log("Error logging into Facebook",e)}):this.authService.signIn(D.a.PROVIDER_ID)}},{key:"loggedIntoFacebook",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t={id:e.userID,access_token:e.accessToken},n.prev=1,n.next=4,this.showLoadingView({showOverlay:!1});case 4:return this.isLoadingFacebookLogin=!0,n.next=7,this.userService.loginWith("facebook",{authData:t});case 7:o=n.sent,this.loggedViaFacebook(o),this.isLoadingFacebookLogin=!1,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),this.loginViaFacebookFailure(n.t0),this.isLoadingFacebookLogin=!1;case 14:case"end":return n.stop()}},n,this,[[1,11]])}))}},{key:"loginViaFacebookFailure",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("Error logging into Facebook",n),this.translate.get("ERROR_UNKNOWN").subscribe(function(n){return e.showToast(n)}),this.showContentView()}},{key:"loggedViaFacebook",value:function(e){var n=this;this.showContentView(),this.translate.get("LOGGED_IN_AS",{username:e.name}).subscribe(function(e){return n.showToast(e)}),this.eventBusService.emit(new w.a("user:login",e)),this.onDismiss()}},{key:"onGoogleButtonTouched",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCordova){e.next=13;break}return e.prev=1,e.next=4,this.googlePlus.login({webClientId:S.a.googleClientId,offline:!0});case 4:n=e.sent,this.loggedIntoGoogle({id:n.userId,authToken:n.accessToken,idToken:n.idToken}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:e.next=14;break;case 13:this.authService.signIn(D.b.PROVIDER_ID);case 14:case"end":return e.stop()}},e,this,[[1,8]])}))}},{key:"loggedIntoGoogle",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t,o,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Logged into Google",e),n.prev=1,this.isLoadingGoogleLogin=!0,t={id:e.id,access_token:e.authToken,id_token:e.idToken},n.next=6,this.userService.loginWith("google",{authData:t});case 6:o=n.sent,this.isLoadingGoogleLogin=!1,this.translate.get("LOGGED_IN_AS",{username:o.name}).subscribe(function(e){return i.showToast(e)}),this.eventBusService.emit(new w.a("user:login",o)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("Error logging into Google",n.t0),this.isLoadingGoogleLogin=!1,this.translate.get("ERROR_NETWORK").subscribe(function(e){return i.showToast(e)}),this.showContentView();case 13:case"end":return n.stop()}},n,this,[[1,10]])}))}},{key:"onSubmit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t,o,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.form.invalid){e.next=6;break}return e.next=4,this.getTrans("INVALID_FORM");case 4:return n=e.sent,e.abrupt("return",this.showToast(n));case 6:return e.next=8,this.showLoadingView({showOverlay:!1});case 8:return this.isLoadingUsernameLogin=!0,(t=Object.assign({},this.form.value)).username=t.username.trim(),t.password=t.password.trim(),e.next=13,this.userService.signIn(t);case 13:o=e.sent,this.showContentView(),this.isLoadingUsernameLogin=!1,this.translate.get("LOGGED_IN_AS",{username:o.name}).subscribe(function(e){return i.showToast(e)}),this.eventBusService.emit(new w.a("user:login",o)),this.onDismiss(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),101===e.t0.code?this.translate.get("INVALID_CREDENTIALS").subscribe(function(e){return i.showToast(e)}):this.translate.get("ERROR_NETWORK").subscribe(function(e){return i.showToast(e)}),this.showContentView(),this.isLoadingUsernameLogin=!1;case 20:case"end":return e.stop()}},e,this,[[0,17]])}))}},{key:"onPresentForgotPasswordModal",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:v});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"onPresentSignUpModal",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:y});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}}]),s}(c.a)).\u0275fac=function(e){return new(e||B)(u.Pb(u.t),u.Pb(w.b),u.Pb(D.c),u.Pb(O.a),u.Pb(b.a),u.Pb(U.b),u.Pb(I.a),u.Pb(E.a),u.Pb(x.a))},B.\u0275cmp=u.Jb({type:B,selectors:[["sign-in-page"]],features:[u.Ab],decls:40,vars:23,consts:[[1,"ion-no-border"],["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],["novalidate","",3,"formGroup","ngSubmit"],["loginForm","ngForm"],["position","stacked","color","medium"],["lines","none","color","light",1,"ion-margin-vertical"],["type","text","formControlName","username"],["type","password","formControlName","password",3,"keyup.enter"],[1,"ion-justify-content-center"],["size-xs","6","size-md","6"],["strong","","type","submit","color","primary","expand","block","shape","round",1,"ion-margin-vertical",3,"disabled"],["color","light",4,"ngIf"],[4,"ngIf"],["class","ion-text-center ion-margin-vertical",4,"ngIf"],["size-xs","12","size-md","6",4,"ngIf"],[1,"ion-margin-vertical"],["strong","","type","button","expand","block","fill","clear","color","primary",3,"click"],["strong","","type","button","expand","block","fill","clear","color","dark",1,"ion-text-lowercase",3,"click"],["color","light"],[1,"ion-text-center","ion-margin-vertical"],["size-xs","12","size-md","6"],["strong","","type","button","color","fb","expand","block","shape","round",3,"disabled","click"],["slot","start","name","logo-facebook","color","light"],["strong","","type","button","color","google","expand","block","shape","round",3,"disabled","click"],["slot","start","name","logo-google","color","light"],["strong","","type","button","color","dark","expand","block","shape","round",3,"disabled","click",4,"ngIf"],["strong","","type","button","color","dark","expand","block","shape","round",3,"disabled","click"],["slot","start","name","logo-apple","color","light"],["class","ion-text-capitalize",4,"ngIf"],[1,"ion-text-capitalize"]],template:function(e,n){if(1&e){var t=u.Wb();u.Vb(0,"ion-header",0),u.Vb(1,"ion-toolbar",1),u.Vb(2,"ion-title"),u.Gc(3),u.gc(4,"translate"),u.Ub(),u.Vb(5,"ion-buttons",2),u.Vb(6,"ion-button",3),u.dc("click",function(){return n.onDismiss()}),u.Qb(7,"ion-icon",4),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(8,"ion-content",5),u.Vb(9,"form",6,7),u.dc("ngSubmit",function(){return n.onSubmit()}),u.Vb(11,"ion-label",8),u.Vb(12,"span"),u.Gc(13),u.gc(14,"translate"),u.Ub(),u.Ub(),u.Vb(15,"ion-item",9),u.Qb(16,"ion-input",10),u.Ub(),u.Vb(17,"ion-label",8),u.Vb(18,"span"),u.Gc(19),u.gc(20,"translate"),u.Ub(),u.Ub(),u.Vb(21,"ion-item",9),u.Vb(22,"ion-input",11),u.dc("keyup.enter",function(){return u.vc(t),u.uc(10).ngSubmit.emit()}),u.Ub(),u.Ub(),u.Vb(23,"ion-row",12),u.Vb(24,"ion-col",13),u.Vb(25,"ion-button",14),u.Ec(26,A,1,0,"ion-spinner",15),u.Ec(27,R,3,3,"span",16),u.Ub(),u.Ub(),u.Ub(),u.Ec(28,G,2,0,"div",17),u.Vb(29,"ion-row",12),u.Ec(30,_,5,3,"ion-col",18),u.Ec(31,C,5,3,"ion-col",18),u.Ec(32,W,2,1,"ion-col",18),u.Ub(),u.Vb(33,"div",19),u.Vb(34,"ion-button",20),u.dc("click",function(){return n.onPresentSignUpModal()}),u.Gc(35),u.gc(36,"translate"),u.Ub(),u.Vb(37,"ion-button",21),u.dc("click",function(){return n.onPresentForgotPasswordModal()}),u.Gc(38),u.gc(39,"translate"),u.Ub(),u.Ub(),u.Ub(),u.Ub()}2&e&&(u.Db(3),u.Hc(u.hc(4,13,"LOGIN")),u.Db(6),u.lc("formGroup",n.form),u.Db(4),u.Hc(u.hc(14,15,"USERNAME")),u.Db(6),u.Hc(u.hc(20,17,"PASSWORD")),u.Db(6),u.lc("disabled",n.isLoadingFacebookLogin||n.isLoadingUsernameLogin),u.Db(1),u.lc("ngIf",n.isLoadingUsernameLogin),u.Db(1),u.lc("ngIf",!n.isLoadingUsernameLogin),u.Db(1),u.lc("ngIf",n.isLoadingConfig),u.Db(2),u.lc("ngIf",n.isFacebookLoginEnabled),u.Db(1),u.lc("ngIf",n.isGoogleLoginEnabled),u.Db(1),u.lc("ngIf",n.isAppleLoginEnabled),u.Db(3),u.Ic(" ",u.hc(36,19,"NO_ACCOUNT_YET_CREATE_ONE")," "),u.Db(3),u.Ic(" ",u.hc(39,21,"FORGOT_PASSWORD")," "))},directives:[g.w,g.db,g.bb,g.l,g.k,g.x,g.r,l.q,l.j,l.d,g.E,g.B,g.A,g.nb,l.i,l.b,g.O,g.q,d.m,g.U],pipes:[p.c],styles:[""]}),B)},b8Qw:function(n,t,o){"use strict";o.d(t,"a",function(){return g});var i,r,s,a=o("d2mR"),c=o("3Pt+"),l=o("fXoL"),u=((s=function n(){e(this,n)}).\u0275mod=l.Nb({type:s}),s.\u0275inj=l.Mb({factory:function(e){return new(e||s)},imports:[[a.a,c.e,c.m]]}),s),b=((r=function n(){e(this,n)}).\u0275mod=l.Nb({type:r}),r.\u0275inj=l.Mb({factory:function(e){return new(e||r)},imports:[[a.a,c.e,c.m]]}),r),g=((i=function n(){e(this,n)}).\u0275mod=l.Nb({type:i}),i.\u0275inj=l.Mb({factory:function(e){return new(e||i)},imports:[[a.a,c.e,c.m,u,b]]}),i)}}])}();