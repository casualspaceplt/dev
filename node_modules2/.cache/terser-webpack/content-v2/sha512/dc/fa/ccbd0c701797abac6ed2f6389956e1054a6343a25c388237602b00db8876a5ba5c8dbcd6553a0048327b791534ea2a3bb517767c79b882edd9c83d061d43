{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{\"862v\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MapPageModule\",function(){return map_module_MapPageModule});var router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),map_style=__webpack_require__(\"KR1p\"),base_page=__webpack_require__(\"NV1z\"),core=__webpack_require__(\"fXoL\"),ionic_angular=__webpack_require__(\"TEn/\"),common=__webpack_require__(\"ofXK\"),ngx_bar_rating=__webpack_require__(\"Qsw1\");function InfoWindowComponent_ion_thumbnail_1_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-thumbnail\",10),core.Qb(1,\"img\",11),core.Ub()),2&rf){const ctx_r0=core.fc();core.Db(1),core.lc(\"src\",null==ctx_r0.place.imageThumb?null:ctx_r0.place.imageThumb.url(),core.zc)(\"alt\",ctx_r0.place.title)}}function InfoWindowComponent_bar_rating_9_Template(rf,ctx){if(1&rf&&core.Qb(0,\"bar-rating\",12),2&rf){const ctx_r1=core.fc();core.lc(\"rate\",ctx_r1.place.rating)(\"readOnly\",!0)(\"max\",5)(\"theme\",\"stars\")}}let info_window_InfoWindowComponent=(()=>{class InfoWindowComponent{constructor(){this.onButtonTouched=new core.o}goToPlace(){this.onButtonTouched.emit(this.place)}}return InfoWindowComponent.ɵfac=function(t){return new(t||InfoWindowComponent)},InfoWindowComponent.ɵcmp=core.Jb({type:InfoWindowComponent,selectors:[[\"info-window\"]],inputs:{place:\"place\",location:\"location\",unit:\"unit\"},outputs:{onButtonTouched:\"onButtonTouched\"},decls:14,vars:5,consts:[[\"button\",\"\",\"lines\",\"none\",3,\"click\"],[\"slot\",\"start\",4,\"ngIf\"],[1,\"bold\",\"no-margin\",\"ellipsis\"],[\"color\",\"dark\"],[\"color\",\"medium\"],[1,\"no-margin\"],[\"class\",\"rating\",3,\"rate\",\"readOnly\",\"max\",\"theme\",4,\"ngIf\"],[\"slot\",\"end\"],[\"color\",\"primary\"],[1,\"bold\"],[\"slot\",\"start\"],[\"src-fallback\",\"./assets/img/placeholder.png\",3,\"src\",\"alt\"],[1,\"rating\",3,\"rate\",\"readOnly\",\"max\",\"theme\"]],template:function(rf,ctx){1&rf&&(core.Vb(0,\"ion-item\",0),core.dc(\"click\",function(){return ctx.goToPlace()}),core.Ec(1,InfoWindowComponent_ion_thumbnail_1_Template,2,2,\"ion-thumbnail\",1),core.Vb(2,\"ion-label\"),core.Vb(3,\"h2\",2),core.Vb(4,\"ion-text\",3),core.Gc(5),core.Ub(),core.Ub(),core.Vb(6,\"ion-text\",4),core.Vb(7,\"p\",5),core.Gc(8),core.Ub(),core.Ub(),core.Ec(9,InfoWindowComponent_bar_rating_9_Template,1,4,\"bar-rating\",6),core.Ub(),core.Vb(10,\"div\",7),core.Vb(11,\"ion-text\",8),core.Vb(12,\"span\",9),core.Gc(13),core.Ub(),core.Ub(),core.Ub(),core.Ub()),2&rf&&(core.Db(1),core.lc(\"ngIf\",ctx.place.imageThumb),core.Db(4),core.Ic(\" \",ctx.place.title,\" \"),core.Db(3),core.Ic(\" \",ctx.place.categories.join(\" • \"),\" \"),core.Db(1),core.lc(\"ngIf\",ctx.place.ratingAvg),core.Db(4),core.Ic(\" \",ctx.place.distance(ctx.location,ctx.unit),\" \"))},directives:[ionic_angular.B,common.m,ionic_angular.E,ionic_angular.Y,ionic_angular.ab,ngx_bar_rating.a],styles:[\"ion-thumbnail[_ngcontent-%COMP%]{min-width:60px!important;min-height:60px!important}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;width:60px!important;height:60px!important}\"]}),InfoWindowComponent})();var environment=__webpack_require__(\"AytR\"),tslib_tslib_es6=__webpack_require__(\"loPg\"),hammerjs_hammer=__webpack_require__(\"yLV6\");const _c0=[\"*\"];var DrawerState=function(DrawerState){return DrawerState[DrawerState.Bottom=0]=\"Bottom\",DrawerState[DrawerState.Docked=1]=\"Docked\",DrawerState[DrawerState.Top=2]=\"Top\",DrawerState}({});let ion_bottom_drawer_IonBottomDrawerComponent=(()=>{let IonBottomDrawerComponent=class{constructor(_element,_renderer,_domCtrl,_platform){this._element=_element,this._renderer=_renderer,this._domCtrl=_domCtrl,this._platform=_platform,this.dockedHeight=50,this.shouldBounce=!0,this.disableDrag=!1,this.distanceTop=0,this.transition=\"0.25s ease-in-out\",this.state=DrawerState.Bottom,this.minimumHeight=0,this.stateChange=new core.o,this._BOUNCE_DELTA=30}ngAfterViewInit(){this._renderer.setStyle(this._element.nativeElement.querySelector(\".ion-bottom-drawer-scrollable-content :first-child\"),\"touch-action\",\"none\"),this._setDrawerState(this.state);const hammer=new hammerjs_hammer(this._element.nativeElement);hammer.get(\"pan\").set({enable:!0,direction:hammerjs_hammer.DIRECTION_VERTICAL}),hammer.on(\"pan panstart panend\",ev=>{if(!this.disableDrag)switch(ev.type){case\"panstart\":this._handlePanStart();break;case\"panend\":this._handlePanEnd(ev);break;default:this._handlePan(ev)}})}ngOnChanges(changes){changes.state&&this._setDrawerState(changes.state.currentValue)}_setDrawerState(state){switch(this._renderer.setStyle(this._element.nativeElement,\"transition\",this.transition),state){case DrawerState.Bottom:this._setTranslateY(\"calc(100vh - \"+this.minimumHeight+\"px)\");break;case DrawerState.Docked:this._setTranslateY(this._platform.height()-this.dockedHeight+\"px\");break;default:this._setTranslateY(this.distanceTop+\"px\")}}_handlePanStart(){this._startPositionTop=this._element.nativeElement.getBoundingClientRect().top}_handlePanEnd(ev){if(this.shouldBounce&&ev.isFinal)switch(this._renderer.setStyle(this._element.nativeElement,\"transition\",this.transition),this.state){case DrawerState.Docked:this._handleDockedPanEnd(ev);break;case DrawerState.Top:this._handleTopPanEnd(ev);break;default:this._handleBottomPanEnd(ev)}this.stateChange.emit(this.state)}_handleTopPanEnd(ev){ev.deltaY>this._BOUNCE_DELTA?this.state=DrawerState.Docked:this._setTranslateY(this.distanceTop+\"px\")}_handleDockedPanEnd(ev){const absDeltaY=Math.abs(ev.deltaY);absDeltaY>this._BOUNCE_DELTA&&ev.deltaY<0?this.state=DrawerState.Top:absDeltaY>this._BOUNCE_DELTA&&ev.deltaY>0?this.state=DrawerState.Bottom:this._setTranslateY(this._platform.height()-this.dockedHeight+\"px\")}_handleBottomPanEnd(ev){-ev.deltaY>this._BOUNCE_DELTA?this.state=DrawerState.Docked:this._setTranslateY(\"calc(100vh - \"+this.minimumHeight+\"px)\")}_handlePan(ev){const pointerY=ev.center.y;if(this._renderer.setStyle(this._element.nativeElement,\"transition\",\"none\"),pointerY>0&&pointerY<this._platform.height()&&(\"panup\"===ev.additionalEvent||\"pandown\"===ev.additionalEvent)){const newTop=this._startPositionTop+ev.deltaY;newTop>=this.distanceTop?this._setTranslateY(newTop+\"px\"):newTop<this.distanceTop&&this._setTranslateY(this.distanceTop+\"px\"),newTop>this._platform.height()-this.minimumHeight&&this._setTranslateY(this._platform.height()-this.minimumHeight+\"px\")}}_setTranslateY(value){this._domCtrl.write(()=>{this._renderer.setStyle(this._element.nativeElement,\"transform\",\"translateY(\"+value+\")\")})}};return IonBottomDrawerComponent.ɵfac=function(t){return new(t||IonBottomDrawerComponent)(core.Pb(core.m),core.Pb(core.G),core.Pb(ionic_angular.e),core.Pb(ionic_angular.jb))},IonBottomDrawerComponent.ɵcmp=core.Jb({type:IonBottomDrawerComponent,selectors:[[\"ion-bottom-drawer\"]],inputs:{dockedHeight:\"dockedHeight\",shouldBounce:\"shouldBounce\",disableDrag:\"disableDrag\",distanceTop:\"distanceTop\",transition:\"transition\",state:\"state\",minimumHeight:\"minimumHeight\"},outputs:{stateChange:\"stateChange\"},features:[core.Bb],ngContentSelectors:_c0,decls:2,vars:0,consts:[[\"no-bounce\",\"\",1,\"ion-bottom-drawer-scrollable-content\"]],template:function(rf,ctx){1&rf&&(core.kc(),core.Vb(0,\"ion-content\",0),core.jc(1),core.Ub())},directives:[ionic_angular.r],styles:[\"[_nghost-%COMP%]{width:100%;height:100%;position:absolute;left:0;z-index:11!important;background-color:#fff;-webkit-transform:translateY(100vh);transform:translateY(100vh)}\"]}),IonBottomDrawerComponent=Object(tslib_tslib_es6.a)([Object(tslib_tslib_es6.b)(\"design:paramtypes\",[core.m,core.G,ionic_angular.e,ionic_angular.jb])],IonBottomDrawerComponent),IonBottomDrawerComponent})(),ion_bottom_drawer_IonBottomDrawerModule=(()=>{let IonBottomDrawerModule=class{};return IonBottomDrawerModule.ɵmod=core.Nb({type:IonBottomDrawerModule}),IonBottomDrawerModule.ɵinj=core.Mb({factory:function(t){return new(t||IonBottomDrawerModule)},imports:[[ionic_angular.eb]]}),IonBottomDrawerModule})();var animations=__webpack_require__(\"R0Ic\"),utils=__webpack_require__(\"HC5s\"),platform_browser=__webpack_require__(\"jhN1\"),local_storage=__webpack_require__(\"eAEk\"),place_service=__webpack_require__(\"qOnq\"),geolocation_service=__webpack_require__(\"H+Hf\"),empty_view=__webpack_require__(\"4ro/\"),ngx_img_fallback=__webpack_require__(\"oZYh\"),ngx_translate_core=__webpack_require__(\"sYmb\");const map_c0=[\"map\"];function MapPage_ion_grid_8_ion_item_2_Template(rf,ctx){if(1&rf){const _r10=core.Wb();core.Vb(0,\"ion-item\",25),core.dc(\"click\",function(){core.vc(_r10);const suggestion_r8=ctx.$implicit;return core.fc(2).onSuggestionTouched(suggestion_r8)}),core.Vb(1,\"ion-label\"),core.Vb(2,\"ion-text\",26),core.Vb(3,\"span\",27),core.Gc(4),core.Ub(),core.Ub(),core.Ub(),core.Ub()}if(2&rf){const suggestion_r8=ctx.$implicit;core.Db(4),core.Ic(\" \",suggestion_r8.description,\" \")}}function MapPage_ion_grid_8_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-grid\",22),core.Vb(1,\"ion-list\",23),core.Ec(2,MapPage_ion_grid_8_ion_item_2_Template,5,1,\"ion-item\",24),core.Ub(),core.Ub()),2&rf){const ctx_r0=core.fc();core.Db(1),core.lc(\"@staggerIn\",ctx_r0.suggestions.length),core.Db(1),core.lc(\"ngForOf\",ctx_r0.suggestions)}}function MapPage_empty_view_12_Template(rf,ctx){1&rf&&(core.Qb(0,\"empty-view\",28),core.gc(1,\"translate\")),2&rf&&core.lc(\"text\",core.hc(1,1,\"ERROR_NETWORK\"))}function MapPage_empty_view_13_Template(rf,ctx){1&rf&&(core.Qb(0,\"empty-view\",29),core.gc(1,\"translate\")),2&rf&&core.lc(\"text\",core.hc(1,1,\"EMPTY_PLACES\"))}function MapPage_div_14_Template(rf,ctx){1&rf&&(core.Vb(0,\"div\",30),core.Qb(1,\"ion-spinner\"),core.Ub())}function MapPage_ion_list_15_ion_item_1_ion_thumbnail_1_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-thumbnail\",2),core.Qb(1,\"img\",42),core.Ub()),2&rf){const place_r12=core.fc().$implicit;core.Db(1),core.lc(\"alt\",place_r12.title)(\"src\",null==place_r12.imageThumb?null:place_r12.imageThumb.url(),core.zc)}}function MapPage_ion_list_15_ion_item_1_bar_rating_9_Template(rf,ctx){if(1&rf&&core.Qb(0,\"bar-rating\",43),2&rf){const place_r12=core.fc().$implicit;core.lc(\"rate\",place_r12.ratingAvg)(\"readOnly\",!0)(\"max\",5)(\"theme\",\"stars\")}}const _c1=function(a0){return[a0]};function MapPage_ion_list_15_ion_item_1_Template(rf,ctx){if(1&rf){const _r18=core.Wb();core.Vb(0,\"ion-item\",33),core.dc(\"mouseenter\",function(){core.vc(_r18);const place_r12=ctx.$implicit;return core.fc(2).onPlaceHover(place_r12)}),core.Ec(1,MapPage_ion_list_15_ion_item_1_ion_thumbnail_1_Template,2,2,\"ion-thumbnail\",34),core.Vb(2,\"ion-label\"),core.Vb(3,\"h2\",35),core.Vb(4,\"ion-text\",26),core.Gc(5),core.Ub(),core.Ub(),core.Vb(6,\"ion-text\",36),core.Vb(7,\"p\",37),core.Gc(8),core.Ub(),core.Ub(),core.Ec(9,MapPage_ion_list_15_ion_item_1_bar_rating_9_Template,1,4,\"bar-rating\",38),core.Ub(),core.Vb(10,\"div\",39),core.Vb(11,\"ion-text\",40),core.Vb(12,\"span\",41),core.Gc(13),core.Ub(),core.Ub(),core.Ub(),core.Ub()}if(2&rf){const place_r12=ctx.$implicit,ctx_r11=core.fc(2);core.lc(\"routerLink\",core.pc(6,_c1,\"../\"+place_r12.id+\"/\"+place_r12.slug)),core.Db(1),core.lc(\"ngIf\",place_r12.imageThumb),core.Db(4),core.Ic(\" \",place_r12.title,\" \"),core.Db(3),core.Ic(\" \",place_r12.categories.join(\" • \"),\" \"),core.Db(1),core.lc(\"ngIf\",place_r12.ratingAvg),core.Db(4),core.Ic(\" \",place_r12.distance(ctx_r11.location,ctx_r11.preference.unit),\" \")}}function MapPage_ion_list_15_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-list\",31),core.Ec(1,MapPage_ion_list_15_ion_item_1_Template,14,8,\"ion-item\",32),core.Ub()),2&rf){const ctx_r4=core.fc();core.lc(\"@staggerIn\",ctx_r4.places.length),core.Db(1),core.lc(\"ngForOf\",ctx_r4.places)}}function MapPage_ion_item_26_ion_thumbnail_1_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-thumbnail\",2),core.Qb(1,\"img\",42),core.Ub()),2&rf){const place_r19=core.fc().$implicit;core.Db(1),core.lc(\"alt\",place_r19.title)(\"src\",null==place_r19.imageThumb?null:place_r19.imageThumb.url(),core.zc)}}function MapPage_ion_item_26_bar_rating_9_Template(rf,ctx){if(1&rf&&core.Qb(0,\"bar-rating\",43),2&rf){const place_r19=core.fc().$implicit;core.lc(\"rate\",place_r19.ratingAvg)(\"readOnly\",!0)(\"max\",5)(\"theme\",\"stars\")}}function MapPage_ion_item_26_Template(rf,ctx){if(1&rf){const _r25=core.Wb();core.Vb(0,\"ion-item\",44),core.dc(\"click\",function($event){core.vc(_r25);const place_r19=ctx.$implicit;return core.fc().showInfoWindow(place_r19,$event)}),core.Ec(1,MapPage_ion_item_26_ion_thumbnail_1_Template,2,2,\"ion-thumbnail\",34),core.Vb(2,\"ion-label\"),core.Vb(3,\"h2\",35),core.Vb(4,\"ion-text\",26),core.Gc(5),core.Ub(),core.Ub(),core.Vb(6,\"ion-text\",36),core.Vb(7,\"p\",37),core.Gc(8),core.Ub(),core.Ub(),core.Ec(9,MapPage_ion_item_26_bar_rating_9_Template,1,4,\"bar-rating\",38),core.Ub(),core.Vb(10,\"div\",39),core.Vb(11,\"ion-text\",40),core.Vb(12,\"span\",41),core.Gc(13),core.Ub(),core.Ub(),core.Ub(),core.Ub()}if(2&rf){const place_r19=ctx.$implicit,ctx_r6=core.fc();core.Db(1),core.lc(\"ngIf\",place_r19.imageThumb),core.Db(4),core.Ic(\" \",place_r19.title,\" \"),core.Db(3),core.Ic(\" \",place_r19.categories.join(\" • \"),\" \"),core.Db(1),core.lc(\"ngIf\",place_r19.ratingAvg),core.Db(4),core.Ic(\" \",place_r19.distance(ctx_r6.location,ctx_r6.preference.unit),\" \")}}let map_MapPage=(()=>{class MapPage extends base_page.a{constructor(injector,sanitizer,zone,resolver,storage,placeService,locationService,geolocationService){super(injector),this.injector=injector,this.sanitizer=sanitizer,this.zone=zone,this.resolver=resolver,this.storage=storage,this.placeService=placeService,this.locationService=locationService,this.geolocationService=geolocationService,this.params={page:0},this.suggestions=[],this.places=[],this.bottomDrawerConfig={state:DrawerState.Bottom,shouldBounce:!0,disableDrag:!0,minimumHeight:0,distanceTop:130,dockedHeight:220,transition:\"0.25s ease-in-out\"},this.markers=[],this.mapInitialized=!1,this.zoomMyLocation=!0}enableMenuSwipe(){return!1}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){this.setupQueryParams()})}setupQueryParams(){const featured=this.getQueryParams().featured;featured&&(this.params.featured=featured);const cat=this.getQueryParams().cat;cat&&(this.params.cat=cat);const ratingMin=this.getQueryParams().ratingMin;ratingMin&&(this.params.ratingMin=Number(ratingMin));const ratingMax=this.getQueryParams().ratingMax;ratingMax&&(this.params.ratingMax=Number(ratingMax));const maxDistance=this.getQueryParams().maxDistance;maxDistance&&(this.params.maxDistance=Number(maxDistance));let lat=this.getQueryParams().latitude,lng=this.getQueryParams().longitude;lat&&lng&&(lat=Number(lat),lng=Number(lng),this.params.latitude=lat,this.params.longitude=lng),this.getQueryParams().address&&(this.params.address=this.getQueryParams().address)}updateSearchBarValue(val){return Object(tslib_es6.a)(this,void 0,void 0,function*(){yield utils.a.sleep(800),this.searchBar.value=val})}setupDistanceUnit(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){try{const unit=yield this.storage.getUnit();this.params.unit=null===unit?environment.a.defaultUnit:unit}catch(error){this.params.unit=environment.a.defaultUnit}this.preference.unit=this.params.unit})}ionViewDidEnter(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){this.params.address&&this.updateSearchBarValue(this.params.address),\"undefined\"==typeof google||void 0===google.maps?this.loadGoogleMaps():this.mapInitialized||this.initMap();const title=yield this.getTrans(\"MAP\");this.setPageTitle(title),this.setMetaTags({title:title})})}loadGoogleMaps(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){window.mapInit=()=>{this.initMap()};const apiKey=environment.a.googleMapsApiKey,script=document.createElement(\"script\");script.id=\"googleMaps\",script.src=`https://maps.google.com/maps/api/js?key=${apiKey}&callback=mapInit&libraries=places`,document.body.appendChild(script)})}initMap(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){this.snazzyInfoWindow=__webpack_require__(\"C+d3\"),this.geocoder=new google.maps.Geocoder,this.mapInitialized=!0;const mapOptions={styles:map_style.a.light(),zoom:2,center:{lat:0,lng:0},mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1};this.map=new google.maps.Map(this.mapElement.nativeElement,mapOptions),this.autocompleteService=new google.maps.places.AutocompleteService,this.placesService=new google.maps.places.PlacesService(this.map);const text=yield this.getTrans(\"SEARCH_THIS_AREA\"),component=document.createElement(\"ion-button\");component.innerText=text,component.shape=\"round\",component.size=\"small\",component.setAttribute(\"margin-top\",null),component.onclick=()=>this.onSearchButtonTapped(),this.map.controls[google.maps.ControlPosition.TOP_CENTER].push(component);try{yield this.setupDistanceUnit();let location=null;location=this.params.latitude&&this.params.longitude?{latitude:this.params.latitude,longitude:this.params.longitude}:yield this.geolocationService.getCurrentPosition(),location&&(this.location=location,this.loadData(),this.updateMyLocationMarker(location))}catch(err){this.translate.get(\"ERROR_LOCATION_UNAVAILABLE\").subscribe(str=>this.showToast(str))}})}updateMyLocationMarker(location){const latLng=new google.maps.LatLng(location.latitude,location.longitude);this.myLocationMarker?this.myLocationMarker.setPosition(latLng):this.myLocationMarker=new google.maps.Marker({icon:{url:\"./assets/img/dot.png\",scaledSize:new google.maps.Size(24,24),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},position:latLng,map:this.map})}setMapOnAll(map){this.markers.forEach(marker=>{marker.setMap(map)})}onClearSearchAddress(){this.suggestions=[]}onSearchAddress(event={}){if(!this.mapInitialized)return;const query=event.target.value;query&&query.length>=3&&this.autocompleteService.getPlacePredictions({input:query},predictions=>{this.zone.run(()=>{predictions&&(this.suggestions=predictions)})})}onSuggestionTouched(suggestion){this.mapInitialized&&(this.suggestions=[],this.placesService.getDetails({placeId:suggestion.place_id},details=>{this.zone.run(()=>{const coords={latitude:details.geometry.location.lat(),longitude:details.geometry.location.lng()};this.map.setCenter({lat:coords.latitude,lng:coords.longitude}),this.map.setZoom(6),this.location=coords,this.params.latitude=coords.latitude,this.params.longitude=coords.longitude,this.params.address=details.formatted_address,this.params.bounds=null,this.zoomMyLocation=!1,this.updateSearchBarValue(details.formatted_address),this.removeActiveInfoWindow(),this.setMapOnAll(null),this.updateMyLocationMarker(coords),this.reloadUrl(),setTimeout(()=>this.loadData(),400)})}))}getFilteredParams(){const params=Object.assign({},this.params),allowed=[\"featured\",\"ratingMin\",\"ratingMax\",\"maxDistance\",\"latitude\",\"longitude\",\"cat\",\"address\"];return Object.keys(params).filter(key=>allowed.includes(key)).reduce((obj,key)=>(obj[key]=params[key],obj),{})}reloadUrl(){const urlTree=this.createUrlTree(this.getFilteredParams());this.locationService.go(urlTree.toString())}setBottomDrawerState(state){this.bottomDrawerConfig.state=state,this.updateIonContentStylePadding()}loadData(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){try{this.showLoadingView({showOverlay:!1}),this.places=yield this.placeService.load(this.params),this.places.length?this.showContentView():(this.translate.get(\"EMPTY_PLACES\").subscribe(str=>this.showToast(str)),this.showEmptyView(),this.setBottomDrawerState(DrawerState.Bottom)),this.onPlacesLoaded()}catch(err){this.translate.get(\"ERROR_NETWORK\").subscribe(str=>this.showToast(str)),this.showErrorView(),this.setBottomDrawerState(DrawerState.Bottom)}})}onPlacesLoaded(){setTimeout(()=>{this.zone.run(()=>{const bounds=new google.maps.LatLngBounds,points=[];this.placeToInfoWindow=new Map;for(const place of this.places){const position=new google.maps.LatLng(place.location.latitude,place.location.longitude);bounds.extend(position);const marker=new google.maps.Marker({icon:{url:place.icon?place.icon.url():\"./assets/img/pin.png\",scaledSize:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},position:position,map:this.map});marker.addListener(\"click\",()=>{this.map.panTo(marker.getPosition())}),this.markers.push(marker);const component=this.resolver.resolveComponentFactory(info_window_InfoWindowComponent).create(this.injector);component.instance.place=place,component.instance.location=this.location,component.instance.unit=this.params.unit,component.changeDetectorRef.detectChanges(),component.instance.onButtonTouched.subscribe(place=>{this.zone.run(()=>this.onPlaceTouched(place))});const infoWindow=new this.snazzyInfoWindow({marker:marker,content:component.location.nativeElement,padding:\"0\",wrapperClass:\"info-window-wrapper\",showCloseButton:!1,panOnOpen:!1,closeWhenOthersOpen:!0,callbacks:{afterOpen:()=>{this.activeInfoWindow=infoWindow,this.setBottomDrawerState(DrawerState.Docked)}},offset:{top:\"-4px\",left:\"16px\"}});this.placeToInfoWindow.set(place.id,infoWindow),points.push(position)}this.zoomMyLocation&&this.myLocationMarker&&bounds.extend(this.myLocationMarker.getPosition()),(points.length||this.zoomMyLocation)&&this.map.fitBounds(bounds),!points.length&&this.zoomMyLocation&&this.map.setZoom(this.map.getZoom()-8)})},100)}onReload(){this.setMapOnAll(null),this.markers=[],this.loadData()}onPlaceTouched(place){this.navigateToRelative(\"../\"+place.id+\"/\"+place.slug)}onSearchButtonTapped(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){if(!this.mapInitialized)return;this.removeActiveInfoWindow();const bounds=this.map.getBounds();this.params.bounds=[{latitude:bounds.getSouthWest().lat(),longitude:bounds.getSouthWest().lng()},{latitude:bounds.getNorthEast().lat(),longitude:bounds.getNorthEast().lng()}],this.zoomMyLocation=!1,yield this.showLoadingView({showOverlay:!1}),this.onReload()})}updateIonContentStylePadding(){let style=\"--padding-bottom: 0\";(this.isCordova||this.isMobile)&&this.bottomDrawerConfig.state===DrawerState.Docked&&(style=`--padding-bottom: ${this.bottomDrawerConfig.dockedHeight-(this.isAndroid?56:48)}px`),this.ionContentStylePadding=this.sanitizer.bypassSecurityTrustStyle(style)}onBottomDrawerTouched(){this.bottomDrawerConfig.state=this.bottomDrawerConfig.state===DrawerState.Docked?DrawerState.Top:DrawerState.Docked}onPlaceHover(place){this.placeToInfoWindow.get(place.id).open()}removeActiveInfoWindow(){this.activeInfoWindow&&(this.activeInfoWindow.destroy(),this.activeInfoWindow=null)}showInfoWindow(place,event){return Object(tslib_es6.a)(this,void 0,void 0,function*(){event.stopPropagation(),this.bottomDrawerConfig.state===DrawerState.Top?(this.placeToInfoWindow.get(place.id).open(),this.setBottomDrawerState(DrawerState.Docked),setTimeout(()=>{this.map.setCenter({lat:place.location.latitude,lng:place.location.longitude}),this.map.setZoom(14)},600)):this.bottomDrawerConfig.state=DrawerState.Top})}}return MapPage.ɵfac=function(t){return new(t||MapPage)(core.Pb(core.t),core.Pb(platform_browser.b),core.Pb(core.B),core.Pb(core.k),core.Pb(local_storage.a),core.Pb(place_service.a),core.Pb(common.i),core.Pb(geolocation_service.a))},MapPage.ɵcmp=core.Jb({type:MapPage,selectors:[[\"map-page\"]],viewQuery:function(rf,ctx){if(1&rf&&(core.Kc(ionic_angular.P,3),core.Kc(map_c0,3)),2&rf){let _t;core.tc(_t=core.ec())&&(ctx.searchBar=_t.first),core.tc(_t=core.ec())&&(ctx.mapElement=_t.first)}},features:[core.Ab],decls:27,vars:18,consts:[[1,\"ion-no-border\"],[\"color\",\"primary\",\"fixed\",\"\"],[\"slot\",\"start\"],[\"inputmode\",\"search\",\"mode\",\"ios\",1,\"text-small\",3,\"placeholder\",\"ionInput\",\"ionCancel\",\"ionClear\"],[\"no-bounce\",\"\"],[\"slot\",\"fixed\",2,\"left\",\"0\",\"right\",\"0\"],[\"fixed\",\"\",4,\"ngIf\"],[\"fixed\",\"\",1,\"fullscreen\"],[1,\"fullscreen\",\"ion-justify-content-center\"],[\"size\",\"6\",1,\"fullscreen\",\"hide-xs-up\",\"show-lg-up\"],[\"icon\",\"alert-circle-outline\",3,\"text\",4,\"ngIf\"],[\"icon\",\"map\",3,\"text\",4,\"ngIf\"],[\"class\",\"flex-center\",4,\"ngIf\"],[\"class\",\"scroll\",4,\"ngIf\"],[\"size-xs\",\"12\",\"size-lg\",\"6\"],[1,\"map\"],[\"map\",\"\"],[1,\"hide-lg-up\",3,\"state\",\"minimumHeight\",\"dockedHeight\",\"shouldBounce\",\"distanceTop\",\"disableDrag\",\"transition\",\"stateChange\",\"click\"],[\"slot\",\"fixed\"],[\"slot\",\"icon-only\",3,\"name\"],[1,\"drawer-content\"],[\"button\",\"\",\"lines\",\"none\",\"detail\",\"false\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"fixed\",\"\"],[\"lines\",\"none\",1,\"shadow\"],[\"class\",\"hover\",\"button\",\"\",\"detail\",\"false\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"button\",\"\",\"detail\",\"false\",1,\"hover\",3,\"click\"],[\"color\",\"dark\"],[1,\"link\",\"bold\",\"text-medium\"],[\"icon\",\"alert-circle-outline\",3,\"text\"],[\"icon\",\"map\",3,\"text\"],[1,\"flex-center\"],[1,\"scroll\"],[\"button\",\"\",\"lines\",\"none\",\"detail\",\"false\",3,\"routerLink\",\"mouseenter\",4,\"ngFor\",\"ngForOf\"],[\"button\",\"\",\"lines\",\"none\",\"detail\",\"false\",3,\"routerLink\",\"mouseenter\"],[\"slot\",\"start\",4,\"ngIf\"],[1,\"bold\",\"no-margin\",\"ellipsis\",\"link\"],[\"color\",\"medium\"],[1,\"no-margin\"],[\"class\",\"rating\",3,\"rate\",\"readOnly\",\"max\",\"theme\",4,\"ngIf\"],[\"slot\",\"end\"],[\"color\",\"primary\"],[1,\"bold\"],[\"src-fallback\",\"./assets/img/placeholder.png\",3,\"alt\",\"src\"],[1,\"rating\",3,\"rate\",\"readOnly\",\"max\",\"theme\"],[\"button\",\"\",\"lines\",\"none\",\"detail\",\"false\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Vb(0,\"ion-header\",0),core.Vb(1,\"ion-toolbar\",1),core.Vb(2,\"ion-buttons\",2),core.Qb(3,\"ion-back-button\"),core.Ub(),core.Vb(4,\"ion-searchbar\",3),core.dc(\"ionInput\",function($event){return ctx.onSearchAddress($event)})(\"ionCancel\",function(){return ctx.onClearSearchAddress()})(\"ionClear\",function(){return ctx.onClearSearchAddress()}),core.gc(5,\"translate\"),core.Ub(),core.Ub(),core.Ub(),core.Vb(6,\"ion-content\",4),core.Vb(7,\"div\",5),core.Ec(8,MapPage_ion_grid_8_Template,3,2,\"ion-grid\",6),core.Ub(),core.Vb(9,\"ion-grid\",7),core.Vb(10,\"ion-row\",8),core.Vb(11,\"ion-col\",9),core.Ec(12,MapPage_empty_view_12_Template,2,3,\"empty-view\",10),core.Ec(13,MapPage_empty_view_13_Template,2,3,\"empty-view\",11),core.Ec(14,MapPage_div_14_Template,2,0,\"div\",12),core.Ec(15,MapPage_ion_list_15_Template,2,2,\"ion-list\",13),core.Ub(),core.Vb(16,\"ion-col\",14),core.Qb(17,\"div\",15,16),core.Ub(),core.Ub(),core.Ub(),core.Ub(),core.Vb(19,\"ion-bottom-drawer\",17),core.dc(\"stateChange\",function($event){return ctx.bottomDrawerConfig.state=$event})(\"click\",function(){return ctx.onBottomDrawerTouched()}),core.Vb(20,\"ion-toolbar\",18),core.Vb(21,\"ion-buttons\",2),core.Vb(22,\"ion-button\"),core.Qb(23,\"ion-icon\",19),core.Ub(),core.Ub(),core.Ub(),core.Vb(24,\"div\",20),core.Vb(25,\"ion-list\"),core.Ec(26,MapPage_ion_item_26_Template,14,5,\"ion-item\",21),core.Ub(),core.Ub(),core.Ub()),2&rf&&(core.Db(4),core.lc(\"placeholder\",core.hc(5,16,\"ENTER_ADDRESS\")),core.Db(2),core.Eb(\"style\",ctx.ionContentStylePadding,core.yc),core.Db(2),core.lc(\"ngIf\",ctx.suggestions.length),core.Db(4),core.lc(\"ngIf\",ctx.isErrorViewVisible),core.Db(1),core.lc(\"ngIf\",ctx.isEmptyViewVisible),core.Db(1),core.lc(\"ngIf\",ctx.isLoadingViewVisible),core.Db(1),core.lc(\"ngIf\",ctx.places.length),core.Db(4),core.lc(\"state\",ctx.bottomDrawerConfig.state)(\"minimumHeight\",ctx.bottomDrawerConfig.minimumHeight)(\"dockedHeight\",ctx.bottomDrawerConfig.dockedHeight)(\"shouldBounce\",ctx.bottomDrawerConfig.shouldBounce)(\"distanceTop\",ctx.bottomDrawerConfig.distanceTop)(\"disableDrag\",ctx.bottomDrawerConfig.disableDrag)(\"transition\",ctx.bottomDrawerConfig.transition),core.Db(4),core.lc(\"name\",2===ctx.bottomDrawerConfig.state?\"chevron-down\":\"chevron-up\"),core.Db(3),core.lc(\"ngForOf\",ctx.places))},directives:[ionic_angular.w,ionic_angular.db,ionic_angular.l,ionic_angular.h,ionic_angular.i,ionic_angular.P,ionic_angular.nb,ionic_angular.r,common.m,ionic_angular.v,ionic_angular.O,ionic_angular.q,ion_bottom_drawer_IonBottomDrawerComponent,ionic_angular.k,ionic_angular.x,ionic_angular.F,common.l,ionic_angular.B,ionic_angular.E,ionic_angular.Y,empty_view.a,ionic_angular.U,ionic_angular.lb,router.i,ionic_angular.ab,ngx_img_fallback.a,ngx_bar_rating.a],pipes:[ngx_translate_core.c],styles:[\"ion-content[_ngcontent-%COMP%]{--overflow:hidden}ion-grid[_ngcontent-%COMP%]{padding:0}ion-buttons[_ngcontent-%COMP%]{align-self:center}ion-searchbar[_ngcontent-%COMP%]{padding:0 8px!important}.map[_ngcontent-%COMP%]{width:100%;height:100%}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0}ion-list.scroll[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:120px;height:120px}\"],data:{animation:[Object(animations.l)(\"staggerIn\",[Object(animations.k)(\"* => *\",[Object(animations.f)(\":enter\",Object(animations.j)({opacity:0,transform:\"translate3d(0,10px,0)\"}),{optional:!0}),Object(animations.f)(\":enter\",Object(animations.h)(\"100ms\",[Object(animations.e)(\"300ms\",Object(animations.j)({opacity:1,transform:\"translate3d(0,0,0)\"}))]),{optional:!0})])])]}}),MapPage})();var shared_module=__webpack_require__(\"d2mR\");let map_module_MapPageModule=(()=>{class MapPageModule{}return MapPageModule.ɵmod=core.Nb({type:MapPageModule}),MapPageModule.ɵinj=core.Mb({factory:function(t){return new(t||MapPageModule)},imports:[[shared_module.a,ion_bottom_drawer_IonBottomDrawerModule,router.j.forChild([{path:\"\",component:map_MapPage}])]]}),MapPageModule})()},\"C+d3\":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;void 0===(__WEBPACK_AMD_DEFINE_RESULT__=\"function\"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(t,e){\"use strict\";function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function n(t,e){t&&e&&Object.keys(e).forEach(function(o){t[o]=e[o]})}function r(t){var e={};return n(e,f),n(e,t),Object.keys(f).forEach(function(t){var o=f[t];if(\"object\"===(void 0===o?\"undefined\":d(o))){var i={};n(i,o),n(i,e[t]),e[t]=i}}),e}function h(t,e){var o=/^(-{0,1}\\.{0,1}\\d+(\\.\\d+)?)[\\s|\\.]*(\\w*)$/;if(t&&o.test(t)){var i=o.exec(t);return{value:1*i[1],units:i[3]||\"px\",original:t}}return e?h(e):{original:e}}function p(t,e){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);e&&(\"string\"==typeof e?t.innerHTML=e:t.appendChild(e))}}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){if(null!=t){if(t instanceof google.maps.LatLng)return t;if(void 0!==t.lat&&void 0!==t.lng)return new google.maps.LatLng(t)}return null}Object.defineProperty(e,\"__esModule\",{value:!0});var _=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},f={placement:\"top\",pointer:!0,openOnMarkerClick:!0,closeOnMapClick:!0,closeWhenOthersOpen:!1,showCloseButton:!0,panOnOpen:!0,edgeOffset:{top:20,right:20,bottom:20,left:20}},m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(\"undefined\"==typeof google)return console.warn(\"Snazzy Info Window: Google Maps is not defined!\"),i(s);s._html=null,s._opts=r(t),s._callbacks=s._opts.callbacks||{},s._marker=s._opts.marker,s._map=s._opts.map,s._position=c(s._opts.position),s._isOpen=!1,s._listeners=[],s._marker&&s._opts.openOnMarkerClick&&s.trackListener(google.maps.event.addListener(s._marker,\"click\",function(){s.getMap()||s.open()}),!0),s._position&&!s._opts.offset&&(s._opts.offset={top:\"0px\",left:\"0px\"});var n=t.placement||s._opts.position;return(\"string\"==typeof n||n instanceof String)&&(n=n.toLowerCase()),s._opts.placement=\"top\"!==n&&\"bottom\"!==n&&\"left\"!==n&&\"right\"!==n?f.placement:n,null==(n=s._opts.position)||\"string\"==typeof n||n instanceof String||(s._opts.position=n),void 0!==s._opts.border&&!0!==s._opts.border||(s._opts.border={}),void 0===s._opts.pointer&&(s._opts.pointer=f.pointer),void 0!==s._opts.shadow&&!0!==s._opts.shadow||(s._opts.shadow={}),s}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,\"undefined\"!=typeof google?google.maps.OverlayView:function(){}),_(e,[{key:\"activateCallback\",value:function(t){var e=this._callbacks[t];return e?e.apply(this):void 0}},{key:\"trackListener\",value:function(t,e){this._listeners.push({listener:t,persistent:e})}},{key:\"clearListeners\",value:function(t){this._listeners&&(this._listeners.forEach(function(e){!t&&e.persistent||(google.maps.event.removeListener(e.listener),e.listener=null)}),this._listeners=this._listeners.filter(function(t){return null!=t.listener}))}},{key:\"isOpen\",value:function(){return this._isOpen}},{key:\"open\",value:function(){var t=this.activateCallback(\"beforeOpen\");(void 0===t||t)&&(this._marker?this.setMap(this._marker.getMap()):this._map&&this._position&&this.setMap(this._map))}},{key:\"close\",value:function(){var t=this.activateCallback(\"beforeClose\");(void 0===t||t)&&(this.clearListeners(),this.setMap(null))}},{key:\"destroy\",value:function(){this.getMap()&&this.setMap(null),this.clearListeners(!0)}},{key:\"setContent\",value:function(t){this._opts.content=t,this._html&&this._html.content&&p(this._html.content,t)}},{key:\"setPosition\",value:function(t){this._position=c(t),this._isOpen&&this._position&&(this.draw(),this.resize(),this.reposition())}},{key:\"setWrapperClass\",value:function(t){if(this._html&&this._html.wrapper){var e=this._html.wrapper;e.className=\"si-wrapper-\"+this._opts.placement,this._opts.border&&(e.className+=\" si-has-border\"),t&&(e.className+=\" \"+t)}this._opts.wrapperClass=t}},{key:\"getWrapper\",value:function(){return this._html?this._html.wrapper:null}},{key:\"draw\",value:function(){if(this.getMap()&&this._html&&(this._marker||this._position)){var t=this._opts.offset;t&&(t.left&&(this._html.wrapper.style.marginLeft=t.left),t.top&&(this._html.wrapper.style.marginTop=t.top));var e=this._opts.backgroundColor;if(e&&(this._html.contentWrapper.style.backgroundColor=e,this._opts.pointer&&(this._html.pointerBg.style[\"border\"+l(this._opts.placement)+\"Color\"]=e)),this._opts.padding&&(this._html.contentWrapper.style.padding=this._opts.padding,this._opts.shadow&&(this._html.shadowFrame.style.padding=this._opts.padding)),this._opts.borderRadius&&(this._html.contentWrapper.style.borderRadius=this._opts.borderRadius,this._opts.shadow&&(this._html.shadowFrame.style.borderRadius=this._opts.borderRadius)),this._opts.fontSize&&(this._html.wrapper.style.fontSize=this._opts.fontSize),this._opts.fontColor&&(this._html.contentWrapper.style.color=this._opts.fontColor),this._opts.pointer&&!0!==this._opts.pointer&&(this._opts.shadow&&(this._html.shadowPointer.style.width=this._opts.pointer,this._html.shadowPointer.style.height=this._opts.pointer),this._html.pointerBorder&&(this._html.pointerBorder.style.borderWidth=this._opts.pointer),this._html.pointerBg.style.borderWidth=this._opts.pointer),this._opts.border){var o=0;if(void 0!==this._opts.border.width&&(o=h(this._opts.border.width,\"0px\"),this._html.contentWrapper.style.borderWidth=o.value+o.units),o=h((o=Math.round((this._html.contentWrapper.offsetWidth-this._html.contentWrapper.clientWidth)/2))+\"px\",\"0px\"),this._opts.pointer){var i=Math.min(this._html.pointerBorder.offsetHeight,this._html.pointerBorder.offsetWidth);i=h(i+\"px\",\"0px\");var s=Math.round(o.value*(1.41421356237-1));s=Math.min(s,i.value),this._html.pointerBg.style.borderWidth=i.value-s+i.units;var n=l(function(t){return\"top\"===t?\"bottom\":\"bottom\"===t?\"top\":\"left\"===t?\"right\":\"right\"===t?\"left\":t}(this._opts.placement));this._html.pointerBg.style[\"margin\"+n]=s+o.units,this._html.pointerBg.style[this._opts.placement]=-o.value+o.units}var r=this._opts.border.color;r&&(this._html.contentWrapper.style.borderColor=r,this._html.pointerBorder&&(this._html.pointerBorder.style[\"border\"+l(this._opts.placement)+\"Color\"]=r))}if(this._opts.shadow){var p=this._opts.shadow,c=function(t){var e=p[t];return void 0!==e&&null!=e};if(c(\"h\")||c(\"v\")||c(\"blur\")||c(\"spread\")||c(\"color\")){var _=h(p.h,\"0px\"),d=h(p.v,\"3px\"),f=h(p.blur,\"6px\"),m=h(p.spread,\"0px\"),g=p.color||\"#000\",v=function(t,e){return t+\" \"+e+\" \"+f.original+\" \"+m.original+\" \"+g};this._html.shadowFrame.style.boxShadow=v(_.original,d.original),this._html.shadowPointerInner&&(this._html.shadowPointerInner.style.boxShadow=v(.7071067811865474*(_.value-d.value)+_.units,.7071067811865474*(_.value+d.value)+d.units))}this._opts.shadow.opacity&&(this._html.shadowWrapper.style.opacity=this._opts.shadow.opacity)}var b=this.getProjection().fromLatLngToDivPixel(this._position||this._marker.position);b&&(this._html.floatWrapper.style.top=Math.floor(b.y)+\"px\",this._html.floatWrapper.style.left=Math.floor(b.x)+\"px\"),this._isOpen||(this._isOpen=!0,this.resize(),this.reposition(),this.activateCallback(\"afterOpen\"),google.maps.event.trigger(this.getMap(),\"snazzy-info-window-opened\",this))}}},{key:\"onAdd\",value:function(){var t=this;if(!this._html){var e=function(t,e){if(t&&e)for(var o=0;o<e.length;o++){var i=e[o];i&&(t.className&&(t.className+=\" \"),t.className+=\"si-\"+i)}},o=function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var s=document.createElement(\"div\");return e(s,o),s};if(this._html={},this._html.wrapper=o(),this.setWrapperClass(this._opts.wrapperClass),this._opts.shadow&&(this._html.shadowWrapper=o(\"shadow-wrapper-\"+this._opts.placement),this._html.shadowFrame=o(\"frame\",\"shadow-frame\"),this._html.shadowWrapper.appendChild(this._html.shadowFrame),this._opts.pointer&&(this._html.shadowPointer=o(\"shadow-pointer-\"+this._opts.placement),this._html.shadowPointerInner=o(\"shadow-inner-pointer-\"+this._opts.placement),this._html.shadowPointer.appendChild(this._html.shadowPointerInner),this._html.shadowWrapper.appendChild(this._html.shadowPointer)),this._html.wrapper.appendChild(this._html.shadowWrapper)),this._html.contentWrapper=o(\"frame\",\"content-wrapper\"),this._html.content=o(\"content\"),this._opts.content&&p(this._html.content,this._opts.content),this._opts.showCloseButton){if(this._opts.closeButtonMarkup){var i=document.createElement(\"div\");p(i,this._opts.closeButtonMarkup),this._html.closeButton=i.firstChild}else this._html.closeButton=document.createElement(\"button\"),this._html.closeButton.setAttribute(\"type\",\"button\"),this._html.closeButton.innerHTML=\"&#215;\",e(this._html.closeButton,[\"close-button\"]);this._html.contentWrapper.appendChild(this._html.closeButton)}this._html.contentWrapper.appendChild(this._html.content),this._html.wrapper.appendChild(this._html.contentWrapper),this._opts.pointer&&(this._opts.border&&(this._html.pointerBorder=o(\"pointer-\"+this._opts.placement,\"pointer-border-\"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBorder)),this._html.pointerBg=o(\"pointer-\"+this._opts.placement,\"pointer-bg-\"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBg)),this._html.floatWrapper=o(\"float-wrapper\"),this._html.floatWrapper.appendChild(this._html.wrapper),this.getPanes().floatPane.appendChild(this._html.floatWrapper);var s=this.getMap();this.clearListeners(),this._opts.closeOnMapClick&&this.trackListener(google.maps.event.addListener(s,\"click\",function(){t.close()})),this._opts.closeWhenOthersOpen&&this.trackListener(google.maps.event.addListener(s,\"snazzy-info-window-opened\",function(e){t!==e&&t.close()})),this._previousWidth=null,this._previousHeight=null,this.trackListener(google.maps.event.addListener(s,\"bounds_changed\",function(){var e=s.getDiv(),o=e.offsetWidth,i=e.offsetHeight,n=t._previousWidth,r=t._previousHeight;null!==n&&null!==r&&n===o&&r===i||(t._previousWidth=o,t._previousHeight=i,t.resize())})),this._marker&&this.trackListener(google.maps.event.addListener(this._marker,\"position_changed\",function(){t.draw()})),this._opts.showCloseButton&&!this._opts.closeButtonMarkup&&this.trackListener(google.maps.event.addDomListener(this._html.closeButton,\"click\",function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),t.close()})),[\"click\",\"dblclick\",\"rightclick\",\"contextmenu\",\"drag\",\"dragend\",\"dragstart\",\"mousedown\",\"mouseout\",\"mouseover\",\"mouseup\",\"touchstart\",\"touchend\",\"touchmove\",\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"].forEach(function(e){t.trackListener(google.maps.event.addDomListener(t._html.wrapper,e,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))}),this.activateCallback(\"open\")}}},{key:\"onRemove\",value:function(){if(this.activateCallback(\"close\"),this._html){var t=this._html.floatWrapper.parentElement;t&&t.removeChild(this._html.floatWrapper),this._html=null}this._isOpen=!1,this.activateCallback(\"afterClose\")}},{key:\"getMapInnerBounds\",value:function(){var t=this.getMap().getDiv().getBoundingClientRect(),e={top:t.top+this._opts.edgeOffset.top,right:t.right-this._opts.edgeOffset.right,bottom:t.bottom-this._opts.edgeOffset.bottom,left:t.left+this._opts.edgeOffset.left};return e.width=e.right-e.left,e.height=e.bottom-e.top,e}},{key:\"reposition\",value:function(){if(this._opts.panOnOpen&&this._html){var t=this.getMapInnerBounds(),e=this._html.wrapper.getBoundingClientRect(),o=0,i=0;t.left>=e.left?o=e.left-t.left:t.right<=e.right&&(o=e.left-(t.right-e.width)),t.top>=e.top?i=e.top-t.top:t.bottom<=e.bottom&&(i=e.top-(t.bottom-e.height)),0===o&&0===i||this.getMap().panBy(o,i)}}},{key:\"resize\",value:function(){if(this._html){var t=this.getMapInnerBounds(),e=t.width;void 0!==this._opts.maxWidth&&(e=Math.min(e,this._opts.maxWidth)),this._html.content.style.maxWidth=(e-=this._html.wrapper.offsetWidth-this._html.content.offsetWidth)+\"px\";var o=t.height;void 0!==this._opts.maxHeight&&(o=Math.min(o,this._opts.maxHeight)),this._html.content.style.maxHeight=(o-=this._html.wrapper.offsetHeight-this._html.content.offsetHeight)+\"px\"}}}]),e}();e.default=m,t.exports=e.default})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,[module,exports]):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}}]);","name":"7-es2015.0440862c6a098f1a7c27.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[7],{\n\n/***/ \"862v\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"MapPageModule\", function() { return /* binding */ map_module_MapPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 4 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/app/services/map-style.ts\nvar map_style = __webpack_require__(\"KR1p\");\n\n// EXTERNAL MODULE: ./src/app/pages/base-page/base-page.ts\nvar base_page = __webpack_require__(\"NV1z\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./node_modules/ngx-bar-rating/__ivy_ngcc__/fesm2015/ngx-bar-rating.js\nvar ngx_bar_rating = __webpack_require__(\"Qsw1\");\n\n// CONCATENATED MODULE: ./src/app/components/info-window/info-window.ts\n\r\n\r\n\r\n\r\n\r\nfunction InfoWindowComponent_ion_thumbnail_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-thumbnail\", 10);\r\n        core[\"Qb\" /* ɵɵelement */](1, \"img\", 11);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const ctx_r0 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"src\", ctx_r0.place.imageThumb == null ? null : ctx_r0.place.imageThumb.url(), core[\"zc\" /* ɵɵsanitizeUrl */])(\"alt\", ctx_r0.place.title);\r\n    }\r\n}\r\nfunction InfoWindowComponent_bar_rating_9_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"bar-rating\", 12);\r\n    }\r\n    if (rf & 2) {\r\n        const ctx_r1 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"lc\" /* ɵɵproperty */](\"rate\", ctx_r1.place.rating)(\"readOnly\", true)(\"max\", 5)(\"theme\", \"stars\");\r\n    }\r\n}\r\nlet info_window_InfoWindowComponent = /*@__PURE__*/ (() => {\r\n    class InfoWindowComponent {\r\n        constructor() {\r\n            this.onButtonTouched = new core[\"o\" /* EventEmitter */]();\r\n        }\r\n        goToPlace() {\r\n            this.onButtonTouched.emit(this.place);\r\n        }\r\n    }\r\n    InfoWindowComponent.ɵfac = function InfoWindowComponent_Factory(t) { return new (t || InfoWindowComponent)(); };\r\n    InfoWindowComponent.ɵcmp = core[\"Jb\" /* ɵɵdefineComponent */]({ type: InfoWindowComponent, selectors: [[\"info-window\"]], inputs: { place: \"place\", location: \"location\", unit: \"unit\" }, outputs: { onButtonTouched: \"onButtonTouched\" }, decls: 14, vars: 5, consts: [[\"button\", \"\", \"lines\", \"none\", 3, \"click\"], [\"slot\", \"start\", 4, \"ngIf\"], [1, \"bold\", \"no-margin\", \"ellipsis\"], [\"color\", \"dark\"], [\"color\", \"medium\"], [1, \"no-margin\"], [\"class\", \"rating\", 3, \"rate\", \"readOnly\", \"max\", \"theme\", 4, \"ngIf\"], [\"slot\", \"end\"], [\"color\", \"primary\"], [1, \"bold\"], [\"slot\", \"start\"], [\"src-fallback\", \"./assets/img/placeholder.png\", 3, \"src\", \"alt\"], [1, \"rating\", 3, \"rate\", \"readOnly\", \"max\", \"theme\"]], template: function InfoWindowComponent_Template(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Vb\" /* ɵɵelementStart */](0, \"ion-item\", 0);\r\n                core[\"dc\" /* ɵɵlistener */](\"click\", function InfoWindowComponent_Template_ion_item_click_0_listener() { return ctx.goToPlace(); });\r\n                core[\"Ec\" /* ɵɵtemplate */](1, InfoWindowComponent_ion_thumbnail_1_Template, 2, 2, \"ion-thumbnail\", 1);\r\n                core[\"Vb\" /* ɵɵelementStart */](2, \"ion-label\");\r\n                core[\"Vb\" /* ɵɵelementStart */](3, \"h2\", 2);\r\n                core[\"Vb\" /* ɵɵelementStart */](4, \"ion-text\", 3);\r\n                core[\"Gc\" /* ɵɵtext */](5);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](6, \"ion-text\", 4);\r\n                core[\"Vb\" /* ɵɵelementStart */](7, \"p\", 5);\r\n                core[\"Gc\" /* ɵɵtext */](8);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ec\" /* ɵɵtemplate */](9, InfoWindowComponent_bar_rating_9_Template, 1, 4, \"bar-rating\", 6);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](10, \"div\", 7);\r\n                core[\"Vb\" /* ɵɵelementStart */](11, \"ion-text\", 8);\r\n                core[\"Vb\" /* ɵɵelementStart */](12, \"span\", 9);\r\n                core[\"Gc\" /* ɵɵtext */](13);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n            }\r\n            if (rf & 2) {\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.place.imageThumb);\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", ctx.place.title, \" \");\r\n                core[\"Db\" /* ɵɵadvance */](3);\r\n                core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", ctx.place.categories.join(\" \\u2022 \"), \" \");\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.place.ratingAvg);\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", ctx.place.distance(ctx.location, ctx.unit), \" \");\r\n            }\r\n        }, directives: [ionic_angular[\"B\" /* IonItem */], common[\"m\" /* NgIf */], ionic_angular[\"E\" /* IonLabel */], ionic_angular[\"Y\" /* IonText */], ionic_angular[\"ab\" /* IonThumbnail */], ngx_bar_rating[\"a\" /* BarRating */]], styles: [\"ion-thumbnail[_ngcontent-%COMP%]{min-width:60px!important;min-height:60px!important}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;width:60px!important;height:60px!important}\"] });\r\n    return InfoWindowComponent;\r\n})();\r\n\n// EXTERNAL MODULE: ./src/environments/environment.ts\nvar environment = __webpack_require__(\"AytR\");\n\n// EXTERNAL MODULE: ./node_modules/ngx-img-fallback/node_modules/tslib/tslib.es6.js\nvar tslib_tslib_es6 = __webpack_require__(\"loPg\");\n\n// EXTERNAL MODULE: ./node_modules/hammerjs/hammer.js\nvar hammerjs_hammer = __webpack_require__(\"yLV6\");\n\n// CONCATENATED MODULE: ./node_modules/ion-bottom-drawer/__ivy_ngcc__/fesm2015/ion-bottom-drawer.js\n\n\n\n\n\n\n\nconst _c0 = [\"*\"];\nvar DrawerState = /*@__PURE__*/ (function (DrawerState) {\n    DrawerState[DrawerState[\"Bottom\"] = 0] = \"Bottom\";\n    DrawerState[DrawerState[\"Docked\"] = 1] = \"Docked\";\n    DrawerState[DrawerState[\"Top\"] = 2] = \"Top\";\n    return DrawerState;\n})({});\nlet ion_bottom_drawer_IonBottomDrawerComponent = /*@__PURE__*/ (() => {\n    let IonBottomDrawerComponent = class IonBottomDrawerComponent {\n        constructor(_element, _renderer, _domCtrl, _platform) {\n            this._element = _element;\n            this._renderer = _renderer;\n            this._domCtrl = _domCtrl;\n            this._platform = _platform;\n            this.dockedHeight = 50;\n            this.shouldBounce = true;\n            this.disableDrag = false;\n            this.distanceTop = 0;\n            this.transition = '0.25s ease-in-out';\n            this.state = DrawerState.Bottom;\n            this.minimumHeight = 0;\n            this.stateChange = new core[\"o\" /* EventEmitter */]();\n            this._BOUNCE_DELTA = 30;\n        }\n        ngAfterViewInit() {\n            this._renderer.setStyle(this._element.nativeElement.querySelector('.ion-bottom-drawer-scrollable-content :first-child'), 'touch-action', 'none');\n            this._setDrawerState(this.state);\n            const hammer = new hammerjs_hammer(this._element.nativeElement);\n            hammer.get('pan').set({ enable: true, direction: hammerjs_hammer[\"DIRECTION_VERTICAL\"] });\n            hammer.on('pan panstart panend', (ev) => {\n                if (this.disableDrag) {\n                    return;\n                }\n                switch (ev.type) {\n                    case 'panstart':\n                        this._handlePanStart();\n                        break;\n                    case 'panend':\n                        this._handlePanEnd(ev);\n                        break;\n                    default:\n                        this._handlePan(ev);\n                }\n            });\n        }\n        ngOnChanges(changes) {\n            if (!changes.state) {\n                return;\n            }\n            this._setDrawerState(changes.state.currentValue);\n        }\n        _setDrawerState(state) {\n            this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n            switch (state) {\n                case DrawerState.Bottom:\n                    this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n                    break;\n                case DrawerState.Docked:\n                    this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n                    break;\n                default:\n                    this._setTranslateY(this.distanceTop + 'px');\n            }\n        }\n        _handlePanStart() {\n            this._startPositionTop = this._element.nativeElement.getBoundingClientRect().top;\n        }\n        _handlePanEnd(ev) {\n            if (this.shouldBounce && ev.isFinal) {\n                this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n                switch (this.state) {\n                    case DrawerState.Docked:\n                        this._handleDockedPanEnd(ev);\n                        break;\n                    case DrawerState.Top:\n                        this._handleTopPanEnd(ev);\n                        break;\n                    default:\n                        this._handleBottomPanEnd(ev);\n                }\n            }\n            this.stateChange.emit(this.state);\n        }\n        _handleTopPanEnd(ev) {\n            if (ev.deltaY > this._BOUNCE_DELTA) {\n                this.state = DrawerState.Docked;\n            }\n            else {\n                this._setTranslateY(this.distanceTop + 'px');\n            }\n        }\n        _handleDockedPanEnd(ev) {\n            const absDeltaY = Math.abs(ev.deltaY);\n            if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY < 0) {\n                this.state = DrawerState.Top;\n            }\n            else if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY > 0) {\n                this.state = DrawerState.Bottom;\n            }\n            else {\n                this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n            }\n        }\n        _handleBottomPanEnd(ev) {\n            if (-ev.deltaY > this._BOUNCE_DELTA) {\n                this.state = DrawerState.Docked;\n            }\n            else {\n                this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n            }\n        }\n        _handlePan(ev) {\n            const pointerY = ev.center.y;\n            this._renderer.setStyle(this._element.nativeElement, 'transition', 'none');\n            if (pointerY > 0 && pointerY < this._platform.height()) {\n                if (ev.additionalEvent === 'panup' || ev.additionalEvent === 'pandown') {\n                    const newTop = this._startPositionTop + ev.deltaY;\n                    if (newTop >= this.distanceTop) {\n                        this._setTranslateY(newTop + 'px');\n                    }\n                    else if (newTop < this.distanceTop) {\n                        this._setTranslateY(this.distanceTop + 'px');\n                    }\n                    if (newTop > this._platform.height() - this.minimumHeight) {\n                        this._setTranslateY((this._platform.height() - this.minimumHeight) + 'px');\n                    }\n                }\n            }\n        }\n        _setTranslateY(value) {\n            this._domCtrl.write(() => {\n                this._renderer.setStyle(this._element.nativeElement, 'transform', 'translateY(' + value + ')');\n            });\n        }\n    };\n    IonBottomDrawerComponent.ɵfac = function IonBottomDrawerComponent_Factory(t) { return new (t || IonBottomDrawerComponent)(core[\"Pb\" /* ɵɵdirectiveInject */](core[\"m\" /* ElementRef */]), core[\"Pb\" /* ɵɵdirectiveInject */](core[\"G\" /* Renderer2 */]), core[\"Pb\" /* ɵɵdirectiveInject */](ionic_angular[\"e\" /* DomController */]), core[\"Pb\" /* ɵɵdirectiveInject */](ionic_angular[\"jb\" /* Platform */])); };\n    IonBottomDrawerComponent.ɵcmp = core[\"Jb\" /* ɵɵdefineComponent */]({ type: IonBottomDrawerComponent, selectors: [[\"ion-bottom-drawer\"]], inputs: { dockedHeight: \"dockedHeight\", shouldBounce: \"shouldBounce\", disableDrag: \"disableDrag\", distanceTop: \"distanceTop\", transition: \"transition\", state: \"state\", minimumHeight: \"minimumHeight\" }, outputs: { stateChange: \"stateChange\" }, features: [core[\"Bb\" /* ɵɵNgOnChangesFeature */]], ngContentSelectors: _c0, decls: 2, vars: 0, consts: [[\"no-bounce\", \"\", 1, \"ion-bottom-drawer-scrollable-content\"]], template: function IonBottomDrawerComponent_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"kc\" /* ɵɵprojectionDef */]();\n                core[\"Vb\" /* ɵɵelementStart */](0, \"ion-content\", 0);\n                core[\"jc\" /* ɵɵprojection */](1);\n                core[\"Ub\" /* ɵɵelementEnd */]();\n            }\n        }, directives: [ionic_angular[\"r\" /* IonContent */]], styles: [\"[_nghost-%COMP%]{width:100%;height:100%;position:absolute;left:0;z-index:11!important;background-color:#fff;-webkit-transform:translateY(100vh);transform:translateY(100vh)}\"] });\n    IonBottomDrawerComponent = Object(tslib_tslib_es6[\"a\" /* __decorate */])([Object(tslib_tslib_es6[\"b\" /* __metadata */])(\"design:paramtypes\", [core[\"m\" /* ElementRef */],\n            core[\"G\" /* Renderer2 */],\n            ionic_angular[\"e\" /* DomController */],\n            ionic_angular[\"jb\" /* Platform */]])\n    ], IonBottomDrawerComponent);\n    return IonBottomDrawerComponent;\n})();\nlet ion_bottom_drawer_IonBottomDrawerModule = /*@__PURE__*/ (() => {\n    let IonBottomDrawerModule = class IonBottomDrawerModule {\n    };\n    IonBottomDrawerModule.ɵmod = core[\"Nb\" /* ɵɵdefineNgModule */]({ type: IonBottomDrawerModule });\n    IonBottomDrawerModule.ɵinj = core[\"Mb\" /* ɵɵdefineInjector */]({ factory: function IonBottomDrawerModule_Factory(t) { return new (t || IonBottomDrawerModule)(); }, imports: [[ionic_angular[\"eb\" /* IonicModule */]]] });\n    return IonBottomDrawerModule;\n})();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"Ac\" /* ɵɵsetNgModuleScope */](ion_bottom_drawer_IonBottomDrawerModule, { declarations: function () { return [ion_bottom_drawer_IonBottomDrawerComponent]; }, imports: function () { return [ionic_angular[\"eb\" /* IonicModule */]]; }, exports: function () { return [ion_bottom_drawer_IonBottomDrawerComponent]; } }); })();\n/**\n * Generated bundle index. Do not edit.\n */\n\n//# sourceMappingURL=ion-bottom-drawer.js.map\n\n// EXTERNAL MODULE: ./node_modules/@angular/animations/__ivy_ngcc__/fesm2015/animations.js\nvar animations = __webpack_require__(\"R0Ic\");\n\n// EXTERNAL MODULE: ./src/app/utils.ts\nvar utils = __webpack_require__(\"HC5s\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/platform-browser/__ivy_ngcc__/fesm2015/platform-browser.js\nvar platform_browser = __webpack_require__(\"jhN1\");\n\n// EXTERNAL MODULE: ./src/app/services/local-storage.ts\nvar local_storage = __webpack_require__(\"eAEk\");\n\n// EXTERNAL MODULE: ./src/app/services/place-service.ts\nvar place_service = __webpack_require__(\"qOnq\");\n\n// EXTERNAL MODULE: ./src/app/services/geolocation.service.ts + 1 modules\nvar geolocation_service = __webpack_require__(\"H+Hf\");\n\n// EXTERNAL MODULE: ./src/app/components/empty-view/empty-view.ts\nvar empty_view = __webpack_require__(\"4ro/\");\n\n// EXTERNAL MODULE: ./node_modules/ngx-img-fallback/__ivy_ngcc__/fesm2015/ngx-img-fallback.js\nvar ngx_img_fallback = __webpack_require__(\"oZYh\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/app/pages/map/map.ts\n\r\n/// <reference types=\"@types/googlemaps\" />\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst map_c0 = [\"map\"];\r\nfunction MapPage_ion_grid_8_ion_item_2_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        const _r10 = core[\"Wb\" /* ɵɵgetCurrentView */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-item\", 25);\r\n        core[\"dc\" /* ɵɵlistener */](\"click\", function MapPage_ion_grid_8_ion_item_2_Template_ion_item_click_0_listener() { core[\"vc\" /* ɵɵrestoreView */](_r10); const suggestion_r8 = ctx.$implicit; const ctx_r9 = core[\"fc\" /* ɵɵnextContext */](2); return ctx_r9.onSuggestionTouched(suggestion_r8); });\r\n        core[\"Vb\" /* ɵɵelementStart */](1, \"ion-label\");\r\n        core[\"Vb\" /* ɵɵelementStart */](2, \"ion-text\", 26);\r\n        core[\"Vb\" /* ɵɵelementStart */](3, \"span\", 27);\r\n        core[\"Gc\" /* ɵɵtext */](4);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const suggestion_r8 = ctx.$implicit;\r\n        core[\"Db\" /* ɵɵadvance */](4);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", suggestion_r8.description, \" \");\r\n    }\r\n}\r\nfunction MapPage_ion_grid_8_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-grid\", 22);\r\n        core[\"Vb\" /* ɵɵelementStart */](1, \"ion-list\", 23);\r\n        core[\"Ec\" /* ɵɵtemplate */](2, MapPage_ion_grid_8_ion_item_2_Template, 5, 1, \"ion-item\", 24);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const ctx_r0 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"@staggerIn\", ctx_r0.suggestions.length);\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngForOf\", ctx_r0.suggestions);\r\n    }\r\n}\r\nfunction MapPage_empty_view_12_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"empty-view\", 28);\r\n        core[\"gc\" /* ɵɵpipe */](1, \"translate\");\r\n    }\r\n    if (rf & 2) {\r\n        core[\"lc\" /* ɵɵproperty */](\"text\", core[\"hc\" /* ɵɵpipeBind1 */](1, 1, \"ERROR_NETWORK\"));\r\n    }\r\n}\r\nfunction MapPage_empty_view_13_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"empty-view\", 29);\r\n        core[\"gc\" /* ɵɵpipe */](1, \"translate\");\r\n    }\r\n    if (rf & 2) {\r\n        core[\"lc\" /* ɵɵproperty */](\"text\", core[\"hc\" /* ɵɵpipeBind1 */](1, 1, \"EMPTY_PLACES\"));\r\n    }\r\n}\r\nfunction MapPage_div_14_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"div\", 30);\r\n        core[\"Qb\" /* ɵɵelement */](1, \"ion-spinner\");\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n}\r\nfunction MapPage_ion_list_15_ion_item_1_ion_thumbnail_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-thumbnail\", 2);\r\n        core[\"Qb\" /* ɵɵelement */](1, \"img\", 42);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const place_r12 = core[\"fc\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"alt\", place_r12.title)(\"src\", place_r12.imageThumb == null ? null : place_r12.imageThumb.url(), core[\"zc\" /* ɵɵsanitizeUrl */]);\r\n    }\r\n}\r\nfunction MapPage_ion_list_15_ion_item_1_bar_rating_9_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"bar-rating\", 43);\r\n    }\r\n    if (rf & 2) {\r\n        const place_r12 = core[\"fc\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"lc\" /* ɵɵproperty */](\"rate\", place_r12.ratingAvg)(\"readOnly\", true)(\"max\", 5)(\"theme\", \"stars\");\r\n    }\r\n}\r\nconst _c1 = function (a0) { return [a0]; };\r\nfunction MapPage_ion_list_15_ion_item_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        const _r18 = core[\"Wb\" /* ɵɵgetCurrentView */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-item\", 33);\r\n        core[\"dc\" /* ɵɵlistener */](\"mouseenter\", function MapPage_ion_list_15_ion_item_1_Template_ion_item_mouseenter_0_listener() { core[\"vc\" /* ɵɵrestoreView */](_r18); const place_r12 = ctx.$implicit; const ctx_r17 = core[\"fc\" /* ɵɵnextContext */](2); return ctx_r17.onPlaceHover(place_r12); });\r\n        core[\"Ec\" /* ɵɵtemplate */](1, MapPage_ion_list_15_ion_item_1_ion_thumbnail_1_Template, 2, 2, \"ion-thumbnail\", 34);\r\n        core[\"Vb\" /* ɵɵelementStart */](2, \"ion-label\");\r\n        core[\"Vb\" /* ɵɵelementStart */](3, \"h2\", 35);\r\n        core[\"Vb\" /* ɵɵelementStart */](4, \"ion-text\", 26);\r\n        core[\"Gc\" /* ɵɵtext */](5);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](6, \"ion-text\", 36);\r\n        core[\"Vb\" /* ɵɵelementStart */](7, \"p\", 37);\r\n        core[\"Gc\" /* ɵɵtext */](8);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ec\" /* ɵɵtemplate */](9, MapPage_ion_list_15_ion_item_1_bar_rating_9_Template, 1, 4, \"bar-rating\", 38);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](10, \"div\", 39);\r\n        core[\"Vb\" /* ɵɵelementStart */](11, \"ion-text\", 40);\r\n        core[\"Vb\" /* ɵɵelementStart */](12, \"span\", 41);\r\n        core[\"Gc\" /* ɵɵtext */](13);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const place_r12 = ctx.$implicit;\r\n        const ctx_r11 = core[\"fc\" /* ɵɵnextContext */](2);\r\n        core[\"lc\" /* ɵɵproperty */](\"routerLink\", core[\"pc\" /* ɵɵpureFunction1 */](6, _c1, \"../\" + place_r12.id + \"/\" + place_r12.slug));\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngIf\", place_r12.imageThumb);\r\n        core[\"Db\" /* ɵɵadvance */](4);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r12.title, \" \");\r\n        core[\"Db\" /* ɵɵadvance */](3);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r12.categories.join(\" \\u2022 \"), \" \");\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngIf\", place_r12.ratingAvg);\r\n        core[\"Db\" /* ɵɵadvance */](4);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r12.distance(ctx_r11.location, ctx_r11.preference.unit), \" \");\r\n    }\r\n}\r\nfunction MapPage_ion_list_15_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-list\", 31);\r\n        core[\"Ec\" /* ɵɵtemplate */](1, MapPage_ion_list_15_ion_item_1_Template, 14, 8, \"ion-item\", 32);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const ctx_r4 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"lc\" /* ɵɵproperty */](\"@staggerIn\", ctx_r4.places.length);\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngForOf\", ctx_r4.places);\r\n    }\r\n}\r\nfunction MapPage_ion_item_26_ion_thumbnail_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-thumbnail\", 2);\r\n        core[\"Qb\" /* ɵɵelement */](1, \"img\", 42);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const place_r19 = core[\"fc\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"alt\", place_r19.title)(\"src\", place_r19.imageThumb == null ? null : place_r19.imageThumb.url(), core[\"zc\" /* ɵɵsanitizeUrl */]);\r\n    }\r\n}\r\nfunction MapPage_ion_item_26_bar_rating_9_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"bar-rating\", 43);\r\n    }\r\n    if (rf & 2) {\r\n        const place_r19 = core[\"fc\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"lc\" /* ɵɵproperty */](\"rate\", place_r19.ratingAvg)(\"readOnly\", true)(\"max\", 5)(\"theme\", \"stars\");\r\n    }\r\n}\r\nfunction MapPage_ion_item_26_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        const _r25 = core[\"Wb\" /* ɵɵgetCurrentView */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-item\", 44);\r\n        core[\"dc\" /* ɵɵlistener */](\"click\", function MapPage_ion_item_26_Template_ion_item_click_0_listener($event) { core[\"vc\" /* ɵɵrestoreView */](_r25); const place_r19 = ctx.$implicit; const ctx_r24 = core[\"fc\" /* ɵɵnextContext */](); return ctx_r24.showInfoWindow(place_r19, $event); });\r\n        core[\"Ec\" /* ɵɵtemplate */](1, MapPage_ion_item_26_ion_thumbnail_1_Template, 2, 2, \"ion-thumbnail\", 34);\r\n        core[\"Vb\" /* ɵɵelementStart */](2, \"ion-label\");\r\n        core[\"Vb\" /* ɵɵelementStart */](3, \"h2\", 35);\r\n        core[\"Vb\" /* ɵɵelementStart */](4, \"ion-text\", 26);\r\n        core[\"Gc\" /* ɵɵtext */](5);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](6, \"ion-text\", 36);\r\n        core[\"Vb\" /* ɵɵelementStart */](7, \"p\", 37);\r\n        core[\"Gc\" /* ɵɵtext */](8);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ec\" /* ɵɵtemplate */](9, MapPage_ion_item_26_bar_rating_9_Template, 1, 4, \"bar-rating\", 38);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](10, \"div\", 39);\r\n        core[\"Vb\" /* ɵɵelementStart */](11, \"ion-text\", 40);\r\n        core[\"Vb\" /* ɵɵelementStart */](12, \"span\", 41);\r\n        core[\"Gc\" /* ɵɵtext */](13);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const place_r19 = ctx.$implicit;\r\n        const ctx_r6 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngIf\", place_r19.imageThumb);\r\n        core[\"Db\" /* ɵɵadvance */](4);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r19.title, \" \");\r\n        core[\"Db\" /* ɵɵadvance */](3);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r19.categories.join(\" \\u2022 \"), \" \");\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngIf\", place_r19.ratingAvg);\r\n        core[\"Db\" /* ɵɵadvance */](4);\r\n        core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", place_r19.distance(ctx_r6.location, ctx_r6.preference.unit), \" \");\r\n    }\r\n}\r\nlet map_MapPage = /*@__PURE__*/ (() => {\r\n    class MapPage extends base_page[\"a\" /* BasePage */] {\r\n        constructor(injector, sanitizer, zone, resolver, storage, placeService, locationService, geolocationService) {\r\n            super(injector);\r\n            this.injector = injector;\r\n            this.sanitizer = sanitizer;\r\n            this.zone = zone;\r\n            this.resolver = resolver;\r\n            this.storage = storage;\r\n            this.placeService = placeService;\r\n            this.locationService = locationService;\r\n            this.geolocationService = geolocationService;\r\n            this.params = {\r\n                page: 0\r\n            };\r\n            this.suggestions = [];\r\n            this.places = [];\r\n            this.bottomDrawerConfig = {\r\n                state: DrawerState.Bottom,\r\n                shouldBounce: true,\r\n                disableDrag: true,\r\n                minimumHeight: 0,\r\n                distanceTop: 130,\r\n                dockedHeight: 220,\r\n                transition: '0.25s ease-in-out',\r\n            };\r\n            this.markers = [];\r\n            this.mapInitialized = false;\r\n            this.zoomMyLocation = true;\r\n        }\r\n        enableMenuSwipe() {\r\n            return false;\r\n        }\r\n        ngOnInit() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                this.setupQueryParams();\r\n            });\r\n        }\r\n        setupQueryParams() {\r\n            const featured = this.getQueryParams().featured;\r\n            if (featured) {\r\n                this.params.featured = featured;\r\n            }\r\n            const cat = this.getQueryParams().cat;\r\n            if (cat) {\r\n                this.params.cat = cat;\r\n            }\r\n            const ratingMin = this.getQueryParams().ratingMin;\r\n            if (ratingMin) {\r\n                this.params.ratingMin = Number(ratingMin);\r\n            }\r\n            const ratingMax = this.getQueryParams().ratingMax;\r\n            if (ratingMax) {\r\n                this.params.ratingMax = Number(ratingMax);\r\n            }\r\n            const maxDistance = this.getQueryParams().maxDistance;\r\n            if (maxDistance) {\r\n                this.params.maxDistance = Number(maxDistance);\r\n            }\r\n            let lat = this.getQueryParams().latitude;\r\n            let lng = this.getQueryParams().longitude;\r\n            if (lat && lng) {\r\n                lat = Number(lat);\r\n                lng = Number(lng);\r\n                this.params.latitude = lat;\r\n                this.params.longitude = lng;\r\n            }\r\n            const address = this.getQueryParams().address;\r\n            if (address) {\r\n                this.params.address = this.getQueryParams().address;\r\n            }\r\n        }\r\n        updateSearchBarValue(val) {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                yield utils[\"a\" /* default */].sleep(800);\r\n                this.searchBar.value = val;\r\n            });\r\n        }\r\n        setupDistanceUnit() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                try {\r\n                    const unit = yield this.storage.getUnit();\r\n                    if (unit === null) {\r\n                        this.params.unit = environment[\"a\" /* environment */].defaultUnit;\r\n                    }\r\n                    else {\r\n                        this.params.unit = unit;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    this.params.unit = environment[\"a\" /* environment */].defaultUnit;\r\n                }\r\n                this.preference.unit = this.params.unit;\r\n            });\r\n        }\r\n        ionViewDidEnter() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                if (this.params.address) {\r\n                    this.updateSearchBarValue(this.params.address);\r\n                }\r\n                if (typeof google == 'undefined' || typeof google.maps == 'undefined') {\r\n                    this.loadGoogleMaps();\r\n                }\r\n                else if (!this.mapInitialized) {\r\n                    this.initMap();\r\n                }\r\n                const title = yield this.getTrans('MAP');\r\n                this.setPageTitle(title);\r\n                this.setMetaTags({\r\n                    title: title\r\n                });\r\n            });\r\n        }\r\n        loadGoogleMaps() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                window['mapInit'] = () => {\r\n                    this.initMap();\r\n                };\r\n                const apiKey = environment[\"a\" /* environment */].googleMapsApiKey;\r\n                const script = document.createElement('script');\r\n                script.id = 'googleMaps';\r\n                script.src = `https://maps.google.com/maps/api/js?key=${apiKey}&callback=mapInit&libraries=places`;\r\n                document.body.appendChild(script);\r\n            });\r\n        }\r\n        initMap() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                this.snazzyInfoWindow = __webpack_require__(\"C+d3\");\r\n                this.geocoder = new google.maps.Geocoder();\r\n                this.mapInitialized = true;\r\n                const mapOptions = {\r\n                    styles: map_style[\"a\" /* MapStyle */].light(),\r\n                    zoom: 2,\r\n                    center: { lat: 0, lng: 0 },\r\n                    mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                    mapTypeControl: false,\r\n                    streetViewControl: false\r\n                };\r\n                this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n                this.autocompleteService = new google.maps.places.AutocompleteService();\r\n                this.placesService = new google.maps.places.PlacesService(this.map);\r\n                const text = yield this.getTrans('SEARCH_THIS_AREA');\r\n                const component = document.createElement('ion-button');\r\n                component.innerText = text;\r\n                component.shape = 'round';\r\n                component.size = 'small';\r\n                component.setAttribute('margin-top', null);\r\n                component.onclick = () => this.onSearchButtonTapped();\r\n                this.map.controls[google.maps.ControlPosition.TOP_CENTER].push(component);\r\n                try {\r\n                    yield this.setupDistanceUnit();\r\n                    let location = null;\r\n                    if (this.params.latitude && this.params.longitude) {\r\n                        location = {\r\n                            latitude: this.params.latitude,\r\n                            longitude: this.params.longitude,\r\n                        };\r\n                    }\r\n                    else {\r\n                        location = yield this.geolocationService.getCurrentPosition();\r\n                    }\r\n                    if (location) {\r\n                        this.location = location;\r\n                        this.loadData();\r\n                        this.updateMyLocationMarker(location);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    this.translate.get('ERROR_LOCATION_UNAVAILABLE').subscribe(str => this.showToast(str));\r\n                }\r\n            });\r\n        }\r\n        updateMyLocationMarker(location) {\r\n            const latLng = new google.maps.LatLng(location.latitude, location.longitude);\r\n            if (!this.myLocationMarker) {\r\n                this.myLocationMarker = new google.maps.Marker({\r\n                    icon: {\r\n                        url: './assets/img/dot.png',\r\n                        scaledSize: new google.maps.Size(24, 24),\r\n                        origin: new google.maps.Point(0, 0),\r\n                        anchor: new google.maps.Point(0, 0)\r\n                    },\r\n                    position: latLng,\r\n                    map: this.map,\r\n                });\r\n            }\r\n            else {\r\n                this.myLocationMarker.setPosition(latLng);\r\n            }\r\n        }\r\n        setMapOnAll(map) {\r\n            this.markers.forEach(marker => {\r\n                marker.setMap(map);\r\n            });\r\n        }\r\n        onClearSearchAddress() {\r\n            this.suggestions = [];\r\n        }\r\n        onSearchAddress(event = {}) {\r\n            if (!this.mapInitialized)\r\n                return;\r\n            const query = event.target.value;\r\n            if (query && query.length >= 3) {\r\n                const config = {\r\n                    input: query,\r\n                };\r\n                this.autocompleteService.getPlacePredictions(config, (predictions) => {\r\n                    this.zone.run(() => {\r\n                        if (predictions)\r\n                            this.suggestions = predictions;\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        onSuggestionTouched(suggestion) {\r\n            if (!this.mapInitialized)\r\n                return;\r\n            this.suggestions = [];\r\n            this.placesService.getDetails({ placeId: suggestion.place_id }, (details) => {\r\n                this.zone.run(() => {\r\n                    const coords = {\r\n                        latitude: details.geometry.location.lat(),\r\n                        longitude: details.geometry.location.lng()\r\n                    };\r\n                    this.map.setCenter({\r\n                        lat: coords.latitude,\r\n                        lng: coords.longitude\r\n                    });\r\n                    this.map.setZoom(6);\r\n                    this.location = coords;\r\n                    this.params.latitude = coords.latitude;\r\n                    this.params.longitude = coords.longitude;\r\n                    this.params.address = details.formatted_address;\r\n                    this.params.bounds = null;\r\n                    this.zoomMyLocation = false;\r\n                    this.updateSearchBarValue(details.formatted_address);\r\n                    this.removeActiveInfoWindow();\r\n                    this.setMapOnAll(null);\r\n                    this.updateMyLocationMarker(coords);\r\n                    this.reloadUrl();\r\n                    setTimeout(() => this.loadData(), 400);\r\n                });\r\n            });\r\n        }\r\n        getFilteredParams() {\r\n            const params = Object.assign({}, this.params);\r\n            const allowed = [\r\n                'featured',\r\n                'ratingMin',\r\n                'ratingMax',\r\n                'maxDistance',\r\n                'latitude',\r\n                'longitude',\r\n                'cat',\r\n                'address',\r\n            ];\r\n            return Object.keys(params)\r\n                .filter(key => allowed.includes(key))\r\n                .reduce((obj, key) => {\r\n                obj[key] = params[key];\r\n                return obj;\r\n            }, {});\r\n        }\r\n        reloadUrl() {\r\n            const urlTree = this.createUrlTree(this.getFilteredParams());\r\n            this.locationService.go(urlTree.toString());\r\n        }\r\n        setBottomDrawerState(state) {\r\n            this.bottomDrawerConfig.state = state;\r\n            this.updateIonContentStylePadding();\r\n        }\r\n        loadData() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                try {\r\n                    this.showLoadingView({ showOverlay: false });\r\n                    this.places = yield this.placeService.load(this.params);\r\n                    if (!this.places.length) {\r\n                        this.translate.get('EMPTY_PLACES').subscribe(str => this.showToast(str));\r\n                        this.showEmptyView();\r\n                        this.setBottomDrawerState(DrawerState.Bottom);\r\n                    }\r\n                    else {\r\n                        this.showContentView();\r\n                    }\r\n                    this.onPlacesLoaded();\r\n                }\r\n                catch (err) {\r\n                    this.translate.get('ERROR_NETWORK').subscribe(str => this.showToast(str));\r\n                    this.showErrorView();\r\n                    this.setBottomDrawerState(DrawerState.Bottom);\r\n                }\r\n            });\r\n        }\r\n        onPlacesLoaded() {\r\n            setTimeout(() => {\r\n                this.zone.run(() => {\r\n                    const bounds = new google.maps.LatLngBounds();\r\n                    const points = [];\r\n                    this.placeToInfoWindow = new Map();\r\n                    for (const place of this.places) {\r\n                        const position = new google.maps.LatLng(place.location.latitude, place.location.longitude);\r\n                        bounds.extend(position);\r\n                        const marker = new google.maps.Marker({\r\n                            icon: {\r\n                                url: place.icon ? place.icon.url() : './assets/img/pin.png',\r\n                                scaledSize: new google.maps.Size(32, 32),\r\n                                origin: new google.maps.Point(0, 0),\r\n                                anchor: new google.maps.Point(0, 0)\r\n                            },\r\n                            position: position,\r\n                            map: this.map,\r\n                        });\r\n                        marker.addListener('click', () => {\r\n                            this.map.panTo(marker.getPosition());\r\n                        });\r\n                        this.markers.push(marker);\r\n                        const factory = this.resolver.resolveComponentFactory(info_window_InfoWindowComponent);\r\n                        const component = factory.create(this.injector);\r\n                        component.instance.place = place;\r\n                        component.instance.location = this.location;\r\n                        component.instance.unit = this.params.unit;\r\n                        component.changeDetectorRef.detectChanges();\r\n                        component.instance.onButtonTouched.subscribe((place) => {\r\n                            this.zone.run(() => this.onPlaceTouched(place));\r\n                        });\r\n                        const infoWindow = new this.snazzyInfoWindow({\r\n                            marker: marker,\r\n                            content: component.location.nativeElement,\r\n                            padding: '0',\r\n                            wrapperClass: 'info-window-wrapper',\r\n                            showCloseButton: false,\r\n                            panOnOpen: false,\r\n                            closeWhenOthersOpen: true,\r\n                            callbacks: {\r\n                                afterOpen: () => {\r\n                                    this.activeInfoWindow = infoWindow;\r\n                                    this.setBottomDrawerState(DrawerState.Docked);\r\n                                },\r\n                            },\r\n                            offset: {\r\n                                top: '-4px',\r\n                                left: '16px'\r\n                            }\r\n                        });\r\n                        this.placeToInfoWindow.set(place.id, infoWindow);\r\n                        points.push(position);\r\n                    }\r\n                    if (this.zoomMyLocation && this.myLocationMarker) {\r\n                        bounds.extend(this.myLocationMarker.getPosition());\r\n                    }\r\n                    if (points.length || this.zoomMyLocation) {\r\n                        this.map.fitBounds(bounds);\r\n                    }\r\n                    if (!points.length && this.zoomMyLocation) {\r\n                        this.map.setZoom(this.map.getZoom() - 8);\r\n                    }\r\n                });\r\n            }, 100);\r\n        }\r\n        onReload() {\r\n            this.setMapOnAll(null);\r\n            this.markers = [];\r\n            this.loadData();\r\n        }\r\n        onPlaceTouched(place) {\r\n            this.navigateToRelative('../' + place.id + '/' + place.slug);\r\n        }\r\n        onSearchButtonTapped() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                if (!this.mapInitialized)\r\n                    return;\r\n                this.removeActiveInfoWindow();\r\n                const bounds = this.map.getBounds();\r\n                this.params.bounds = [{\r\n                        latitude: bounds.getSouthWest().lat(),\r\n                        longitude: bounds.getSouthWest().lng(),\r\n                    }, {\r\n                        latitude: bounds.getNorthEast().lat(),\r\n                        longitude: bounds.getNorthEast().lng()\r\n                    }];\r\n                this.zoomMyLocation = false;\r\n                yield this.showLoadingView({ showOverlay: false });\r\n                this.onReload();\r\n            });\r\n        }\r\n        updateIonContentStylePadding() {\r\n            let style = '--padding-bottom: 0';\r\n            if ((this.isCordova || this.isMobile) && this.bottomDrawerConfig.state === DrawerState.Docked) {\r\n                const toolBarHeight = this.isAndroid ? 56 : 48;\r\n                const padding = this.bottomDrawerConfig.dockedHeight - toolBarHeight;\r\n                style = `--padding-bottom: ${padding}px`;\r\n            }\r\n            this.ionContentStylePadding = this.sanitizer.bypassSecurityTrustStyle(style);\r\n        }\r\n        onBottomDrawerTouched() {\r\n            if (this.bottomDrawerConfig.state === DrawerState.Docked) {\r\n                this.bottomDrawerConfig.state = DrawerState.Top;\r\n            }\r\n            else {\r\n                this.bottomDrawerConfig.state = DrawerState.Docked;\r\n            }\r\n        }\r\n        onPlaceHover(place) {\r\n            const infoWindow = this.placeToInfoWindow.get(place.id);\r\n            infoWindow.open();\r\n        }\r\n        removeActiveInfoWindow() {\r\n            if (this.activeInfoWindow) {\r\n                this.activeInfoWindow.destroy();\r\n                this.activeInfoWindow = null;\r\n            }\r\n        }\r\n        showInfoWindow(place, event) {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                event.stopPropagation();\r\n                if (this.bottomDrawerConfig.state === DrawerState.Top) {\r\n                    const infoWindow = this.placeToInfoWindow.get(place.id);\r\n                    infoWindow.open();\r\n                    this.setBottomDrawerState(DrawerState.Docked);\r\n                    setTimeout(() => {\r\n                        this.map.setCenter({\r\n                            lat: place.location.latitude,\r\n                            lng: place.location.longitude\r\n                        });\r\n                        this.map.setZoom(14);\r\n                    }, 600);\r\n                }\r\n                else {\r\n                    this.bottomDrawerConfig.state = DrawerState.Top;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    MapPage.ɵfac = function MapPage_Factory(t) { return new (t || MapPage)(core[\"Pb\" /* ɵɵdirectiveInject */](core[\"t\" /* Injector */]), core[\"Pb\" /* ɵɵdirectiveInject */](platform_browser[\"b\" /* DomSanitizer */]), core[\"Pb\" /* ɵɵdirectiveInject */](core[\"B\" /* NgZone */]), core[\"Pb\" /* ɵɵdirectiveInject */](core[\"k\" /* ComponentFactoryResolver */]), core[\"Pb\" /* ɵɵdirectiveInject */](local_storage[\"a\" /* LocalStorage */]), core[\"Pb\" /* ɵɵdirectiveInject */](place_service[\"a\" /* Place */]), core[\"Pb\" /* ɵɵdirectiveInject */](common[\"i\" /* Location */]), core[\"Pb\" /* ɵɵdirectiveInject */](geolocation_service[\"a\" /* GeolocationService */])); };\r\n    MapPage.ɵcmp = core[\"Jb\" /* ɵɵdefineComponent */]({ type: MapPage, selectors: [[\"map-page\"]], viewQuery: function MapPage_Query(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Kc\" /* ɵɵviewQuery */](ionic_angular[\"P\" /* IonSearchbar */], 3);\r\n                core[\"Kc\" /* ɵɵviewQuery */](map_c0, 3);\r\n            }\r\n            if (rf & 2) {\r\n                let _t;\r\n                core[\"tc\" /* ɵɵqueryRefresh */](_t = core[\"ec\" /* ɵɵloadQuery */]()) && (ctx.searchBar = _t.first);\r\n                core[\"tc\" /* ɵɵqueryRefresh */](_t = core[\"ec\" /* ɵɵloadQuery */]()) && (ctx.mapElement = _t.first);\r\n            }\r\n        }, features: [core[\"Ab\" /* ɵɵInheritDefinitionFeature */]], decls: 27, vars: 18, consts: [[1, \"ion-no-border\"], [\"color\", \"primary\", \"fixed\", \"\"], [\"slot\", \"start\"], [\"inputmode\", \"search\", \"mode\", \"ios\", 1, \"text-small\", 3, \"placeholder\", \"ionInput\", \"ionCancel\", \"ionClear\"], [\"no-bounce\", \"\"], [\"slot\", \"fixed\", 2, \"left\", \"0\", \"right\", \"0\"], [\"fixed\", \"\", 4, \"ngIf\"], [\"fixed\", \"\", 1, \"fullscreen\"], [1, \"fullscreen\", \"ion-justify-content-center\"], [\"size\", \"6\", 1, \"fullscreen\", \"hide-xs-up\", \"show-lg-up\"], [\"icon\", \"alert-circle-outline\", 3, \"text\", 4, \"ngIf\"], [\"icon\", \"map\", 3, \"text\", 4, \"ngIf\"], [\"class\", \"flex-center\", 4, \"ngIf\"], [\"class\", \"scroll\", 4, \"ngIf\"], [\"size-xs\", \"12\", \"size-lg\", \"6\"], [1, \"map\"], [\"map\", \"\"], [1, \"hide-lg-up\", 3, \"state\", \"minimumHeight\", \"dockedHeight\", \"shouldBounce\", \"distanceTop\", \"disableDrag\", \"transition\", \"stateChange\", \"click\"], [\"slot\", \"fixed\"], [\"slot\", \"icon-only\", 3, \"name\"], [1, \"drawer-content\"], [\"button\", \"\", \"lines\", \"none\", \"detail\", \"false\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"fixed\", \"\"], [\"lines\", \"none\", 1, \"shadow\"], [\"class\", \"hover\", \"button\", \"\", \"detail\", \"false\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", \"detail\", \"false\", 1, \"hover\", 3, \"click\"], [\"color\", \"dark\"], [1, \"link\", \"bold\", \"text-medium\"], [\"icon\", \"alert-circle-outline\", 3, \"text\"], [\"icon\", \"map\", 3, \"text\"], [1, \"flex-center\"], [1, \"scroll\"], [\"button\", \"\", \"lines\", \"none\", \"detail\", \"false\", 3, \"routerLink\", \"mouseenter\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", \"lines\", \"none\", \"detail\", \"false\", 3, \"routerLink\", \"mouseenter\"], [\"slot\", \"start\", 4, \"ngIf\"], [1, \"bold\", \"no-margin\", \"ellipsis\", \"link\"], [\"color\", \"medium\"], [1, \"no-margin\"], [\"class\", \"rating\", 3, \"rate\", \"readOnly\", \"max\", \"theme\", 4, \"ngIf\"], [\"slot\", \"end\"], [\"color\", \"primary\"], [1, \"bold\"], [\"src-fallback\", \"./assets/img/placeholder.png\", 3, \"alt\", \"src\"], [1, \"rating\", 3, \"rate\", \"readOnly\", \"max\", \"theme\"], [\"button\", \"\", \"lines\", \"none\", \"detail\", \"false\", 3, \"click\"]], template: function MapPage_Template(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Vb\" /* ɵɵelementStart */](0, \"ion-header\", 0);\r\n                core[\"Vb\" /* ɵɵelementStart */](1, \"ion-toolbar\", 1);\r\n                core[\"Vb\" /* ɵɵelementStart */](2, \"ion-buttons\", 2);\r\n                core[\"Qb\" /* ɵɵelement */](3, \"ion-back-button\");\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](4, \"ion-searchbar\", 3);\r\n                core[\"dc\" /* ɵɵlistener */](\"ionInput\", function MapPage_Template_ion_searchbar_ionInput_4_listener($event) { return ctx.onSearchAddress($event); })(\"ionCancel\", function MapPage_Template_ion_searchbar_ionCancel_4_listener() { return ctx.onClearSearchAddress(); })(\"ionClear\", function MapPage_Template_ion_searchbar_ionClear_4_listener() { return ctx.onClearSearchAddress(); });\r\n                core[\"gc\" /* ɵɵpipe */](5, \"translate\");\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](6, \"ion-content\", 4);\r\n                core[\"Vb\" /* ɵɵelementStart */](7, \"div\", 5);\r\n                core[\"Ec\" /* ɵɵtemplate */](8, MapPage_ion_grid_8_Template, 3, 2, \"ion-grid\", 6);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](9, \"ion-grid\", 7);\r\n                core[\"Vb\" /* ɵɵelementStart */](10, \"ion-row\", 8);\r\n                core[\"Vb\" /* ɵɵelementStart */](11, \"ion-col\", 9);\r\n                core[\"Ec\" /* ɵɵtemplate */](12, MapPage_empty_view_12_Template, 2, 3, \"empty-view\", 10);\r\n                core[\"Ec\" /* ɵɵtemplate */](13, MapPage_empty_view_13_Template, 2, 3, \"empty-view\", 11);\r\n                core[\"Ec\" /* ɵɵtemplate */](14, MapPage_div_14_Template, 2, 0, \"div\", 12);\r\n                core[\"Ec\" /* ɵɵtemplate */](15, MapPage_ion_list_15_Template, 2, 2, \"ion-list\", 13);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](16, \"ion-col\", 14);\r\n                core[\"Qb\" /* ɵɵelement */](17, \"div\", 15, 16);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](19, \"ion-bottom-drawer\", 17);\r\n                core[\"dc\" /* ɵɵlistener */](\"stateChange\", function MapPage_Template_ion_bottom_drawer_stateChange_19_listener($event) { return ctx.bottomDrawerConfig.state = $event; })(\"click\", function MapPage_Template_ion_bottom_drawer_click_19_listener() { return ctx.onBottomDrawerTouched(); });\r\n                core[\"Vb\" /* ɵɵelementStart */](20, \"ion-toolbar\", 18);\r\n                core[\"Vb\" /* ɵɵelementStart */](21, \"ion-buttons\", 2);\r\n                core[\"Vb\" /* ɵɵelementStart */](22, \"ion-button\");\r\n                core[\"Qb\" /* ɵɵelement */](23, \"ion-icon\", 19);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](24, \"div\", 20);\r\n                core[\"Vb\" /* ɵɵelementStart */](25, \"ion-list\");\r\n                core[\"Ec\" /* ɵɵtemplate */](26, MapPage_ion_item_26_Template, 14, 5, \"ion-item\", 21);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n            }\r\n            if (rf & 2) {\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"lc\" /* ɵɵproperty */](\"placeholder\", core[\"hc\" /* ɵɵpipeBind1 */](5, 16, \"ENTER_ADDRESS\"));\r\n                core[\"Db\" /* ɵɵadvance */](2);\r\n                core[\"Eb\" /* ɵɵattribute */](\"style\", ctx.ionContentStylePadding, core[\"yc\" /* ɵɵsanitizeStyle */]);\r\n                core[\"Db\" /* ɵɵadvance */](2);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.suggestions.length);\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isErrorViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isEmptyViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isLoadingViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.places.length);\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"lc\" /* ɵɵproperty */](\"state\", ctx.bottomDrawerConfig.state)(\"minimumHeight\", ctx.bottomDrawerConfig.minimumHeight)(\"dockedHeight\", ctx.bottomDrawerConfig.dockedHeight)(\"shouldBounce\", ctx.bottomDrawerConfig.shouldBounce)(\"distanceTop\", ctx.bottomDrawerConfig.distanceTop)(\"disableDrag\", ctx.bottomDrawerConfig.disableDrag)(\"transition\", ctx.bottomDrawerConfig.transition);\r\n                core[\"Db\" /* ɵɵadvance */](4);\r\n                core[\"lc\" /* ɵɵproperty */](\"name\", ctx.bottomDrawerConfig.state === 2 ? \"chevron-down\" : \"chevron-up\");\r\n                core[\"Db\" /* ɵɵadvance */](3);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngForOf\", ctx.places);\r\n            }\r\n        }, directives: [ionic_angular[\"w\" /* IonHeader */], ionic_angular[\"db\" /* IonToolbar */], ionic_angular[\"l\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"P\" /* IonSearchbar */], ionic_angular[\"nb\" /* TextValueAccessor */], ionic_angular[\"r\" /* IonContent */], common[\"m\" /* NgIf */], ionic_angular[\"v\" /* IonGrid */], ionic_angular[\"O\" /* IonRow */], ionic_angular[\"q\" /* IonCol */], ion_bottom_drawer_IonBottomDrawerComponent, ionic_angular[\"k\" /* IonButton */], ionic_angular[\"x\" /* IonIcon */], ionic_angular[\"F\" /* IonList */], common[\"l\" /* NgForOf */], ionic_angular[\"B\" /* IonItem */], ionic_angular[\"E\" /* IonLabel */], ionic_angular[\"Y\" /* IonText */], empty_view[\"a\" /* EmptyView */], ionic_angular[\"U\" /* IonSpinner */], ionic_angular[\"lb\" /* RouterLinkDelegate */], router[\"i\" /* RouterLink */], ionic_angular[\"ab\" /* IonThumbnail */], ngx_img_fallback[\"a\" /* ImgFallbackDirective */], ngx_bar_rating[\"a\" /* BarRating */]], pipes: [ngx_translate_core[\"c\" /* TranslatePipe */]], styles: [\"ion-content[_ngcontent-%COMP%]{--overflow:hidden}ion-grid[_ngcontent-%COMP%]{padding:0}ion-buttons[_ngcontent-%COMP%]{align-self:center}ion-searchbar[_ngcontent-%COMP%]{padding:0 8px!important}.map[_ngcontent-%COMP%]{width:100%;height:100%}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0}ion-list.scroll[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:120px;height:120px}\"], data: { animation: [\r\n                Object(animations[\"l\" /* trigger */])('staggerIn', [\r\n                    Object(animations[\"k\" /* transition */])('* => *', [\r\n                        Object(animations[\"f\" /* query */])(':enter', Object(animations[\"j\" /* style */])({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\r\n                        Object(animations[\"f\" /* query */])(':enter', Object(animations[\"h\" /* stagger */])('100ms', [Object(animations[\"e\" /* animate */])('300ms', Object(animations[\"j\" /* style */])({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\r\n                    ])\r\n                ])\r\n            ] } });\r\n    return MapPage;\r\n})();\r\n\n// EXTERNAL MODULE: ./src/app/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"d2mR\");\n\n// CONCATENATED MODULE: ./src/app/pages/map/map.module.ts\n\r\n\r\n\r\n\r\n\r\n\r\nlet map_module_MapPageModule = /*@__PURE__*/ (() => {\r\n    class MapPageModule {\r\n    }\r\n    MapPageModule.ɵmod = core[\"Nb\" /* ɵɵdefineNgModule */]({ type: MapPageModule });\r\n    MapPageModule.ɵinj = core[\"Mb\" /* ɵɵdefineInjector */]({ factory: function MapPageModule_Factory(t) { return new (t || MapPageModule)(); }, imports: [[\r\n                shared_module[\"a\" /* SharedModule */],\r\n                ion_bottom_drawer_IonBottomDrawerModule,\r\n                router[\"j\" /* RouterModule */].forChild([\r\n                    {\r\n                        path: '',\r\n                        component: map_MapPage\r\n                    }\r\n                ])\r\n            ]] });\r\n    return MapPageModule;\r\n})();\r\n\n\n/***/ }),\n\n/***/ \"C+d3\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [module,exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else { var o; }}(this,function(t,e){\"use strict\";function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){t&&e&&Object.keys(e).forEach(function(o){t[o]=e[o]})}function r(t){var e={};return n(e,f),n(e,t),Object.keys(f).forEach(function(t){var o=f[t];if(\"object\"===(void 0===o?\"undefined\":d(o))){var i={};n(i,o),n(i,e[t]),e[t]=i}}),e}function h(t,e){var o=/^(-{0,1}\\.{0,1}\\d+(\\.\\d+)?)[\\s|\\.]*(\\w*)$/;if(t&&o.test(t)){var i=o.exec(t);return{value:1*i[1],units:i[3]||\"px\",original:t}}return e?h(e):{original:e}}function p(t,e){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);e&&(\"string\"==typeof e?t.innerHTML=e:t.appendChild(e))}}function a(t){return\"top\"===t?\"bottom\":\"bottom\"===t?\"top\":\"left\"===t?\"right\":\"right\"===t?\"left\":t}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){if(void 0!==t&&null!==t){if(t instanceof google.maps.LatLng)return t;if(void 0!==t.lat&&void 0!==t.lng)return new google.maps.LatLng(t)}return null}Object.defineProperty(e,\"__esModule\",{value:!0});var _=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},u={h:\"0px\",v:\"3px\",blur:\"6px\",spread:\"0px\",color:\"#000\"},f={placement:\"top\",pointer:!0,openOnMarkerClick:!0,closeOnMapClick:!0,closeWhenOthersOpen:!1,showCloseButton:!0,panOnOpen:!0,edgeOffset:{top:20,right:20,bottom:20,left:20}},m=function(t){function e(t){o(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(\"undefined\"==typeof google)return console.warn(\"Snazzy Info Window: Google Maps is not defined!\"),i(s);s._html=null,s._opts=r(t),s._callbacks=s._opts.callbacks||{},s._marker=s._opts.marker,s._map=s._opts.map,s._position=c(s._opts.position),s._isOpen=!1,s._listeners=[],s._marker&&s._opts.openOnMarkerClick&&s.trackListener(google.maps.event.addListener(s._marker,\"click\",function(){s.getMap()||s.open()}),!0),s._position&&!s._opts.offset&&(s._opts.offset={top:\"0px\",left:\"0px\"});var n=t.placement||s._opts.position;return(\"string\"==typeof n||n instanceof String)&&(n=n.toLowerCase()),s._opts.placement=\"top\"!==n&&\"bottom\"!==n&&\"left\"!==n&&\"right\"!==n?f.placement:n,n=s._opts.position,void 0===n||null===n||\"string\"==typeof n||n instanceof String||(s._opts.position=n),void 0!==s._opts.border&&s._opts.border!==!0||(s._opts.border={}),void 0===s._opts.pointer&&(s._opts.pointer=f.pointer),void 0!==s._opts.shadow&&s._opts.shadow!==!0||(s._opts.shadow={}),s}return s(e,t),_(e,[{key:\"activateCallback\",value:function(t){var e=this._callbacks[t];return e?e.apply(this):void 0}},{key:\"trackListener\",value:function(t,e){this._listeners.push({listener:t,persistent:e})}},{key:\"clearListeners\",value:function(t){this._listeners&&(this._listeners.forEach(function(e){!t&&e.persistent||(google.maps.event.removeListener(e.listener),e.listener=null)}),this._listeners=this._listeners.filter(function(t){return null!=t.listener}))}},{key:\"isOpen\",value:function(){return this._isOpen}},{key:\"open\",value:function(){var t=this.activateCallback(\"beforeOpen\");(void 0===t||t)&&(this._marker?this.setMap(this._marker.getMap()):this._map&&this._position&&this.setMap(this._map))}},{key:\"close\",value:function(){var t=this.activateCallback(\"beforeClose\");(void 0===t||t)&&(this.clearListeners(),this.setMap(null))}},{key:\"destroy\",value:function(){this.getMap()&&this.setMap(null),this.clearListeners(!0)}},{key:\"setContent\",value:function(t){this._opts.content=t,this._html&&this._html.content&&p(this._html.content,t)}},{key:\"setPosition\",value:function(t){this._position=c(t),this._isOpen&&this._position&&(this.draw(),this.resize(),this.reposition())}},{key:\"setWrapperClass\",value:function(t){if(this._html&&this._html.wrapper){var e=this._html.wrapper;e.className=\"si-wrapper-\"+this._opts.placement,this._opts.border&&(e.className+=\" si-has-border\"),t&&(e.className+=\" \"+t)}this._opts.wrapperClass=t}},{key:\"getWrapper\",value:function(){return this._html?this._html.wrapper:null}},{key:\"draw\",value:function(){if(this.getMap()&&this._html&&(this._marker||this._position)){var t=this._opts.offset;t&&(t.left&&(this._html.wrapper.style.marginLeft=t.left),t.top&&(this._html.wrapper.style.marginTop=t.top));var e=this._opts.backgroundColor;if(e&&(this._html.contentWrapper.style.backgroundColor=e,this._opts.pointer&&(this._html.pointerBg.style[\"border\"+l(this._opts.placement)+\"Color\"]=e)),this._opts.padding&&(this._html.contentWrapper.style.padding=this._opts.padding,this._opts.shadow&&(this._html.shadowFrame.style.padding=this._opts.padding)),this._opts.borderRadius&&(this._html.contentWrapper.style.borderRadius=this._opts.borderRadius,this._opts.shadow&&(this._html.shadowFrame.style.borderRadius=this._opts.borderRadius)),this._opts.fontSize&&(this._html.wrapper.style.fontSize=this._opts.fontSize),this._opts.fontColor&&(this._html.contentWrapper.style.color=this._opts.fontColor),this._opts.pointer&&this._opts.pointer!==!0&&(this._opts.shadow&&(this._html.shadowPointer.style.width=this._opts.pointer,this._html.shadowPointer.style.height=this._opts.pointer),this._html.pointerBorder&&(this._html.pointerBorder.style.borderWidth=this._opts.pointer),this._html.pointerBg.style.borderWidth=this._opts.pointer),this._opts.border){var o=0;if(void 0!==this._opts.border.width&&(o=h(this._opts.border.width,\"0px\"),this._html.contentWrapper.style.borderWidth=o.value+o.units),o=Math.round((this._html.contentWrapper.offsetWidth-this._html.contentWrapper.clientWidth)/2),o=h(o+\"px\",\"0px\"),this._opts.pointer){var i=Math.min(this._html.pointerBorder.offsetHeight,this._html.pointerBorder.offsetWidth);i=h(i+\"px\",\"0px\");var s=Math.round(o.value*(1.41421356237-1));s=Math.min(s,i.value),this._html.pointerBg.style.borderWidth=i.value-s+i.units;var n=l(a(this._opts.placement));this._html.pointerBg.style[\"margin\"+n]=s+o.units,this._html.pointerBg.style[this._opts.placement]=-o.value+o.units}var r=this._opts.border.color;r&&(this._html.contentWrapper.style.borderColor=r,this._html.pointerBorder&&(this._html.pointerBorder.style[\"border\"+l(this._opts.placement)+\"Color\"]=r))}if(this._opts.shadow){var p=this._opts.shadow,c=function(t){var e=p[t];return void 0!==e&&null!=e};if(c(\"h\")||c(\"v\")||c(\"blur\")||c(\"spread\")||c(\"color\")){var _=h(p.h,u.h),d=h(p.v,u.v),f=h(p.blur,u.blur),m=h(p.spread,u.spread),g=p.color||u.color,v=function(t,e){return t+\" \"+e+\" \"+f.original+\" \"+m.original+\" \"+g};this._html.shadowFrame.style.boxShadow=v(_.original,d.original);var y=.7071067811865474*(_.value-d.value)+_.units,w=.7071067811865474*(_.value+d.value)+d.units;this._html.shadowPointerInner&&(this._html.shadowPointerInner.style.boxShadow=v(y,w))}this._opts.shadow.opacity&&(this._html.shadowWrapper.style.opacity=this._opts.shadow.opacity)}var b=this.getProjection().fromLatLngToDivPixel(this._position||this._marker.position);b&&(this._html.floatWrapper.style.top=Math.floor(b.y)+\"px\",this._html.floatWrapper.style.left=Math.floor(b.x)+\"px\"),this._isOpen||(this._isOpen=!0,this.resize(),this.reposition(),this.activateCallback(\"afterOpen\"),google.maps.event.trigger(this.getMap(),\"snazzy-info-window-opened\",this))}}},{key:\"onAdd\",value:function(){var t=this;if(!this._html){var e=function(t,e){if(t&&e)for(var o=0;o<e.length;o++){var i=e[o];i&&(t.className&&(t.className+=\" \"),t.className+=\"si-\"+i)}},o=function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var s=document.createElement(\"div\");return e(s,o),s};if(this._html={},this._html.wrapper=o(),this.setWrapperClass(this._opts.wrapperClass),this._opts.shadow&&(this._html.shadowWrapper=o(\"shadow-wrapper-\"+this._opts.placement),this._html.shadowFrame=o(\"frame\",\"shadow-frame\"),this._html.shadowWrapper.appendChild(this._html.shadowFrame),this._opts.pointer&&(this._html.shadowPointer=o(\"shadow-pointer-\"+this._opts.placement),this._html.shadowPointerInner=o(\"shadow-inner-pointer-\"+this._opts.placement),this._html.shadowPointer.appendChild(this._html.shadowPointerInner),this._html.shadowWrapper.appendChild(this._html.shadowPointer)),this._html.wrapper.appendChild(this._html.shadowWrapper)),this._html.contentWrapper=o(\"frame\",\"content-wrapper\"),this._html.content=o(\"content\"),this._opts.content&&p(this._html.content,this._opts.content),this._opts.showCloseButton){if(this._opts.closeButtonMarkup){var i=document.createElement(\"div\");p(i,this._opts.closeButtonMarkup),this._html.closeButton=i.firstChild}else this._html.closeButton=document.createElement(\"button\"),this._html.closeButton.setAttribute(\"type\",\"button\"),this._html.closeButton.innerHTML=\"&#215;\",e(this._html.closeButton,[\"close-button\"]);this._html.contentWrapper.appendChild(this._html.closeButton)}this._html.contentWrapper.appendChild(this._html.content),this._html.wrapper.appendChild(this._html.contentWrapper),this._opts.pointer&&(this._opts.border&&(this._html.pointerBorder=o(\"pointer-\"+this._opts.placement,\"pointer-border-\"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBorder)),this._html.pointerBg=o(\"pointer-\"+this._opts.placement,\"pointer-bg-\"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBg)),this._html.floatWrapper=o(\"float-wrapper\"),this._html.floatWrapper.appendChild(this._html.wrapper),this.getPanes().floatPane.appendChild(this._html.floatWrapper);var s=this.getMap();this.clearListeners(),this._opts.closeOnMapClick&&this.trackListener(google.maps.event.addListener(s,\"click\",function(){t.close()})),this._opts.closeWhenOthersOpen&&this.trackListener(google.maps.event.addListener(s,\"snazzy-info-window-opened\",function(e){t!==e&&t.close()})),this._previousWidth=null,this._previousHeight=null,this.trackListener(google.maps.event.addListener(s,\"bounds_changed\",function(){var e=s.getDiv(),o=e.offsetWidth,i=e.offsetHeight,n=t._previousWidth,r=t._previousHeight;null!==n&&null!==r&&n===o&&r===i||(t._previousWidth=o,t._previousHeight=i,t.resize())})),this._marker&&this.trackListener(google.maps.event.addListener(this._marker,\"position_changed\",function(){t.draw()})),this._opts.showCloseButton&&!this._opts.closeButtonMarkup&&this.trackListener(google.maps.event.addDomListener(this._html.closeButton,\"click\",function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),t.close()}));[\"click\",\"dblclick\",\"rightclick\",\"contextmenu\",\"drag\",\"dragend\",\"dragstart\",\"mousedown\",\"mouseout\",\"mouseover\",\"mouseup\",\"touchstart\",\"touchend\",\"touchmove\",\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"].forEach(function(e){t.trackListener(google.maps.event.addDomListener(t._html.wrapper,e,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))}),this.activateCallback(\"open\")}}},{key:\"onRemove\",value:function(){if(this.activateCallback(\"close\"),this._html){var t=this._html.floatWrapper.parentElement;t&&t.removeChild(this._html.floatWrapper),this._html=null}this._isOpen=!1,this.activateCallback(\"afterClose\")}},{key:\"getMapInnerBounds\",value:function(){var t=this.getMap().getDiv().getBoundingClientRect(),e={top:t.top+this._opts.edgeOffset.top,right:t.right-this._opts.edgeOffset.right,bottom:t.bottom-this._opts.edgeOffset.bottom,left:t.left+this._opts.edgeOffset.left};return e.width=e.right-e.left,e.height=e.bottom-e.top,e}},{key:\"reposition\",value:function(){if(this._opts.panOnOpen&&this._html){var t=this.getMapInnerBounds(),e=this._html.wrapper.getBoundingClientRect(),o=0,i=0;t.left>=e.left?o=e.left-t.left:t.right<=e.right&&(o=e.left-(t.right-e.width)),t.top>=e.top?i=e.top-t.top:t.bottom<=e.bottom&&(i=e.top-(t.bottom-e.height)),0===o&&0===i||this.getMap().panBy(o,i)}}},{key:\"resize\",value:function(){if(this._html){var t=this.getMapInnerBounds(),e=t.width;void 0!==this._opts.maxWidth&&(e=Math.min(e,this._opts.maxWidth)),e-=this._html.wrapper.offsetWidth-this._html.content.offsetWidth,this._html.content.style.maxWidth=e+\"px\";var o=t.height;void 0!==this._opts.maxHeight&&(o=Math.min(o,this._opts.maxHeight)),o-=this._html.wrapper.offsetHeight-this._html.content.offsetHeight,this._html.content.style.maxHeight=o+\"px\"}}}]),e}(function(){return\"undefined\"!=typeof google?google.maps.OverlayView:function(){}}());e.default=m,t.exports=e.default});\r\n//# sourceMappingURL=snazzy-info-window.min.js.map\r\n\n\n/***/ })\n\n}]);","inputSourceMap":null}