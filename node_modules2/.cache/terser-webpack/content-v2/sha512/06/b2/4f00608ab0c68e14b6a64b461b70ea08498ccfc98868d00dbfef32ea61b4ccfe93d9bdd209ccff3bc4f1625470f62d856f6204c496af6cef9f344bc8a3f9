{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{rJGU:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"PlaceUserListPageModule\",function(){return place_user_list_module_PlaceUserListPageModule});var router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),ionic_angular=__webpack_require__(\"TEn/\"),Subject=__webpack_require__(\"XNiG\"),merge=__webpack_require__(\"VRyK\"),base_page=__webpack_require__(\"NV1z\"),animations=__webpack_require__(\"R0Ic\"),currency_global=__webpack_require__(\"RKXm\"),pay_modal_page=__webpack_require__(\"+rAg\"),core=__webpack_require__(\"fXoL\"),event_bus_service=__webpack_require__(\"pqyF\"),app_config_service=__webpack_require__(\"JvtB\"),services_package=__webpack_require__(\"6Ip3\"),user_package=__webpack_require__(\"iNvR\"),place_service=__webpack_require__(\"qOnq\"),common=__webpack_require__(\"ofXK\"),empty_view=__webpack_require__(\"4ro/\"),ngx_skeleton_loader=__webpack_require__(\"xJkR\"),place_card_component=__webpack_require__(\"kmqs\"),ngx_translate_core=__webpack_require__(\"sYmb\");function PlaceUserListPage_empty_view_18_Template(rf,ctx){1&rf&&(core.Qb(0,\"empty-view\",20),core.gc(1,\"translate\")),2&rf&&core.lc(\"text\",core.hc(1,1,\"ERROR_NETWORK\"))}function PlaceUserListPage_empty_view_19_Template(rf,ctx){1&rf&&(core.Qb(0,\"empty-view\",21),core.gc(1,\"translate\")),2&rf&&core.lc(\"text\",core.hc(1,1,\"EMPTY_USER_PLACES\"))}const _c0=function(){return{width:\"100%\",height:\"200px\",\"border-radius\":\"0\"}};function PlaceUserListPage_ion_row_24_ion_col_1_Template(rf,ctx){1&rf&&(core.Vb(0,\"ion-col\",22),core.Qb(1,\"ngx-skeleton-loader\",23),core.Ub()),2&rf&&(core.Db(1),core.lc(\"theme\",core.oc(1,_c0)))}function PlaceUserListPage_ion_row_24_Template(rf,ctx){if(1&rf&&(core.Vb(0,\"ion-row\"),core.Ec(1,PlaceUserListPage_ion_row_24_ion_col_1_Template,2,2,\"ion-col\",18),core.Ub()),2&rf){const ctx_r3=core.fc();core.Db(1),core.lc(\"ngForOf\",ctx_r3.skeletonArray)}}function PlaceUserListPage_ion_col_26_Template(rf,ctx){if(1&rf){const _r10=core.Wb();core.Vb(0,\"ion-col\",22),core.Vb(1,\"app-place-card\",24),core.dc(\"click\",function(){core.vc(_r10);const place_r8=ctx.$implicit;return core.fc().onPlaceTouched(place_r8)})(\"onPromoteButtonTouched\",function($event){return core.vc(_r10),core.fc().onPromoteButtonTouched($event)}),core.Ub(),core.Ub()}if(2&rf){const place_r8=ctx.$implicit,ctx_r4=core.fc();core.Db(1),core.lc(\"place\",place_r8)(\"showStatus\",!0)(\"extraParams\",ctx_r4.params)(\"showPromoteButton\",ctx_r4.isPromotedListingsEnabled)(\"customObservable\",ctx_r4.loadAndScroll)}}function PlaceUserListPage_ion_infinite_scroll_27_Template(rf,ctx){if(1&rf){const _r13=core.Wb();core.Vb(0,\"ion-infinite-scroll\",25),core.dc(\"ionInfinite\",function($event){return core.vc(_r13),core.fc().onLoadMore($event)}),core.Qb(1,\"ion-infinite-scroll-content\"),core.Ub()}}const _c1=function(){return[\"./add\"]};let place_user_list_PlaceUserListPage=(()=>{class PlaceUserListPage extends base_page.a{constructor(injector,eventBusService,appConfigService,packageService,userPackageService,currencyGlobalPipe,placeService){super(injector),this.eventBusService=eventBusService,this.appConfigService=appConfigService,this.packageService=packageService,this.userPackageService=userPackageService,this.currencyGlobalPipe=currencyGlobalPipe,this.placeService=placeService,this.params={},this.places=[]}ngOnInit(){this.setupObservables(),this.setupEvents(),this.params.unit=this.preference.unit,this.params.limit=20,this.params.page=0}ngOnDestroy(){}setupObservables(){this.contentLoaded=new Subject.a,this.loadAndScroll=Object(merge.a)(this.container.ionScroll,this.contentLoaded)}onContentLoaded(){setTimeout(()=>{this.contentLoaded.next()},300)}setupEvents(){this.eventBusService.on(\"place:add\",()=>{this.onReload()})}ionViewDidEnter(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){this.places.length?this.onContentLoaded():(yield this.showLoadingView({showOverlay:!1}),this.loadData());const title=yield this.getTrans(\"PLACES\");this.setPageTitle(title),this.setMetaTags({title:title})})}enableMenuSwipe(){return!1}presentPayModalPage(place,userPackage){return Object(tslib_es6.a)(this,void 0,void 0,function*(){yield this.showLoadingView({showOverlay:!0});const modal=yield this.modalCtrl.create({component:pay_modal_page.a,componentProps:{place:place,userPackage:userPackage},cssClass:\"pay-modal\"});return yield modal.present(),yield this.dismissLoadingView(),yield modal.onDidDismiss()})}onPromoteButtonTouched(place){return Object(tslib_es6.a)(this,void 0,void 0,function*(){try{yield this.showLoadingView({showOverlay:!0});const options=(yield this.packageService.load({type:\"promote_listing\"})).reduce((accumulator,item)=>{const formattedPrice=this.currencyGlobalPipe.transform(item.finalPrice);return accumulator[item.id]=`\\n          <span>${item.name} - ${formattedPrice}</span>\\n          <p class=\"ion-margin-horizontal text-small\">${item.description}</p>\\n        `,accumulator},{});yield this.dismissLoadingView();const str=yield this.getTrans([\"PROMOTE_LISTING\",\"CONFIRM\",\"CANCEL\"]),{value:packageId}=yield this.showSweetRadio(str.PROMOTE_LISTING,str.CONFIRM,str.CANCEL,options);if(packageId){yield this.showLoadingView({showOverlay:!0});const userPackage=yield this.userPackageService.create(packageId);yield this.dismissLoadingView();const{data:data}=yield this.presentPayModalPage(place,userPackage);data&&this.onReload()}}catch(_a){this.dismissLoadingView()}})}loadData(){return Object(tslib_es6.a)(this,void 0,void 0,function*(){try{const config=yield this.appConfigService.load();config&&(this.isPromotedListingsEnabled=config.places.enablePromotedListings);const places=yield this.placeService.loadUserPlaces(this.params);for(let place of places)this.places.push(place);this.onRefreshComplete(places),this.places.length?this.showContentView():this.showEmptyView(),this.onContentLoaded()}catch(err){this.showContentView(),this.onRefreshComplete();let message=yield this.getTrans(\"ERROR_NETWORK\");this.showToast(message)}})}onPlaceTouched(place){\"Approved\"===place.status&&this.navigateToRelative(\"./\"+place.id)}onLoadMore(event={}){this.infiniteScroll=event.target,this.params.page++,this.loadData()}onReload(event={}){this.refresher=event.target,this.places=[],this.params.page=0,this.loadData()}getStatusColor(status){return\"Pending\"===status?\"warning\":\"Approved\"===status?\"success\":\"Rejected\"===status?\"danger\":\"Expired\"===status?\"tertiary\":void console.log(\"no match found\")}}return PlaceUserListPage.ɵfac=function(t){return new(t||PlaceUserListPage)(core.Pb(core.t),core.Pb(event_bus_service.b),core.Pb(app_config_service.a),core.Pb(services_package.a),core.Pb(user_package.a),core.Pb(currency_global.a),core.Pb(place_service.a))},PlaceUserListPage.ɵcmp=core.Jb({type:PlaceUserListPage,selectors:[[\"place-user-list-page\"]],viewQuery:function(rf,ctx){if(1&rf&&core.Kc(ionic_angular.r,3),2&rf){let _t;core.tc(_t=core.ec())&&(ctx.container=_t.first)}},features:[core.Cb([currency_global.a]),core.Ab],decls:28,vars:22,consts:[[1,\"ion-no-border\"],[\"color\",\"primary\",\"fixed\",\"\"],[\"slot\",\"start\"],[\"defaultHref\",\"/1/profile\"],[\"slot\",\"end\"],[\"fill\",\"solid\",\"color\",\"secondary\",\"shape\",\"round\",1,\"hide-xs-up\",\"show-md-up\",3,\"routerLink\"],[1,\"bold\"],[\"scrollEvents\",\"true\",1,\"ion-padding\"],[\"container\",\"\"],[\"slot\",\"fixed\",3,\"ionRefresh\"],[3,\"pullingText\",\"refreshingText\"],[\"icon\",\"alert-circle-outline\",3,\"text\",4,\"ngIf\"],[\"icon\",\"pin\",3,\"text\",4,\"ngIf\"],[\"slot\",\"fixed\",\"vertical\",\"bottom\",\"horizontal\",\"end\",1,\"show-xs-up\",\"hide-md-up\"],[3,\"routerLink\"],[\"name\",\"add\"],[\"fixed\",\"\"],[4,\"ngIf\"],[\"size-xs\",\"12\",\"size-sm\",\"6\",\"size-md\",\"6\",\"size-lg\",\"4\",4,\"ngFor\",\"ngForOf\"],[3,\"ionInfinite\",4,\"ngIf\"],[\"icon\",\"alert-circle-outline\",3,\"text\"],[\"icon\",\"pin\",3,\"text\"],[\"size-xs\",\"12\",\"size-sm\",\"6\",\"size-md\",\"6\",\"size-lg\",\"4\"],[\"count\",\"1\",\"appearance\",\"circle\",3,\"theme\"],[3,\"place\",\"showStatus\",\"extraParams\",\"showPromoteButton\",\"customObservable\",\"click\",\"onPromoteButtonTouched\"],[3,\"ionInfinite\"]],template:function(rf,ctx){1&rf&&(core.Vb(0,\"ion-header\",0),core.Vb(1,\"ion-toolbar\",1),core.Vb(2,\"ion-buttons\",2),core.Qb(3,\"ion-back-button\",3),core.Ub(),core.Vb(4,\"ion-title\"),core.Gc(5),core.gc(6,\"translate\"),core.Ub(),core.Vb(7,\"ion-buttons\",4),core.Vb(8,\"ion-button\",5),core.Vb(9,\"span\",6),core.Gc(10),core.gc(11,\"translate\"),core.Ub(),core.Ub(),core.Ub(),core.Ub(),core.Ub(),core.Vb(12,\"ion-content\",7,8),core.Vb(14,\"ion-refresher\",9),core.dc(\"ionRefresh\",function($event){return ctx.onReload($event)}),core.Qb(15,\"ion-refresher-content\",10),core.gc(16,\"translate\"),core.gc(17,\"translate\"),core.Ub(),core.Ec(18,PlaceUserListPage_empty_view_18_Template,2,3,\"empty-view\",11),core.Ec(19,PlaceUserListPage_empty_view_19_Template,2,3,\"empty-view\",12),core.Vb(20,\"ion-fab\",13),core.Vb(21,\"ion-fab-button\",14),core.Qb(22,\"ion-icon\",15),core.Ub(),core.Ub(),core.Vb(23,\"ion-grid\",16),core.Ec(24,PlaceUserListPage_ion_row_24_Template,2,1,\"ion-row\",17),core.Vb(25,\"ion-row\"),core.Ec(26,PlaceUserListPage_ion_col_26_Template,2,5,\"ion-col\",18),core.Ub(),core.Ub(),core.Ec(27,PlaceUserListPage_ion_infinite_scroll_27_Template,2,0,\"ion-infinite-scroll\",19),core.Ub()),2&rf&&(core.Db(5),core.Ic(\" \",core.hc(6,12,\"MY_PLACES\"),\" \"),core.Db(3),core.lc(\"routerLink\",core.oc(20,_c1)),core.Db(2),core.Hc(core.hc(11,14,\"ADD_PLACE\")),core.Db(5),core.mc(\"pullingText\",core.hc(16,16,\"PULL_TO_REFRESH\")),core.mc(\"refreshingText\",core.hc(17,18,\"REFRESHING\")),core.Db(3),core.lc(\"ngIf\",ctx.isErrorViewVisible),core.Db(1),core.lc(\"ngIf\",ctx.isEmptyViewVisible),core.Db(2),core.lc(\"routerLink\",core.oc(21,_c1)),core.Db(3),core.lc(\"ngIf\",ctx.isLoadingViewVisible),core.Db(1),core.lc(\"@staggerIn\",ctx.places.length),core.Db(1),core.lc(\"ngForOf\",ctx.places),core.Db(1),core.lc(\"ngIf\",ctx.isContentViewVisible))},directives:[ionic_angular.w,ionic_angular.db,ionic_angular.l,ionic_angular.h,ionic_angular.i,ionic_angular.bb,ionic_angular.k,ionic_angular.lb,router.i,ionic_angular.r,ionic_angular.K,ionic_angular.L,common.m,ionic_angular.s,ionic_angular.t,ionic_angular.x,ionic_angular.v,ionic_angular.O,common.l,empty_view.a,ionic_angular.q,ngx_skeleton_loader.a,place_card_component.a,ionic_angular.y,ionic_angular.z],pipes:[ngx_translate_core.c],styles:[\"ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light-tint)}\"],data:{animation:[Object(animations.l)(\"staggerIn\",[Object(animations.k)(\"* => *\",[Object(animations.f)(\":enter\",Object(animations.j)({opacity:0,transform:\"translate3d(0,10px,0)\"}),{optional:!0}),Object(animations.f)(\":enter\",Object(animations.h)(\"100ms\",[Object(animations.e)(\"300ms\",Object(animations.j)({opacity:1,transform:\"translate3d(0,0,0)\"}))]),{optional:!0})])])]}}),PlaceUserListPage})();var shared_module=__webpack_require__(\"d2mR\"),pay_modal_module=__webpack_require__(\"vY95\");let place_user_list_module_PlaceUserListPageModule=(()=>{class PlaceUserListPageModule{}return PlaceUserListPageModule.ɵmod=core.Nb({type:PlaceUserListPageModule}),PlaceUserListPageModule.ɵinj=core.Mb({factory:function(t){return new(t||PlaceUserListPageModule)},imports:[[shared_module.a,pay_modal_module.a,router.j.forChild([{path:\"\",component:place_user_list_PlaceUserListPage}])]]}),PlaceUserListPageModule})()}}]);","name":"73-es2015.f6ac9dabb296ca6d756b.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[73],{\n\n/***/ \"rJGU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"PlaceUserListPageModule\", function() { return /* binding */ place_user_list_module_PlaceUserListPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 4 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/Subject.js\nvar Subject = __webpack_require__(\"XNiG\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/merge.js\nvar merge = __webpack_require__(\"VRyK\");\n\n// EXTERNAL MODULE: ./src/app/pages/base-page/base-page.ts\nvar base_page = __webpack_require__(\"NV1z\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/animations/__ivy_ngcc__/fesm2015/animations.js\nvar animations = __webpack_require__(\"R0Ic\");\n\n// EXTERNAL MODULE: ./src/app/pipes/currency-global.ts\nvar currency_global = __webpack_require__(\"RKXm\");\n\n// EXTERNAL MODULE: ./src/app/pages/pay-modal/pay-modal.page.ts\nvar pay_modal_page = __webpack_require__(\"+rAg\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./src/app/services/event-bus.service.ts\nvar event_bus_service = __webpack_require__(\"pqyF\");\n\n// EXTERNAL MODULE: ./src/app/services/app-config.service.ts\nvar app_config_service = __webpack_require__(\"JvtB\");\n\n// EXTERNAL MODULE: ./src/app/services/package.ts\nvar services_package = __webpack_require__(\"6Ip3\");\n\n// EXTERNAL MODULE: ./src/app/services/user-package.ts\nvar user_package = __webpack_require__(\"iNvR\");\n\n// EXTERNAL MODULE: ./src/app/services/place-service.ts\nvar place_service = __webpack_require__(\"qOnq\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/app/components/empty-view/empty-view.ts\nvar empty_view = __webpack_require__(\"4ro/\");\n\n// EXTERNAL MODULE: ./node_modules/ngx-skeleton-loader/__ivy_ngcc__/fesm2015/ngx-skeleton-loader.js + 4 modules\nvar ngx_skeleton_loader = __webpack_require__(\"xJkR\");\n\n// EXTERNAL MODULE: ./src/app/components/place-card/place-card.component.ts\nvar place_card_component = __webpack_require__(\"kmqs\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/app/pages/place-user-list/place-user-list.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction PlaceUserListPage_empty_view_18_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"empty-view\", 20);\r\n        core[\"gc\" /* ɵɵpipe */](1, \"translate\");\r\n    }\r\n    if (rf & 2) {\r\n        core[\"lc\" /* ɵɵproperty */](\"text\", core[\"hc\" /* ɵɵpipeBind1 */](1, 1, \"ERROR_NETWORK\"));\r\n    }\r\n}\r\nfunction PlaceUserListPage_empty_view_19_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Qb\" /* ɵɵelement */](0, \"empty-view\", 21);\r\n        core[\"gc\" /* ɵɵpipe */](1, \"translate\");\r\n    }\r\n    if (rf & 2) {\r\n        core[\"lc\" /* ɵɵproperty */](\"text\", core[\"hc\" /* ɵɵpipeBind1 */](1, 1, \"EMPTY_USER_PLACES\"));\r\n    }\r\n}\r\nconst _c0 = function () { return { width: \"100%\", height: \"200px\", \"border-radius\": \"0\" }; };\r\nfunction PlaceUserListPage_ion_row_24_ion_col_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-col\", 22);\r\n        core[\"Qb\" /* ɵɵelement */](1, \"ngx-skeleton-loader\", 23);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"theme\", core[\"oc\" /* ɵɵpureFunction0 */](1, _c0));\r\n    }\r\n}\r\nfunction PlaceUserListPage_ion_row_24_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-row\");\r\n        core[\"Ec\" /* ɵɵtemplate */](1, PlaceUserListPage_ion_row_24_ion_col_1_Template, 2, 2, \"ion-col\", 18);\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const ctx_r3 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"ngForOf\", ctx_r3.skeletonArray);\r\n    }\r\n}\r\nfunction PlaceUserListPage_ion_col_26_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        const _r10 = core[\"Wb\" /* ɵɵgetCurrentView */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-col\", 22);\r\n        core[\"Vb\" /* ɵɵelementStart */](1, \"app-place-card\", 24);\r\n        core[\"dc\" /* ɵɵlistener */](\"click\", function PlaceUserListPage_ion_col_26_Template_app_place_card_click_1_listener() { core[\"vc\" /* ɵɵrestoreView */](_r10); const place_r8 = ctx.$implicit; const ctx_r9 = core[\"fc\" /* ɵɵnextContext */](); return ctx_r9.onPlaceTouched(place_r8); })(\"onPromoteButtonTouched\", function PlaceUserListPage_ion_col_26_Template_app_place_card_onPromoteButtonTouched_1_listener($event) { core[\"vc\" /* ɵɵrestoreView */](_r10); const ctx_r11 = core[\"fc\" /* ɵɵnextContext */](); return ctx_r11.onPromoteButtonTouched($event); });\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const place_r8 = ctx.$implicit;\r\n        const ctx_r4 = core[\"fc\" /* ɵɵnextContext */]();\r\n        core[\"Db\" /* ɵɵadvance */](1);\r\n        core[\"lc\" /* ɵɵproperty */](\"place\", place_r8)(\"showStatus\", true)(\"extraParams\", ctx_r4.params)(\"showPromoteButton\", ctx_r4.isPromotedListingsEnabled)(\"customObservable\", ctx_r4.loadAndScroll);\r\n    }\r\n}\r\nfunction PlaceUserListPage_ion_infinite_scroll_27_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        const _r13 = core[\"Wb\" /* ɵɵgetCurrentView */]();\r\n        core[\"Vb\" /* ɵɵelementStart */](0, \"ion-infinite-scroll\", 25);\r\n        core[\"dc\" /* ɵɵlistener */](\"ionInfinite\", function PlaceUserListPage_ion_infinite_scroll_27_Template_ion_infinite_scroll_ionInfinite_0_listener($event) { core[\"vc\" /* ɵɵrestoreView */](_r13); const ctx_r12 = core[\"fc\" /* ɵɵnextContext */](); return ctx_r12.onLoadMore($event); });\r\n        core[\"Qb\" /* ɵɵelement */](1, \"ion-infinite-scroll-content\");\r\n        core[\"Ub\" /* ɵɵelementEnd */]();\r\n    }\r\n}\r\nconst _c1 = function () { return [\"./add\"]; };\r\nlet place_user_list_PlaceUserListPage = /*@__PURE__*/ (() => {\r\n    class PlaceUserListPage extends base_page[\"a\" /* BasePage */] {\r\n        constructor(injector, eventBusService, appConfigService, packageService, userPackageService, currencyGlobalPipe, placeService) {\r\n            super(injector);\r\n            this.eventBusService = eventBusService;\r\n            this.appConfigService = appConfigService;\r\n            this.packageService = packageService;\r\n            this.userPackageService = userPackageService;\r\n            this.currencyGlobalPipe = currencyGlobalPipe;\r\n            this.placeService = placeService;\r\n            this.params = {};\r\n            this.places = [];\r\n        }\r\n        ngOnInit() {\r\n            this.setupObservables();\r\n            this.setupEvents();\r\n            this.params.unit = this.preference.unit;\r\n            this.params.limit = 20;\r\n            this.params.page = 0;\r\n        }\r\n        ngOnDestroy() {\r\n            //this.events.unsubscribe('place:add');\r\n        }\r\n        setupObservables() {\r\n            this.contentLoaded = new Subject[\"a\" /* Subject */]();\r\n            this.loadAndScroll = Object(merge[\"a\" /* merge */])(this.container.ionScroll, this.contentLoaded);\r\n        }\r\n        onContentLoaded() {\r\n            setTimeout(() => {\r\n                this.contentLoaded.next();\r\n            }, 300);\r\n        }\r\n        setupEvents() {\r\n            this.eventBusService.on('place:add', () => {\r\n                this.onReload();\r\n            });\r\n        }\r\n        ionViewDidEnter() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                if (!this.places.length) {\r\n                    yield this.showLoadingView({ showOverlay: false });\r\n                    this.loadData();\r\n                }\r\n                else {\r\n                    this.onContentLoaded();\r\n                }\r\n                const title = yield this.getTrans('PLACES');\r\n                this.setPageTitle(title);\r\n                this.setMetaTags({\r\n                    title: title\r\n                });\r\n            });\r\n        }\r\n        enableMenuSwipe() {\r\n            return false;\r\n        }\r\n        presentPayModalPage(place, userPackage) {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                yield this.showLoadingView({ showOverlay: true });\r\n                const modal = yield this.modalCtrl.create({\r\n                    component: pay_modal_page[\"a\" /* PayModalPage */],\r\n                    componentProps: { place, userPackage },\r\n                    cssClass: 'pay-modal'\r\n                });\r\n                yield modal.present();\r\n                yield this.dismissLoadingView();\r\n                return yield modal.onDidDismiss();\r\n            });\r\n        }\r\n        onPromoteButtonTouched(place) {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                try {\r\n                    yield this.showLoadingView({ showOverlay: true });\r\n                    const packages = yield this.packageService.load({\r\n                        type: 'promote_listing'\r\n                    });\r\n                    const options = packages.reduce((accumulator, item) => {\r\n                        const formattedPrice = this.currencyGlobalPipe.transform(item.finalPrice);\r\n                        accumulator[item.id] = `\n          <span>${item.name} - ${formattedPrice}</span>\n          <p class=\"ion-margin-horizontal text-small\">${item.description}</p>\n        `;\r\n                        return accumulator;\r\n                    }, {});\r\n                    yield this.dismissLoadingView();\r\n                    const str = yield this.getTrans([\r\n                        'PROMOTE_LISTING',\r\n                        'CONFIRM',\r\n                        'CANCEL'\r\n                    ]);\r\n                    const { value: packageId } = yield this.showSweetRadio(str.PROMOTE_LISTING, str.CONFIRM, str.CANCEL, options);\r\n                    if (packageId) {\r\n                        yield this.showLoadingView({ showOverlay: true });\r\n                        const userPackage = yield this.userPackageService.create(packageId);\r\n                        yield this.dismissLoadingView();\r\n                        const { data } = yield this.presentPayModalPage(place, userPackage);\r\n                        if (data) {\r\n                            this.onReload();\r\n                        }\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                    this.dismissLoadingView();\r\n                }\r\n            });\r\n        }\r\n        loadData() {\r\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\r\n                try {\r\n                    const config = yield this.appConfigService.load();\r\n                    if (config) {\r\n                        const placeSettings = config.places;\r\n                        this.isPromotedListingsEnabled = placeSettings.enablePromotedListings;\r\n                    }\r\n                    const places = yield this.placeService.loadUserPlaces(this.params);\r\n                    for (let place of places) {\r\n                        this.places.push(place);\r\n                    }\r\n                    this.onRefreshComplete(places);\r\n                    if (this.places.length) {\r\n                        this.showContentView();\r\n                    }\r\n                    else {\r\n                        this.showEmptyView();\r\n                    }\r\n                    this.onContentLoaded();\r\n                }\r\n                catch (err) {\r\n                    this.showContentView();\r\n                    this.onRefreshComplete();\r\n                    let message = yield this.getTrans('ERROR_NETWORK');\r\n                    this.showToast(message);\r\n                }\r\n            });\r\n        }\r\n        onPlaceTouched(place) {\r\n            if (place.status === 'Approved') {\r\n                this.navigateToRelative('./' + place.id);\r\n            }\r\n        }\r\n        onLoadMore(event = {}) {\r\n            this.infiniteScroll = event.target;\r\n            this.params.page++;\r\n            this.loadData();\r\n        }\r\n        onReload(event = {}) {\r\n            this.refresher = event.target;\r\n            this.places = [];\r\n            this.params.page = 0;\r\n            this.loadData();\r\n        }\r\n        getStatusColor(status) {\r\n            if (status === 'Pending') {\r\n                return 'warning';\r\n            }\r\n            else if (status === 'Approved') {\r\n                return 'success';\r\n            }\r\n            else if (status === 'Rejected') {\r\n                return 'danger';\r\n            }\r\n            else if (status === 'Expired') {\r\n                return 'tertiary';\r\n            }\r\n            else {\r\n                console.log('no match found');\r\n            }\r\n        }\r\n    }\r\n    PlaceUserListPage.ɵfac = function PlaceUserListPage_Factory(t) { return new (t || PlaceUserListPage)(core[\"Pb\" /* ɵɵdirectiveInject */](core[\"t\" /* Injector */]), core[\"Pb\" /* ɵɵdirectiveInject */](event_bus_service[\"b\" /* EventBusService */]), core[\"Pb\" /* ɵɵdirectiveInject */](app_config_service[\"a\" /* AppConfigService */]), core[\"Pb\" /* ɵɵdirectiveInject */](services_package[\"a\" /* Package */]), core[\"Pb\" /* ɵɵdirectiveInject */](user_package[\"a\" /* UserPackage */]), core[\"Pb\" /* ɵɵdirectiveInject */](currency_global[\"a\" /* CurrencyGlobalPipe */]), core[\"Pb\" /* ɵɵdirectiveInject */](place_service[\"a\" /* Place */])); };\r\n    PlaceUserListPage.ɵcmp = core[\"Jb\" /* ɵɵdefineComponent */]({ type: PlaceUserListPage, selectors: [[\"place-user-list-page\"]], viewQuery: function PlaceUserListPage_Query(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Kc\" /* ɵɵviewQuery */](ionic_angular[\"r\" /* IonContent */], 3);\r\n            }\r\n            if (rf & 2) {\r\n                let _t;\r\n                core[\"tc\" /* ɵɵqueryRefresh */](_t = core[\"ec\" /* ɵɵloadQuery */]()) && (ctx.container = _t.first);\r\n            }\r\n        }, features: [core[\"Cb\" /* ɵɵProvidersFeature */]([currency_global[\"a\" /* CurrencyGlobalPipe */]]), core[\"Ab\" /* ɵɵInheritDefinitionFeature */]], decls: 28, vars: 22, consts: [[1, \"ion-no-border\"], [\"color\", \"primary\", \"fixed\", \"\"], [\"slot\", \"start\"], [\"defaultHref\", \"/1/profile\"], [\"slot\", \"end\"], [\"fill\", \"solid\", \"color\", \"secondary\", \"shape\", \"round\", 1, \"hide-xs-up\", \"show-md-up\", 3, \"routerLink\"], [1, \"bold\"], [\"scrollEvents\", \"true\", 1, \"ion-padding\"], [\"container\", \"\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [3, \"pullingText\", \"refreshingText\"], [\"icon\", \"alert-circle-outline\", 3, \"text\", 4, \"ngIf\"], [\"icon\", \"pin\", 3, \"text\", 4, \"ngIf\"], [\"slot\", \"fixed\", \"vertical\", \"bottom\", \"horizontal\", \"end\", 1, \"show-xs-up\", \"hide-md-up\"], [3, \"routerLink\"], [\"name\", \"add\"], [\"fixed\", \"\"], [4, \"ngIf\"], [\"size-xs\", \"12\", \"size-sm\", \"6\", \"size-md\", \"6\", \"size-lg\", \"4\", 4, \"ngFor\", \"ngForOf\"], [3, \"ionInfinite\", 4, \"ngIf\"], [\"icon\", \"alert-circle-outline\", 3, \"text\"], [\"icon\", \"pin\", 3, \"text\"], [\"size-xs\", \"12\", \"size-sm\", \"6\", \"size-md\", \"6\", \"size-lg\", \"4\"], [\"count\", \"1\", \"appearance\", \"circle\", 3, \"theme\"], [3, \"place\", \"showStatus\", \"extraParams\", \"showPromoteButton\", \"customObservable\", \"click\", \"onPromoteButtonTouched\"], [3, \"ionInfinite\"]], template: function PlaceUserListPage_Template(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Vb\" /* ɵɵelementStart */](0, \"ion-header\", 0);\r\n                core[\"Vb\" /* ɵɵelementStart */](1, \"ion-toolbar\", 1);\r\n                core[\"Vb\" /* ɵɵelementStart */](2, \"ion-buttons\", 2);\r\n                core[\"Qb\" /* ɵɵelement */](3, \"ion-back-button\", 3);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](4, \"ion-title\");\r\n                core[\"Gc\" /* ɵɵtext */](5);\r\n                core[\"gc\" /* ɵɵpipe */](6, \"translate\");\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](7, \"ion-buttons\", 4);\r\n                core[\"Vb\" /* ɵɵelementStart */](8, \"ion-button\", 5);\r\n                core[\"Vb\" /* ɵɵelementStart */](9, \"span\", 6);\r\n                core[\"Gc\" /* ɵɵtext */](10);\r\n                core[\"gc\" /* ɵɵpipe */](11, \"translate\");\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](12, \"ion-content\", 7, 8);\r\n                core[\"Vb\" /* ɵɵelementStart */](14, \"ion-refresher\", 9);\r\n                core[\"dc\" /* ɵɵlistener */](\"ionRefresh\", function PlaceUserListPage_Template_ion_refresher_ionRefresh_14_listener($event) { return ctx.onReload($event); });\r\n                core[\"Qb\" /* ɵɵelement */](15, \"ion-refresher-content\", 10);\r\n                core[\"gc\" /* ɵɵpipe */](16, \"translate\");\r\n                core[\"gc\" /* ɵɵpipe */](17, \"translate\");\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ec\" /* ɵɵtemplate */](18, PlaceUserListPage_empty_view_18_Template, 2, 3, \"empty-view\", 11);\r\n                core[\"Ec\" /* ɵɵtemplate */](19, PlaceUserListPage_empty_view_19_Template, 2, 3, \"empty-view\", 12);\r\n                core[\"Vb\" /* ɵɵelementStart */](20, \"ion-fab\", 13);\r\n                core[\"Vb\" /* ɵɵelementStart */](21, \"ion-fab-button\", 14);\r\n                core[\"Qb\" /* ɵɵelement */](22, \"ion-icon\", 15);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Vb\" /* ɵɵelementStart */](23, \"ion-grid\", 16);\r\n                core[\"Ec\" /* ɵɵtemplate */](24, PlaceUserListPage_ion_row_24_Template, 2, 1, \"ion-row\", 17);\r\n                core[\"Vb\" /* ɵɵelementStart */](25, \"ion-row\");\r\n                core[\"Ec\" /* ɵɵtemplate */](26, PlaceUserListPage_ion_col_26_Template, 2, 5, \"ion-col\", 18);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n                core[\"Ec\" /* ɵɵtemplate */](27, PlaceUserListPage_ion_infinite_scroll_27_Template, 2, 0, \"ion-infinite-scroll\", 19);\r\n                core[\"Ub\" /* ɵɵelementEnd */]();\r\n            }\r\n            if (rf & 2) {\r\n                core[\"Db\" /* ɵɵadvance */](5);\r\n                core[\"Ic\" /* ɵɵtextInterpolate1 */](\" \", core[\"hc\" /* ɵɵpipeBind1 */](6, 12, \"MY_PLACES\"), \" \");\r\n                core[\"Db\" /* ɵɵadvance */](3);\r\n                core[\"lc\" /* ɵɵproperty */](\"routerLink\", core[\"oc\" /* ɵɵpureFunction0 */](20, _c1));\r\n                core[\"Db\" /* ɵɵadvance */](2);\r\n                core[\"Hc\" /* ɵɵtextInterpolate */](core[\"hc\" /* ɵɵpipeBind1 */](11, 14, \"ADD_PLACE\"));\r\n                core[\"Db\" /* ɵɵadvance */](5);\r\n                core[\"mc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"hc\" /* ɵɵpipeBind1 */](16, 16, \"PULL_TO_REFRESH\"));\r\n                core[\"mc\" /* ɵɵpropertyInterpolate */](\"refreshingText\", core[\"hc\" /* ɵɵpipeBind1 */](17, 18, \"REFRESHING\"));\r\n                core[\"Db\" /* ɵɵadvance */](3);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isErrorViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isEmptyViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](2);\r\n                core[\"lc\" /* ɵɵproperty */](\"routerLink\", core[\"oc\" /* ɵɵpureFunction0 */](21, _c1));\r\n                core[\"Db\" /* ɵɵadvance */](3);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isLoadingViewVisible);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"@staggerIn\", ctx.places.length);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngForOf\", ctx.places);\r\n                core[\"Db\" /* ɵɵadvance */](1);\r\n                core[\"lc\" /* ɵɵproperty */](\"ngIf\", ctx.isContentViewVisible);\r\n            }\r\n        }, directives: [ionic_angular[\"w\" /* IonHeader */], ionic_angular[\"db\" /* IonToolbar */], ionic_angular[\"l\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"bb\" /* IonTitle */], ionic_angular[\"k\" /* IonButton */], ionic_angular[\"lb\" /* RouterLinkDelegate */], router[\"i\" /* RouterLink */], ionic_angular[\"r\" /* IonContent */], ionic_angular[\"K\" /* IonRefresher */], ionic_angular[\"L\" /* IonRefresherContent */], common[\"m\" /* NgIf */], ionic_angular[\"s\" /* IonFab */], ionic_angular[\"t\" /* IonFabButton */], ionic_angular[\"x\" /* IonIcon */], ionic_angular[\"v\" /* IonGrid */], ionic_angular[\"O\" /* IonRow */], common[\"l\" /* NgForOf */], empty_view[\"a\" /* EmptyView */], ionic_angular[\"q\" /* IonCol */], ngx_skeleton_loader[\"a\" /* NgxSkeletonLoaderComponent */], place_card_component[\"a\" /* PlaceCardComponent */], ionic_angular[\"y\" /* IonInfiniteScroll */], ionic_angular[\"z\" /* IonInfiniteScrollContent */]], pipes: [ngx_translate_core[\"c\" /* TranslatePipe */]], styles: [\"ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light-tint)}\"], data: { animation: [\r\n                Object(animations[\"l\" /* trigger */])('staggerIn', [\r\n                    Object(animations[\"k\" /* transition */])('* => *', [\r\n                        Object(animations[\"f\" /* query */])(':enter', Object(animations[\"j\" /* style */])({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\r\n                        Object(animations[\"f\" /* query */])(':enter', Object(animations[\"h\" /* stagger */])('100ms', [Object(animations[\"e\" /* animate */])('300ms', Object(animations[\"j\" /* style */])({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\r\n                    ])\r\n                ])\r\n            ] } });\r\n    return PlaceUserListPage;\r\n})();\r\n\n// EXTERNAL MODULE: ./src/app/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"d2mR\");\n\n// EXTERNAL MODULE: ./src/app/pages/pay-modal/pay-modal.module.ts\nvar pay_modal_module = __webpack_require__(\"vY95\");\n\n// CONCATENATED MODULE: ./src/app/pages/place-user-list/place-user-list.module.ts\n\r\n\r\n\r\n\r\n\r\n\r\nlet place_user_list_module_PlaceUserListPageModule = /*@__PURE__*/ (() => {\r\n    class PlaceUserListPageModule {\r\n    }\r\n    PlaceUserListPageModule.ɵmod = core[\"Nb\" /* ɵɵdefineNgModule */]({ type: PlaceUserListPageModule });\r\n    PlaceUserListPageModule.ɵinj = core[\"Mb\" /* ɵɵdefineInjector */]({ factory: function PlaceUserListPageModule_Factory(t) { return new (t || PlaceUserListPageModule)(); }, imports: [[\r\n                shared_module[\"a\" /* SharedModule */],\r\n                pay_modal_module[\"a\" /* PayModalPageModule */],\r\n                router[\"j\" /* RouterModule */].forChild([\r\n                    {\r\n                        path: '',\r\n                        component: place_user_list_PlaceUserListPage\r\n                    }\r\n                ])\r\n            ]] });\r\n    return PlaceUserListPageModule;\r\n})();\r\n\n\n/***/ })\n\n}]);","inputSourceMap":null}